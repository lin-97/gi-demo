import{d as e,u as l,c as t,I as a,f as r,g as o,o as d,j as i,h as n,w as s,m as c,i as u,F as p,k as m,a as f,C as b,r as x,G as y,t as w,_ as k}from"./index-TfpzvVHF.js";const _={class:"gi-edit-table"},I=["onDblclick"],v=["onDblclick"],g=k(e({name:"GiEditTable",inheritAttrs:!1,__name:"GiEditTable",props:{columns:{},data:{},cellDisabled:{type:[Boolean,Function],default:!1}},emits:["tr-dblclick","td-dblclick"],setup(e,{expose:k,emit:g}){const D=e,C=g,$=l(),h=t((()=>({tableData:D.data}))),P=a("formRef"),q=e=>e.required?"gi_column_require":"",V=new Map([["input",{allowClear:!0,maxLength:20}],["textarea",{allowClear:!1,maxLength:200}],["input-tag",{allowClear:!0}],["mention",{allowClear:!0}],["select",{allowClear:!0}],["tree-select",{allowClear:!0}],["cascader",{allowClear:!0}],["date-picker",{allowClear:!0}],["time-picker",{allowClear:!0}]]),G=e=>{if(e.type)return["input","input-tag","mention"].includes(e.type)?`请输入${e.title}`:["textarea"].includes(e.type)?`请填写${e.title}`:["select","tree-select","cascader"].includes(e.type)?`请选择${e.title}`:["date-picker"].includes(e.type)?"请选择日期":["time-picker"].includes(e.type)?"请选择时间":void 0},R=e=>({...V.get(e.type)||{},placeholder:G(e),...e.props}),j=e=>["input","input-number","input-tag","mention"].includes(e.type??"")?`请输入${e.title}`:["textarea"].includes(e.type??"")?`请填写${e.title}`:`请选择${e.title}`;return k({formRef:P}),(e,l)=>{const t=r("a-form-item"),a=r("a-table-column"),k=r("a-table"),g=r("a-form");return d(),o("div",_,[i(g,{ref_key:"formRef",ref:P,"scroll-to-first-error":"",model:n(h)},{default:s((()=>[i(k,c({data:n(h).tableData,bordered:{cell:!0},pagination:!1},n($)),{columns:s((()=>[(d(!0),o(p,null,m(D.columns,(l=>(d(),f(a,c({key:l.dataIndex,"data-index":l.dataIndex,"header-cell-class":q(l)},{ref_for:!0},l.columnProps,{title:l.title}),{title:s((()=>{var e,t,a;return["function"==typeof(null==(e=null==l?void 0:l.columnProps)?void 0:e.title)?(d(),f(x(null==(t=null==l?void 0:l.columnProps)?void 0:t.title),{key:0})):(d(),o(p,{key:1},[y(w((null==(a=null==l?void 0:l.columnProps)?void 0:a.title)||l.title),1)],64))]})),cell:s((({record:a,rowIndex:r,column:o})=>[i(t,c({field:`tableData[${r}].${l.dataIndex}`,"label-col-style":{display:"none"},"wrapper-col-props":{span:24}},{ref_for:!0},l.formItemProps,{rules:[{required:l.required||!1,message:j(l)},...l.rules||[]]}),{default:s((()=>{return[l.slotName?b(e.$slots,l.dataIndex,c({key:0,ref_for:!0},{record:a,rowIndex:r,column:o}),void 0,!0):(d(),f(x(`a-${l.type}`),c({key:1,ref_for:!0},R(l),{modelValue:a[l.dataIndex],"onUpdate:modelValue":e=>a[l.dataIndex]=e,disabled:(t={row:a,rowIndex:r,col:l},"boolean"==typeof(null==D?void 0:D.cellDisabled)?D.cellDisabled:"function"==typeof(null==D?void 0:D.cellDisabled)&&D.cellDisabled(t))}),null,16,["modelValue","onUpdate:modelValue","disabled"]))];var t})),_:2},1040,["field","rules"])])),_:2},1040,["data-index","header-cell-class","title"])))),128))])),tr:s((({record:e,rowIndex:l})=>[u("tr",{class:"gi-edit-table-tr",onDblclick:t=>C("tr-dblclick",{record:e,rowIndex:l})},null,40,I)])),td:s((({record:e,column:l,rowIndex:t})=>[u("td",{class:"gi-edit-table-td",onDblclick:a=>C("td-dblclick",{record:e,column:l,rowIndex:t})},null,40,v)])),_:3},16,["data"])])),_:3},8,["model"])])}}}),[["__scopeId","data-v-b75b1269"]]);export{g as _};
