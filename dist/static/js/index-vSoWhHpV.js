import{_ as e}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-4vfaCKTH.js";import{_ as a}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-Bdh4Bh3Q.js";import{_ as l}from"./PermModal.vue_vue_type_script_setup_true_lang-Ckqxrcop.js";import{d as t,I as i,V as s,f as n,a as d,o,w as r,j as u,h as c,i as p,G as _,t as m,J as f}from"./index-TfpzvVHF.js";import{u as y}from"./useTable-DeeRRQsd.js";import"./dept-KN3t3dXU.js";import{b as g}from"./role-OoDcevB-.js";import{u as h}from"./useDict-CoYV7zdy.js";import"./useResetReactive-6TTKur6Y.js";import"./menu-Cy9l0oKZ.js";import"./useBreakpoint-OtdazYr1.js";import"./index-5-TD8lPC.js";const v=t({name:"SystemRole",__name:"index",setup(t){const{data:v}=h({code:"status"}),w=i("AddRoleModalRef"),k=i("PermModalRef"),b=s({name:"",status:""}),{loading:x,tableData:j,pagination:C,selectedKeys:S,search:R,select:V,selectAll:A,fixed:M,handleDelete:z}=y((e=>g.getList({...e,...b})),{immediate:!0}),B=()=>{b.name="",b.status="",R()},D=()=>{var e;null==(e=w.value)||e.add()},P=()=>{if(!S.value.length)return f.warning("请选择角色！");z((()=>g.delete({ids:S.value})))};return(t,i)=>{const s=n("icon-search"),f=n("a-input"),y=n("a-select"),h=n("a-button"),G=n("icon-refresh"),I=n("a-space"),J=n("icon-plus"),K=n("icon-delete"),L=n("a-row"),O=n("a-table-column"),T=e,U=n("icon-edit"),W=n("icon-safe"),q=n("a-popconfirm"),E=n("a-table"),F=n("a-card");return o(),d(F,{title:"角色管理",class:"gi_page_card"},{default:r((()=>[u(I,{wrap:""},{default:r((()=>[u(f,{modelValue:c(b).name,"onUpdate:modelValue":i[0]||(i[0]=e=>c(b).name=e),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:r((()=>[u(s)])),_:1},8,["modelValue"]),u(y,{modelValue:c(b).status,"onUpdate:modelValue":i[1]||(i[1]=e=>c(b).status=e),options:c(v),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),u(h,{type:"primary",onClick:c(R)},{icon:r((()=>[u(s)])),default:r((()=>[i[2]||(i[2]=p("span",null,"查询",-1))])),_:1,__:[2]},8,["onClick"]),u(h,{onClick:B},{icon:r((()=>[u(G)])),default:r((()=>[i[3]||(i[3]=p("span",null,"重置",-1))])),_:1,__:[3]})])),_:1}),u(L,null,{default:r((()=>[u(I,{wrap:""},{default:r((()=>[u(h,{type:"primary",onClick:D},{icon:r((()=>[u(J)])),default:r((()=>[i[4]||(i[4]=p("span",null,"新增",-1))])),_:1,__:[4]}),u(h,{type:"primary",status:"danger",onClick:P},{icon:r((()=>[u(K)])),default:r((()=>[i[5]||(i[5]=p("span",null,"删除",-1))])),_:1,__:[5]})])),_:1})])),_:1}),u(E,{class:"gi_table","row-key":"id",data:c(j),bordered:{cell:!0},loading:c(x),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:c(C),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":c(S),onSelect:c(V),onSelectAll:c(A)},{columns:r((()=>[u(O,{title:"序号",width:64},{cell:r((e=>[_(m(e.rowIndex+1),1)])),_:1}),u(O,{title:"角色名称","data-index":"name"}),u(O,{title:"角色编码","data-index":"code",width:150}),u(O,{title:"状态",width:100,align:"center"},{cell:r((({record:e})=>[u(T,{status:e.status},null,8,["status"])])),_:1}),u(O,{title:"描述","data-index":"description",ellipsis:!0,tooltip:!0}),u(O,{title:"创建时间","data-index":"createTime",width:180}),u(O,{title:"操作",width:280,align:"center",fixed:c(M)},{cell:r((({record:e})=>[u(I,null,{default:r((()=>[u(h,{type:"primary",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=w.value)||t.edit(l.id));var l,t}},{icon:r((()=>[u(U)])),default:r((()=>[i[6]||(i[6]=p("span",null,"编辑",-1))])),_:2,__:[6]},1032,["disabled","onClick"]),u(h,{type:"primary",status:"success",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=k.value)||t.open({code:l.code,title:l.name}));var l,t}},{icon:r((()=>[u(W)])),default:r((()=>i[7]||(i[7]=[_("分配权限")]))),_:2},1032,["disabled","onClick"]),u(q,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:a=>{return l=e,z((()=>g.delete({ids:[l.id]})),{showModal:!1});var l}},{default:r((()=>[u(h,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:r((()=>[u(K)])),default:r((()=>[i[8]||(i[8]=p("span",null,"删除",-1))])),_:2,__:[8]},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),u(a,{ref_key:"AddRoleModalRef",ref:w,onSaveSuccess:c(R)},null,8,["onSaveSuccess"]),u(l,{ref_key:"PermModalRef",ref:k},null,512)])),_:1})}}});export{v as default};
