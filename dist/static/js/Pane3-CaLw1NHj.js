import{_ as e}from"./index-CWm6Zq_S.js";import{_ as a}from"./GiEditTable.vue_vue_type_script_setup_true_lang-UjRtrhdJ.js";import{a as t}from"./regexp-LyZ7ySAN.js";import{d as s,b as n,k as l,J as d,U as i,e as o,o as r,f as u,h as c,w as p,G as m,i as f,g as x,V as _,_ as I}from"./index-BVPTpv-5.js";import{u as v}from"./useDict-V9gox1u_.js";const y={class:"pane"},w=I(s({name:"FormTable",__name:"Pane3",setup(s){const{data:I}=v({code:"status"}),w=n([{name:"张三",phone:"",address:"广州市",rate:3,status:0,num:0}]),b=l((()=>JSON.stringify(w.value,null,"\t"))),g=d("GiEditTableRef"),h=l((()=>[{type:"input",title:"姓名",dataIndex:"name",required:!0},{type:"input",title:"手机号",dataIndex:"phone",required:!0,rules:[{match:t,message:"手机号格式不正确"}]},{type:"select",title:"状态",dataIndex:"status",props:{options:I.value}},{type:"rate",title:"评分",dataIndex:"rate",columnProps:{width:200}},{type:"input-number",title:"小数",dataIndex:"num",columnProps:{width:120}},{type:"textarea",title:"地址",dataIndex:"address",props:{autoSize:!0,maxLength:200,showWordLimit:!0},columnProps:{width:250}},{type:"",title:"操作",dataIndex:"action",slotName:"action",columnProps:{width:140,align:"center",fixed:"right"},formItemProps:{contentClass:"arco-table-cell-align-center"}}])),j=()=>{w.value.push({name:"",phone:"",address:"",rate:0,status:0,num:0})},k=i({rowIndex:-1,dataIndex:""}),C=e=>{k.rowIndex=e.rowIndex,k.dataIndex=e.column.dataIndex},P=()=>{var e,a,t,s;null==(a=null==(e=g.value)?void 0:e.formRef)||a.resetFields(),null==(s=null==(t=g.value)?void 0:t.formRef)||s.clearValidate()},R=async()=>{var e,a;const t=await(null==(a=null==(e=g.value)?void 0:e.formRef)?void 0:a.validate());if(t){const e=Object.values(t);_.warning(e[0].message)}else _.success("验证通过~")},T=({rowIndex:e,col:a})=>k.rowIndex!==e||k.dataIndex!==a.dataIndex;return(t,s)=>{const n=o("a-alert"),l=o("icon-plus"),d=o("a-button"),i=o("a-space"),_=o("a-row"),I=a,v=e;return r(),u("div",y,[c(n,null,{default:p((()=>s[1]||(s[1]=[m("此示例基于GiEditTable实现了双击单元格编辑")]))),_:1}),c(_,{class:"gi_mt",justify:"end"},{default:p((()=>[c(i,{wrap:""},{default:p((()=>[c(d,{type:"primary",onClick:j},{icon:p((()=>[c(l)])),default:p((()=>[s[2]||(s[2]=f("span",null,"新增",-1))])),_:1})])),_:1})])),_:1}),c(I,{ref_key:"GiEditTableRef",ref:g,scroll:{minWidth:1200},columns:x(h),data:x(w),"cell-disabled":T,onTdDblclick:C},{action:p((({rowIndex:e})=>[c(i,null,{default:p((()=>[c(d,{type:"primary",status:"success",size:"mini",disabled:!(x(k).rowIndex>=0&&x(k).rowIndex===e),onClick:s[0]||(s[0]=e=>(k.rowIndex=-1,void(k.dataIndex="")))},{default:p((()=>s[3]||(s[3]=[m(" 保存 ")]))),_:2},1032,["disabled"]),c(d,{type:"primary",status:"danger",size:"mini",onClick:a=>{return t=e,void w.value.splice(t,1);var t}},{default:p((()=>s[4]||(s[4]=[m(" 删除 ")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:1},8,["columns","data"]),c(_,{justify:"end",class:"gi_mt"},{default:p((()=>[c(i,{wrap:""},{default:p((()=>[c(d,{onClick:P},{default:p((()=>s[5]||(s[5]=[m("重置")]))),_:1}),c(d,{type:"primary",onClick:R},{default:p((()=>s[6]||(s[6]=[m("验证并提交")]))),_:1})])),_:1})])),_:1}),c(v,{"code-json":x(b)},null,8,["code-json"])])}}}),[["__scopeId","data-v-e6c4a037"]]);export{w as default};
