import{_ as e}from"./GiForm-UGVAUyi2.js";import{u as n}from"./index-CWsJrtG_.js";import{_ as a}from"./index-DYjg1Rxd.js";import{d as t,V as l,f as o,g as s,o as r,j as i,w as u,h as d,i as c,e as m,M as p,Z as f,J as h,a as w,D as g,a8 as y}from"./index-CaTNYhxh.js";import{u as _}from"./useTable-DzfxcQ6X.js";import{b as v}from"./index-7eUj0KQm.js";import{_ as x}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BCwoOWHD.js";const b=t({__name:"Table",props:{multiple:{type:Boolean,default:!1},queryParams:{default:()=>({})}},setup(e,{expose:n}){const a=e,t=l({username:""}),m=[{title:"序号",width:68,render:({rowIndex:e})=>i("span",null,[e+1])},{title:"姓名",dataIndex:"name",width:180},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"状态",width:100,align:"center",render:({record:e})=>i(x,{status:e.status},null)}],{loading:p,tableData:f,pagination:h,selectedKeys:w,search:g,select:y,selectAll:b}=_(e=>v.getList({...e,...t,...a.queryParams}),{immediate:!0});const C=()=>{t.username="",g()};return n({getSelectedData:function(){return f.value.filter(e=>w.value.includes(e.id))}}),(e,n)=>{const l=o("a-input"),w=o("icon-search"),_=o("a-button"),v=o("icon-refresh"),x=o("a-space"),S=o("a-row"),k=o("a-table");return r(),s("div",null,[i(S,{justify:"end"},{default:u(()=>[i(x,{wrap:""},{default:u(()=>[i(l,{modelValue:d(t).username,"onUpdate:modelValue":n[0]||(n[0]=e=>d(t).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"]),i(_,{type:"primary",onClick:d(g)},{icon:u(()=>[i(w)]),default:u(()=>[n[1]||(n[1]=c("span",null,"查询",-1))]),_:1,__:[1]},8,["onClick"]),i(_,{onClick:C},{icon:u(()=>[i(v)]),default:u(()=>[n[2]||(n[2]=c("span",null,"重置",-1))]),_:1,__:[2]})]),_:1})]),_:1}),i(k,{class:"gi_table","row-key":"id",loading:d(p),bordered:{cell:!0},columns:m,data:d(f),scroll:{x:"100%",y:"500px"},"row-selection":{type:a.multiple?"checkbox":"radio",showCheckedAll:!0},pagination:d(h),onSelect:d(y),onSelectAll:d(b)},null,8,["loading","data","row-selection","pagination","onSelect","onSelectAll"])])}}});const C=t({__name:"Card1",setup(t){const{width:s}=n(),_=l({userId:"",userName:"",phone:"",status:""}),v=l([{type:"input-search",label:"用户",field:"userName",props:{allowClear:!0,onSearch:()=>{!function(e){const n=m();p.open({title:(null==e?void 0:e.title)||"选择用户",content:()=>f(b,{ref:e=>n.value=e,queryParams:null==e?void 0:e.queryParams}),width:"90%",modalStyle:{maxWidth:"1000px"},onBeforeOk:async()=>{var a,t;const l=(null==(a=n.value)?void 0:a.getSelectedData())||[];return l.length?(null==e?void 0:e.onBeforeOk)?await e.onBeforeOk(l):(null==(t=null==e?void 0:e.onOk)||t.call(e,l),!0):(h.warning("请选择用户"),!1)}})}({onOk:e=>{_.userId=e[0].id,_.userName=e[0].name}})},onClear:()=>{_.userId="",_.userName=""}}},{type:"input",label:"手机",field:"phone",props:{maxLength:11}},{type:"select",label:"状态",field:"status",props:{placeholder:"自定义placeholder",options:[{label:"启用",value:1},{label:"禁用",value:0}]}}]),x=()=>{y.open({title:"数据结构",content:()=>f(a,{codeJson:"\n<template>\n  <a-card title=\"配置表单-查询\">\n    <template #extra>\n      <a-button type=\"primary\" status=\"warning\" @click=\"onViewCode\">\n        <template #icon><icon-code /></template>\n        <span>查看代码</span>\n      </a-button>\n    </template>\n    <a-row :gutter=\"30\">\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"12\">\n        <GiForm v-model=\"form\" class=\"gi_mb\" search :columns=\"columns\" @search=\"search\" @reset=\"reset\">\n        </GiForm>\n      </a-col>\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"12\">\n        <GiCodeView :code-json=\"JSON.stringify(form, null, '\t')\"></GiCodeView>\n      </a-col>\n    </a-row>\n  </a-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { Drawer, Message } from '@arco-design/web-vue'\nimport { useWindowSize } from '@vueuse/core'\nimport Card1Json from './code/card1-json'\nimport type { ColumnItem } from '@/components/GiForm'\nimport GiCodeView from '@/components/GiCodeView/index.vue'\nimport { selectUserDialog } from '@/components/dialog'\n\nconst { width } = useWindowSize()\n\nconst form = reactive({\n  userId: '',\n  userName: '',\n  phone: '',\n  status: ''\n})\n\nconst columns = reactive([\n  {\n    type: 'input-search',\n    label: '用户',\n    field: 'userName',\n    props: {\n      allowClear: true,\n      onSearch: () => {\n        selectUserDialog({\n          onOk: (data) => {\n            form.userId = data[0].id\n            form.userName = data[0].name\n          }\n        })\n      },\n      onClear: () => {\n        form.userId = ''\n        form.userName = ''\n      }\n    }\n  },\n  {\n    type: 'input',\n    label: '手机',\n    field: 'phone',\n    props: {\n      maxLength: 11\n    }\n  },\n  {\n    type: 'select',\n    label: '状态',\n    field: 'status',\n    props: {\n      placeholder: '自定义placeholder',\n      options: [\n        { label: '启用', value: 1 },\n        { label: '禁用', value: 0 }\n      ]\n    }\n  }\n] as ColumnItem[])\n\nconst onViewCode = () => {\n  Drawer.open({\n    title: '数据结构',\n    content: () => h(GiCodeView, { codeJson: Card1Json, type: 'vue' }),\n    width: width.value < 500 ? '100%' : 560\n  })\n}\n\nconst search = () => {\n  Message.info('点击了搜索')\n}\n\nconst reset = () => {\n  Message.info('点击了重置')\n}\n<\/script>\n\n<style lang=\"scss\" scoped></style>\n\n",type:"vue"}),width:s.value<500?"100%":560})},C=()=>{h.info("点击了搜索")},S=()=>{h.info("点击了重置")};return(n,t)=>{const l=o("icon-code"),s=o("a-button"),m=e,p=o("a-col"),f=o("a-row"),h=o("a-card");return r(),w(h,{title:"配置表单-查询"},{extra:u(()=>[i(s,{type:"primary",status:"warning",onClick:x},{icon:u(()=>[i(l)]),default:u(()=>[t[1]||(t[1]=c("span",null,"查看代码",-1))]),_:1,__:[1]})]),default:u(()=>[i(f,{gutter:30},{default:u(()=>[i(p,{xs:24,sm:24,md:12},{default:u(()=>[i(m,{modelValue:d(_),"onUpdate:modelValue":t[0]||(t[0]=e=>g(_)?_.value=e:null),class:"gi_mb",search:"",columns:d(v),onSearch:C,onReset:S},null,8,["modelValue","columns"])]),_:1}),i(p,{xs:24,sm:24,md:12},{default:u(()=>[i(a,{"code-json":JSON.stringify(d(_),null,"\t")},null,8,["code-json"])]),_:1})]),_:1})]),_:1})}}});export{C as _};
