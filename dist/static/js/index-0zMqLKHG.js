import{_ as e}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BCwoOWHD.js";import{_ as t}from"./AddDeptModal.vue_vue_type_script_setup_true_lang-D1lQ3_Ks.js";import{d as a,I as l,V as s,f as n,a as i,o,w as d,j as r,h as u,i as c,b as p,J as _,a6 as m}from"./index-CaTNYhxh.js";import{u as f}from"./useTable-DzfxcQ6X.js";import{b as y}from"./dept-BtlGnOEc.js";import"./role-BwDBVdZ2.js";import{u as h}from"./useDict-DE_97KF8.js";import"./useResetReactive-CVrmH7v1.js";import"./useDept-C0psf_Jk.js";import"./useBreakpoint-DP2pWxtU.js";import"./index-CWsJrtG_.js";const k=a({name:"SystemDept",__name:"index",setup(a){const{data:k}=h({code:"status"}),w=l("AddDeptModalRef"),g=l("tableRef"),x=s({name:"",status:""}),{loading:v,tableData:b,selectedKeys:j,search:S,select:C,selectAll:D,fixed:A,handleDelete:V}=f(()=>y.getList({...x}),{immediate:!0,onSuccess:()=>{m(()=>{var e;null==(e=g.value)||e.expandAll(!0)})}}),R=()=>{x.name="",x.status="",S()},I=()=>{var e;null==(e=w.value)||e.add()},M=()=>j.value.length?V(()=>y.delete({ids:j.value})):_.warning("请选择部门");return(a,l)=>{const s=n("icon-search"),_=n("a-input"),m=n("a-select"),f=n("a-button"),h=n("icon-refresh"),z=n("a-space"),B=n("icon-plus"),O=n("icon-delete"),T=n("a-row"),U=n("IconDown"),E=n("IconRight"),G=n("a-table-column"),J=e,K=n("icon-edit"),L=n("a-popconfirm"),W=n("a-table"),q=n("a-card");return o(),i(q,{title:"部门管理",class:"gi_page_card"},{default:d(()=>[r(z,{wrap:""},{default:d(()=>[r(_,{modelValue:u(x).name,"onUpdate:modelValue":l[0]||(l[0]=e=>u(x).name=e),placeholder:"输入部门名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:d(()=>[r(s)]),_:1},8,["modelValue"]),r(m,{modelValue:u(x).status,"onUpdate:modelValue":l[1]||(l[1]=e=>u(x).status=e),options:u(k),placeholder:"部门状态",style:{width:"120px"}},null,8,["modelValue","options"]),r(f,{type:"primary",onClick:u(S)},{icon:d(()=>[r(s)]),default:d(()=>[l[3]||(l[3]=c("span",null,"搜索",-1))]),_:1,__:[3]},8,["onClick"]),r(f,{onClick:R},{icon:d(()=>[r(h)]),default:d(()=>[l[4]||(l[4]=c("span",null,"重置",-1))]),_:1,__:[4]})]),_:1}),r(T,null,{default:d(()=>[r(z,{wrap:""},{default:d(()=>[r(f,{type:"primary",onClick:I},{icon:d(()=>[r(B)]),default:d(()=>[l[5]||(l[5]=c("span",null,"新增",-1))]),_:1,__:[5]}),r(f,{type:"primary",status:"danger",onClick:M},{icon:d(()=>[r(O)]),default:d(()=>[l[6]||(l[6]=c("span",null,"删除",-1))]),_:1,__:[6]})]),_:1})]),_:1}),r(W,{ref_key:"tableRef",ref:g,class:"gi_table","row-key":"id",bordered:{cell:!0},data:u(b),loading:u(v),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:!1,"row-selection":{type:"checkbox",showCheckedAll:!1},"selected-keys":u(j),onSelect:u(C),onSelectAll:u(D)},{"expand-icon":d(({expanded:e})=>[e?(o(),i(U,{key:0})):(o(),i(E,{key:1}))]),columns:d(()=>[r(G,{title:"部门名称","data-index":"name",width:160}),r(G,{title:"排序","data-index":"sort",width:100,align:"center"}),r(G,{title:"状态",width:100,align:"center"},{cell:d(({record:e})=>[r(J,{status:e.status},null,8,["status"])]),_:1}),r(G,{title:"描述","data-index":"description",width:250,ellipsis:!0,tooltip:!0}),r(G,{title:"创建时间","data-index":"createTime",width:200}),r(G,{title:"操作",width:200,align:"center",fixed:u(A)},{cell:d(({record:e})=>[r(z,null,{default:d(()=>[r(f,{type:"primary",size:"mini",onClick:t=>{return a=e,void(null==(l=w.value)||l.edit(a.id));var a,l}},{icon:d(()=>[r(K)]),default:d(()=>[l[7]||(l[7]=c("span",null,"编辑",-1))]),_:2,__:[7]},1032,["onClick"]),e.parentId?(o(),i(f,{key:0,type:"primary",status:"success",size:"mini",onClick:l[2]||(l[2]=e=>I())},{icon:d(()=>[r(B)]),default:d(()=>[l[8]||(l[8]=c("span",null,"新增",-1))]),_:1,__:[8]})):p("",!0),r(L,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:t=>{return a=e,V(()=>y.delete({ids:[a.id]}),{showModal:!1});var a}},{default:d(()=>[r(f,{type:"primary",status:"danger",size:"mini"},{icon:d(()=>[r(O)]),default:d(()=>[l[9]||(l[9]=c("span",null,"删除",-1))]),_:1,__:[9]})]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","selected-keys","onSelect","onSelectAll"]),r(t,{ref_key:"AddDeptModalRef",ref:w,onSaveSuccess:u(S)},null,8,["onSaveSuccess"])]),_:1})}}});export{k as default};
