import{d as e,u as l,c as a,H as t,f as r,o,g as d,i,w as n,m as c,h as s,F as u,k as p,a as m,r as f,D as b,t as x,C as w,j as k}from"./index-BywlNU8M.js";const h={class:"gi-edit-table"},y=["onDblclick"],$=["onDblclick"],g=e({name:"GiEditTable",inheritAttrs:!1,__name:"GiEditTable",props:{columns:{},data:{},cellDisabled:{default:!1}},emits:["tr-dblclick","td-dblclick"],setup(e,{expose:g,emit:I}){const _=e,D=I,v=l(),C=a((()=>({tableData:_.data}))),P=t("formRef"),q=e=>e.required?"gi_column_require":"",V=e=>({...new Map([["input",{allowClear:!0,placeholder:`请输入${e.title}`,maxLength:50}],["input-number",{placeholder:`请输入${e.title}`}],["textarea",{allowClear:!1,placeholder:`请填写${e.title}`,maxLength:200}],["input-tag",{allowClear:!0,placeholder:`请输入${e.title}`}],["mention",{allowClear:!0,placeholder:`请输入${e.title}`}],["select",{allowClear:!0,placeholder:`请选择${e.title}`}],["tree-select",{allowClear:!0,placeholder:`请选择${e.title}`}],["cascader",{allowClear:!0,placeholder:`请选择${e.title}`}],["radio-group",{}],["checkbox-group",{}],["date-picker",{allowClear:!0,placeholder:"请选择日期"}],["time-picker",{allowClear:!0,placeholder:"请选择时间"}]]).get(e.type)||{},...e.props}),R=e=>["input","input-number","input-tag","mention"].includes(e.type??"")?`请输入${e.title}`:["textarea"].includes(e.type??"")?`请填写${e.title}`:`请选择${e.title}`;return g({formRef:P}),(e,l)=>{const a=r("a-form-item"),t=r("a-table-column"),g=r("a-table"),I=r("a-form");return o(),d("div",h,[i(I,{ref_key:"formRef",ref:P,"scroll-to-first-error":"",model:s(C)},{default:n((()=>[i(g,c({data:s(C).tableData,bordered:{cell:!0},pagination:!1},s(v)),{columns:n((()=>[(o(!0),d(u,null,p(_.columns,(l=>(o(),m(t,c({key:l.dataIndex,"data-index":l.dataIndex,"header-cell-class":q(l),ref_for:!0},l.columnProps,{title:l.title}),{title:n((()=>{var e,a,t;return["function"==typeof(null==(e=null==l?void 0:l.columnProps)?void 0:e.title)?(o(),m(f(null==(a=null==l?void 0:l.columnProps)?void 0:a.title),{key:0})):(o(),d(u,{key:1},[b(x((null==(t=null==l?void 0:l.columnProps)?void 0:t.title)||l.title),1)],64))]})),cell:n((({record:t,rowIndex:r,column:d})=>[i(a,c({field:`tableData[${r}].${l.dataIndex}`,"label-col-style":{display:"none"},"wrapper-col-props":{span:24},ref_for:!0},l.formItemProps,{rules:[{required:l.required||!1,message:R(l)},...l.rules||[]]}),{default:n((()=>{return[l.slotName?w(e.$slots,l.dataIndex,c({key:0,ref_for:!0},{record:t,rowIndex:r,column:d})):(o(),m(f(`a-${l.type}`),c({key:1,ref_for:!0},V(l),{modelValue:t[l.dataIndex],"onUpdate:modelValue":e=>t[l.dataIndex]=e,disabled:(a={row:t,rowIndex:r,col:l},"boolean"==typeof(null==_?void 0:_.cellDisabled)?_.cellDisabled:"function"==typeof(null==_?void 0:_.cellDisabled)&&_.cellDisabled(a))}),null,16,["modelValue","onUpdate:modelValue","disabled"]))];var a})),_:2},1040,["field","rules"])])),_:2},1040,["data-index","header-cell-class","title"])))),128))])),tr:n((({record:e,rowIndex:l})=>[k("tr",{class:"gi-edit-table-tr",onDblclick:a=>D("tr-dblclick",{record:e,rowIndex:l})},null,40,y)])),td:n((({record:e,column:l,rowIndex:a})=>[k("td",{class:"gi-edit-table-td",onDblclick:t=>D("td-dblclick",{record:e,column:l,rowIndex:a})},null,40,$)])),_:3},16,["data"])])),_:3},8,["model"])])}}});export{g as _};
