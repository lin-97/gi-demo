import{_ as e}from"./index-CGEAICMi.js";import{_ as n}from"./GiTable-Clno7yvx.js";import{_ as t}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BGAGVGD9.js";import{_ as a}from"./GiCellGender.vue_vue_type_script_setup_true_lang-Cq6eqBd6.js";import{_ as o}from"./GiForm-CokQn247.js";import{d as s,U as i,k as r,e as l,o as d,f as c,h as p,g as m,H as u,w as g,i as f,G as h,a4 as b,f6 as y,W as w,a6 as x}from"./index-Crm57DG_.js";import{u as _}from"./useTable-CUgKMnmF.js";import{u as k}from"./useDict-BqIxo1CS.js";import{g as C}from"./index-Bf7xJEPm.js";import{_ as v}from"./index-CzmXiBBY.js";import"./useBreakpoint-BLJ3k3ow.js";import"./index-DOZvvtpb.js";const I={class:"gi_table_page"},G=["src"],T=s({name:"TableCustom2",__name:"index",setup(s){const{data:T}=k({code:"status"}),D=i({}),j=r((()=>[{type:"input",label:"姓名",field:"name"},{type:"input",label:"手机",field:"phone",props:{maxLength:11}},{type:"select",label:"类型",field:"status",options:T.value},{type:"date-picker",label:"创建日期",field:"createTime"},{type:"input",label:"地址",field:"address"}])),N=[{title:"序号",width:66,align:"center",render:({rowIndex:e})=>b("span",{},e+1)},{title:"姓名",dataIndex:"name",width:120,render:({record:e})=>b(y,{onClick:()=>function(e){w.success(`点击了${e.name}`)}(e)},{default:()=>e.name})},{title:"头像",width:80,align:"center",slotName:"avatar"},{title:"手机号",dataIndex:"phone",width:150},{title:"性别",dataIndex:"gender",width:100,align:"center",slotName:"gender"},{title:"账户",dataIndex:"account",width:120},{title:"状态",width:100,slotName:"status",align:"center"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0,sortable:{sortDirections:["ascend","descend"]}},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"操作",width:200,slotName:"action",align:"center"}],{tableData:P,getTableData:z,pagination:V,search:M,loading:F}=_((e=>C(e)));const L=()=>{w.info("点击了新增")},A=()=>{w.error("点击了批量删除")},O=()=>{w.warning("点击了导入")},S=()=>new Promise((e=>setTimeout((()=>e(!0)),300))),J=()=>{x.open({title:"数据结构",content:()=>b(v,{codeJson:"\n<template>\n  <div class=\"gi_table_page\">\n    <GiForm v-model=\"form\" search :columns=\"searchColumns\"\n      :grid-item-props=\"{ span: { xs: 24, sm: 12, md: 8, lg: 8, xl: 6, xxl: 6 } }\" @search=\"search\" @reset=\"search\">\n    </GiForm>\n\n    <GiTable row-key=\"id\" :loading=\"loading\" :columns=\"columns\" :data=\"tableData\"\n      :scroll=\"{ x: '100%', y: '100%', minWidth: 1300 }\" :row-selection=\"{ type: 'checkbox', showCheckedAll: true }\"\n      :pagination=\"pagination\" :disabled-column-keys=\"['序号', 'name']\" @refresh=\"getTableData\">\n      <template #custom-title>\n        <a-button type=\"primary\" @click=\"onAdd\">\n          <template #icon><icon-plus /></template>\n          <span>新增</span>\n        </a-button>\n        <a-button type=\"primary\" status=\"danger\" @click=\"onMulDelete\">\n          <template #icon><icon-delete /></template>\n          <span>删除</span>\n        </a-button>\n        <a-button @click=\"onImport\">\n          <template #icon><icon-export /></template>\n          <span>导入</span>\n        </a-button>\n        <a-button type=\"primary\" status=\"warning\" @click=\"onViewCode\">\n          <template #icon><icon-code /></template>\n        </a-button>\n      </template>\n      <template #avatar=\"{ record }\">\n        <a-avatar :size=\"28\" shape=\"circle\">\n          <img :src=\"record.avatar\" />\n        </a-avatar>\n      </template>\n      <template #gender=\"{ record }\">\n        <GiCellGender :gender=\"record.gender\"></GiCellGender>\n      </template>\n      <template #status=\"{ record }\">\n        <GiCellStatus :status=\"record.status\"></GiCellStatus>\n      </template>\n      <template #action>\n        <a-space>\n          <a-button type=\"primary\" size=\"mini\">修改</a-button>\n          <a-button size=\"mini\">详情</a-button>\n          <a-popconfirm type=\"warning\" content=\"您确定要删除该项吗?\" @before-ok=\"onDelete\">\n            <a-button type=\"primary\" status=\"danger\" size=\"mini\">删除</a-button>\n          </a-popconfirm>\n        </a-space>\n      </template>\n    </GiTable>\n\n    <GiFooter></GiFooter>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Drawer, Link, Message, type PopconfirmInstance, type TableInstance } from '@arco-design/web-vue'\nimport CodeJson from './code-json'\nimport { useTable } from '@/hooks'\nimport { useDict } from '@/hooks/app'\nimport { type PersonItem, getPersonList } from '@/apis/person'\nimport type { ColumnItem } from '@/components/GiForm'\nimport GiCodeView from '@/components/GiCodeView/index.vue'\n\ndefineOptions({ name: 'TableCustom2' })\nconst { data: statusOptions } = useDict({ code: 'status' })\nconst form = reactive({})\n\nconst searchColumns = computed<ColumnItem[]>(() => [\n  {\n    type: 'input',\n    label: '姓名',\n    field: 'name'\n  },\n  {\n    type: 'input',\n    label: '手机',\n    field: 'phone',\n    props: {\n      maxLength: 11\n    }\n  },\n  {\n    type: 'select',\n    label: '类型',\n    field: 'status',\n    options: statusOptions.value\n  },\n  {\n    type: 'date-picker',\n    label: '创建日期',\n    field: 'createTime'\n  },\n  {\n    type: 'input',\n    label: '地址',\n    field: 'address'\n  }\n])\n\nconst columns: TableInstance['columns'] = [\n  { title: '序号', width: 66, align: 'center', render: ({ rowIndex }) => h('span', {}, rowIndex + 1) },\n  {\n    title: '姓名',\n    dataIndex: 'name',\n    width: 120,\n    render: ({ record }) =>\n      h(Link, { onClick: () => onClickName(record as PersonItem) }, { default: () => record.name })\n  },\n  { title: '头像', width: 80, align: 'center', slotName: 'avatar' },\n  { title: '手机号', dataIndex: 'phone', width: 150 },\n  { title: '性别', dataIndex: 'gender', width: 100, align: 'center', slotName: 'gender' },\n  { title: '账户', dataIndex: 'account', width: 120 },\n  { title: '状态', width: 100, slotName: 'status', align: 'center' },\n  {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    ellipsis: true,\n    tooltip: true,\n    sortable: {\n      sortDirections: ['ascend', 'descend']\n    }\n  },\n  { title: '地址', dataIndex: 'address', ellipsis: true, tooltip: true },\n  { title: '操作', width: 200, slotName: 'action', align: 'center' }\n]\n\nconst { tableData, getTableData, pagination, search, loading } = useTable((p) => getPersonList(p))\n\nfunction onClickName(record: PersonItem) {\n  Message.success(`点击了${record.name}`)\n}\n\nconst onAdd = () => {\n  Message.info('点击了新增')\n}\n\nconst onMulDelete = () => {\n  Message.error('点击了批量删除')\n}\n\nconst onImport = () => {\n  Message.warning('点击了导入')\n}\n\nconst onDelete: PopconfirmInstance['onBeforeOk'] = () => {\n  return new Promise((resolve) => setTimeout(() => resolve(true), 300))\n}\n\n// 查看代码\nconst onViewCode = () => {\n  Drawer.open({\n    title: '数据结构',\n    content: () => h(GiCodeView, { codeJson: CodeJson, type: 'vue' }),\n    width: '100%'\n  })\n}\n<\/script>\n\n<style lang=\"scss\" scoped></style>\n",type:"vue"}),width:"100%"})};return(s,i)=>{const r=o,b=l("icon-plus"),y=l("a-button"),w=l("icon-delete"),x=l("icon-export"),_=l("icon-code"),k=l("a-avatar"),C=a,v=t,T=l("a-popconfirm"),R=l("a-space"),B=n,U=e;return d(),c("div",I,[p(r,{modelValue:m(D),"onUpdate:modelValue":i[0]||(i[0]=e=>u(D)?D.value=e:null),search:"",columns:m(j),"grid-item-props":{span:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},onSearch:m(M),onReset:m(M)},null,8,["modelValue","columns","onSearch","onReset"]),p(B,{"row-key":"id",loading:m(F),columns:N,data:m(P),scroll:{x:"100%",y:"100%",minWidth:1300},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:m(V),"disabled-column-keys":["序号","name"],onRefresh:m(z)},{"custom-title":g((()=>[p(y,{type:"primary",onClick:L},{icon:g((()=>[p(b)])),default:g((()=>[i[1]||(i[1]=f("span",null,"新增",-1))])),_:1}),p(y,{type:"primary",status:"danger",onClick:A},{icon:g((()=>[p(w)])),default:g((()=>[i[2]||(i[2]=f("span",null,"删除",-1))])),_:1}),p(y,{onClick:O},{icon:g((()=>[p(x)])),default:g((()=>[i[3]||(i[3]=f("span",null,"导入",-1))])),_:1}),p(y,{type:"primary",status:"warning",onClick:J},{icon:g((()=>[p(_)])),_:1})])),avatar:g((({record:e})=>[p(k,{size:28,shape:"circle"},{default:g((()=>[f("img",{src:e.avatar},null,8,G)])),_:2},1024)])),gender:g((({record:e})=>[p(C,{gender:e.gender},null,8,["gender"])])),status:g((({record:e})=>[p(v,{status:e.status},null,8,["status"])])),action:g((()=>[p(R,null,{default:g((()=>[p(y,{type:"primary",size:"mini"},{default:g((()=>i[4]||(i[4]=[h("修改")]))),_:1}),p(y,{size:"mini"},{default:g((()=>i[5]||(i[5]=[h("详情")]))),_:1}),p(T,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:S},{default:g((()=>[p(y,{type:"primary",status:"danger",size:"mini"},{default:g((()=>i[6]||(i[6]=[h("删除")]))),_:1})])),_:1})])),_:1})])),_:1},8,["loading","data","pagination","onRefresh"]),p(U)])}}});export{T as default};
