import{d as e,u as l,c as t,I as a,f as r,o,g as d,i,w as n,m as s,h as c,F as u,k as p,a as m,r as f,D as b,t as x,C as y,j as w}from"./index-D1TUixoq.js";const k={class:"gi-edit-table"},I=["onDblclick"],_=["onDblclick"],g=e({name:"GiEditTable",inheritAttrs:!1,__name:"GiEditTable",props:{columns:{},data:{},cellDisabled:{default:!1}},emits:["tr-dblclick","td-dblclick"],setup(e,{expose:g,emit:D}){const v=e,C=D,$=l(),h=t((()=>({tableData:v.data}))),P=a("formRef"),q=e=>e.required?"gi_column_require":"",V=new Map([["input",{allowClear:!0,maxLength:20}],["textarea",{allowClear:!1,maxLength:200}],["input-tag",{allowClear:!0}],["mention",{allowClear:!0}],["select",{allowClear:!0}],["tree-select",{allowClear:!0}],["cascader",{allowClear:!0}],["date-picker",{allowClear:!0}],["time-picker",{allowClear:!0}]]),R=e=>{if(e.type)return["input","input-tag","mention"].includes(e.type)?`请输入${e.title}`:["textarea"].includes(e.type)?`请填写${e.title}`:["select","tree-select","cascader"].includes(e.type)?`请选择${e.title}`:["date-picker"].includes(e.type)?"请选择日期":["time-picker"].includes(e.type)?"请选择时间":void 0},j=e=>({...V.get(e.type)||{},placeholder:R(e),...e.props}),E=e=>["input","input-number","input-tag","mention"].includes(e.type??"")?`请输入${e.title}`:["textarea"].includes(e.type??"")?`请填写${e.title}`:`请选择${e.title}`;return g({formRef:P}),(e,l)=>{const t=r("a-form-item"),a=r("a-table-column"),g=r("a-table"),D=r("a-form");return o(),d("div",k,[i(D,{ref_key:"formRef",ref:P,"scroll-to-first-error":"",model:c(h)},{default:n((()=>[i(g,s({data:c(h).tableData,bordered:{cell:!0},pagination:!1},c($)),{columns:n((()=>[(o(!0),d(u,null,p(v.columns,(l=>(o(),m(a,s({key:l.dataIndex,"data-index":l.dataIndex,"header-cell-class":q(l),ref_for:!0},l.columnProps,{title:l.title}),{title:n((()=>{var e,t,a;return["function"==typeof(null==(e=null==l?void 0:l.columnProps)?void 0:e.title)?(o(),m(f(null==(t=null==l?void 0:l.columnProps)?void 0:t.title),{key:0})):(o(),d(u,{key:1},[b(x((null==(a=null==l?void 0:l.columnProps)?void 0:a.title)||l.title),1)],64))]})),cell:n((({record:a,rowIndex:r,column:d})=>[i(t,s({field:`tableData[${r}].${l.dataIndex}`,"label-col-style":{display:"none"},"wrapper-col-props":{span:24},ref_for:!0},l.formItemProps,{rules:[{required:l.required||!1,message:E(l)},...l.rules||[]]}),{default:n((()=>{return[l.slotName?y(e.$slots,l.dataIndex,s({key:0,ref_for:!0},{record:a,rowIndex:r,column:d})):(o(),m(f(`a-${l.type}`),s({key:1,ref_for:!0},j(l),{modelValue:a[l.dataIndex],"onUpdate:modelValue":e=>a[l.dataIndex]=e,disabled:(t={row:a,rowIndex:r,col:l},"boolean"==typeof(null==v?void 0:v.cellDisabled)?v.cellDisabled:"function"==typeof(null==v?void 0:v.cellDisabled)&&v.cellDisabled(t))}),null,16,["modelValue","onUpdate:modelValue","disabled"]))];var t})),_:2},1040,["field","rules"])])),_:2},1040,["data-index","header-cell-class","title"])))),128))])),tr:n((({record:e,rowIndex:l})=>[w("tr",{class:"gi-edit-table-tr",onDblclick:t=>C("tr-dblclick",{record:e,rowIndex:l})},null,40,I)])),td:n((({record:e,column:l,rowIndex:t})=>[w("td",{class:"gi-edit-table-td",onDblclick:a=>C("td-dblclick",{record:e,column:l,rowIndex:t})},null,40,_)])),_:3},16,["data"])])),_:3},8,["model"])])}}});export{g as _};
