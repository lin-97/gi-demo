import{_ as n}from"./index-CZj-yl1j.js";import{_ as e}from"./index-DKPnCvLQ.js";import{d as t,a7 as a,e as o,f as i,o as r,a as l,w as s,i as c,D as d,h as p,J as u}from"./index-CTftGuoI.js";import{u as m}from"./useTable-CCQoiUXk.js";import{g}from"./index-O24vEvXf.js";import{_ as w}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-S9Fsgnp4.js";const b=t({__name:"Pane2",setup(t){const b=[{title:"序号",width:68,render:({rowIndex:n})=>c("span",null,[n+1])},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",width:68,align:"center",render:({record:n})=>c(i("a-progress"),{size:"mini",status:_(n.proportion),percent:n.proportion/100},null)},{title:"状态",width:100,align:"center",render:({record:n})=>c(w,{status:n.status},null)},{title:"操作",width:180,align:"center",render:()=>c(i("a-space"),null,{default:()=>[c(i("a-button"),{type:"primary",size:"mini"},{default:()=>[c(i("icon-edit"),null,null)]}),c(i("a-button"),{size:"mini"},{default:()=>[d("详情")]}),c(i("a-popconfirm"),{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:()=>new Promise((n=>setTimeout((()=>n(!0)),300)))},{default:()=>[c(i("a-button"),{type:"primary",status:"danger",size:"mini"},{default:()=>[c(i("icon-delete"),null,null)]})]})]})}],{tableData:y,getTableData:f,pagination:h,loading:x}=m((n=>g(n)));function _(n){return n<30?"danger":n<60?"warning":"success"}a((()=>{f()}));const v=o([]),T=n=>{v.value=n},C=n=>{v.value=n?y.value.map((n=>n.id)):[]};const k=()=>{u.open({title:"查看代码",content:()=>c(e,{type:"vue",codeJson:'\n<template>\n  <GiPageLayout>\n    <a-row justify="end" align="center" wrap>\n      <a-space wrap>\n        <a-button type="primary">导出</a-button>\n        <a-button type="primary" status="warning" @click="onViewCode">\n          <template #icon><icon-code /></template>\n        </a-button>\n      </a-space>\n    </a-row>\n\n    <a-table class="gi_table" row-key="id" :loading="loading" :bordered="{ cell: true }" :columns="columns"\n      :data="tableData" :scroll="{ x: \'100%\', y: \'100%\', minWidth: 1000 }"\n      :row-selection="{ type: \'checkbox\', showCheckedAll: true }" :pagination="pagination" @select="select"\n      @select-all="selectAll">\n    </a-table>\n  </GiPageLayout>\n</template>\n\n<script lang="tsx" setup>\nimport type { TableColumnData, TableInstance } from \'@arco-design/web-vue\'\nimport { Modal } from \'@arco-design/web-vue\'\nimport Pane2Json from \'./code/pane2-json\'\nimport { useTable } from \'@/hooks\'\nimport { getPersonList } from \'@/apis/person\'\nimport GiCellStatus from \'@/components/GiCell/GiCellStatus.vue\'\n\nconst columns: TableColumnData[] = [\n  {\n    title: \'序号\',\n    width: 68,\n    render: ({ rowIndex }) => <span>{rowIndex + 1}</span>\n  },\n  {\n    title: \'姓名\',\n    dataIndex: \'name\'\n  },\n  {\n    title: \'创建时间\',\n    dataIndex: \'createTime\',\n    width: 180\n  },\n  {\n    title: \'地址\',\n    dataIndex: \'address\',\n    ellipsis: true,\n    tooltip: true\n  },\n  {\n    title: \'比例\',\n    width: 68,\n    align: \'center\',\n    render: ({ record }) => (\n      <a-progress size="mini" status={getProportionColor(record.proportion)} percent={record.proportion / 100} />\n    )\n  },\n  {\n    title: \'状态\',\n    width: 100,\n    align: \'center\',\n    render: ({ record }) => {\n      return <GiCellStatus status={record.status} />\n    }\n  },\n  {\n    title: \'操作\',\n    width: 180,\n    align: \'center\',\n    render: () => (\n      <a-space>\n        <a-button type="primary" size="mini">\n          <icon-edit></icon-edit>\n        </a-button>\n        <a-button size="mini">详情</a-button>\n        <a-popconfirm type="warning" content="您确定要删除该项吗?" onBeforeOk={() => onDelete()}>\n          <a-button type="primary" status="danger" size="mini">\n            <icon-delete />\n          </a-button>\n        </a-popconfirm>\n      </a-space>\n    )\n  }\n]\n\nconst { tableData, getTableData, pagination, loading } = useTable((p) => getPersonList(p))\n\nonActivated(() => {\n  getTableData()\n})\n\n// 比例进度条颜色\nfunction getProportionColor(proportion: number) {\n  if (proportion < 30) return \'danger\'\n  if (proportion < 60) return \'warning\'\n  return \'success\'\n}\n\n// 勾选\nconst selectRowKeys = ref<(string | number)[]>([])\nconst select: TableInstance[\'onSelect\'] = (rowKeys) => {\n  selectRowKeys.value = rowKeys\n}\n\n// 全选\nconst selectAll: TableInstance[\'onSelectAll\'] = (checked) => {\n  selectRowKeys.value = checked ? tableData.value.map((i) => i.id) : []\n}\n\n// 删除\nfunction onDelete() {\n  return new Promise((resolve) => setTimeout(() => resolve(true), 300))\n}\n\n// 查看代码\nconst onViewCode = () => {\n  Modal.open({\n    title: \'查看代码\',\n    content: () => <gi-code-view type="vue" codeJson={Pane2Json}></gi-code-view>,\n    fullscreen: true\n  })\n}\n<\/script>\n\n<style lang="scss" scoped></style>\n'},null),fullscreen:!0})};return(e,t)=>{const a=i("a-button"),o=i("icon-code"),u=i("a-space"),m=i("a-row"),g=i("a-table"),w=n;return r(),l(w,null,{default:s((()=>[c(m,{justify:"end",align:"center",wrap:""},{default:s((()=>[c(u,{wrap:""},{default:s((()=>[c(a,{type:"primary"},{default:s((()=>t[0]||(t[0]=[d("导出")]))),_:1}),c(a,{type:"primary",status:"warning",onClick:k},{icon:s((()=>[c(o)])),_:1})])),_:1})])),_:1}),c(g,{class:"gi_table","row-key":"id",loading:p(x),bordered:{cell:!0},columns:b,data:p(y),scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:p(h),onSelect:T,onSelectAll:C},null,8,["loading","data","pagination"])])),_:1})}}});export{b as _};
