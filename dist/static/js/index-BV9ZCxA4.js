import{_ as e}from"./index-WXCQdUdQ.js";import{_ as a}from"./AddMenuModal.vue_vue_type_script_setup_true_lang-VALaijJl.js";import{d as l,I as t,e as i,V as n,f as s,o,a as d,w as r,i as c,j as u,h as p,D as m,t as _,b as f,fo as y,g as k,F as g,r as h,v,a8 as w,a5 as x}from"./index-DXoE0GQH.js";import{a as z}from"./menu-CEkdyMgt.js";import{u as j}from"./useDict-B8wxbm6a.js";import{u as b}from"./useTable-BALaBzRF.js";import{_ as C}from"./index-Dh1k7Ksd.js";import"./index-CWapywub.js";import"./index-yek5gEr9.js";import"./useResetReactive-Dq6hMmPL.js";import"./useBreakpoint-KtrJLCOy.js";const R=l({name:"SystemMenu",__name:"index",setup(l){const{data:R}=j({code:"status"}),V=t("AddMenuModalRef"),M=t("tableRef"),S=i(!1),A=()=>{var e;S.value=!S.value,null==(e=M.value)||e.expandAll(S.value)},I=n({name:"",status:""}),{loading:D,tableData:J,search:U,fixed:B}=b((()=>z()),{immediate:!0}),F=()=>{I.name="",I.status="",U()},G=()=>{var e;null==(e=V.value)||e.add()},H=()=>{w.open({title:"数据结构",content:()=>x(C,{codeJson:JSON.stringify(J.value,null,"\t")}),width:560})};return(l,t)=>{const i=s("icon-plus"),n=s("a-button"),w=s("icon-list"),x=s("icon-mind-mapping"),z=s("a-tooltip"),j=s("icon-code"),b=s("a-space"),C=s("icon-search"),N=s("a-input"),O=s("a-select"),T=s("icon-refresh"),W=s("a-row"),q=s("IconDown"),E=s("IconRight"),K=s("a-table-column"),L=s("a-tag"),P=e,Q=s("a-switch"),X=s("icon-edit"),Y=s("icon-delete"),Z=s("a-popconfirm"),$=s("a-table"),ee=s("a-card");return o(),d(ee,{title:"菜单管理",class:"gi_page_card"},{default:r((()=>[c(W,{justify:"space-between"},{default:r((()=>[c(b,{wrap:""},{default:r((()=>[c(n,{type:"primary",onClick:G},{icon:r((()=>[c(i)])),default:r((()=>[t[2]||(t[2]=u("span",null,"新增",-1))])),_:1}),c(z,{content:"展开/折叠"},{default:r((()=>[c(n,{type:"primary",status:"success",onClick:A},{icon:r((()=>[p(S)?(o(),d(x,{key:1})):(o(),d(w,{key:0}))])),_:1})])),_:1}),c(z,{content:"查看数据结构"},{default:r((()=>[c(n,{type:"primary",status:"warning",onClick:H},{icon:r((()=>[c(j)])),_:1})])),_:1})])),_:1}),c(b,{wrap:""},{default:r((()=>[c(N,{modelValue:p(I).name,"onUpdate:modelValue":t[0]||(t[0]=e=>p(I).name=e),placeholder:"输入菜单名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:r((()=>[c(C)])),_:1},8,["modelValue"]),c(O,{modelValue:p(I).status,"onUpdate:modelValue":t[1]||(t[1]=e=>p(I).status=e),options:p(R),placeholder:"菜单状态",style:{width:"120px"}},null,8,["modelValue","options"]),c(n,{type:"primary",onClick:p(U)},{icon:r((()=>[c(C)])),default:r((()=>[t[3]||(t[3]=u("span",null,"搜索",-1))])),_:1},8,["onClick"]),c(n,{onClick:F},{icon:r((()=>[c(T)])),default:r((()=>[t[4]||(t[4]=u("span",null,"重置",-1))])),_:1})])),_:1})])),_:1}),c($,{ref_key:"tableRef",ref:M,class:"gi_table","row-key":"id",data:p(J),loading:p(D),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:!1,size:"mini"},{"expand-icon":r((({expanded:e})=>[e?(o(),d(q,{key:0})):(o(),d(E,{key:1}))])),columns:r((()=>[c(K,{title:"菜单名称"},{cell:r((({record:e})=>[m(_(e.title||""),1)])),_:1}),c(K,{title:"类型",width:80,align:"center"},{cell:r((({record:e})=>[1===e.type?(o(),d(L,{key:0,size:"small",color:"orangered"},{default:r((()=>t[5]||(t[5]=[m("目录")]))),_:1})):f("",!0),2===e.type?(o(),d(L,{key:1,size:"small",color:"green"},{default:r((()=>t[6]||(t[6]=[m("菜单")]))),_:1})):f("",!0),3===e.type?(o(),d(L,{key:2,size:"small"},{default:r((()=>t[7]||(t[7]=[m("按钮")]))),_:1})):f("",!0)])),_:1}),c(K,{title:"排序",width:80,align:"center"},{cell:r((({record:e})=>[m(_(e.sort||0),1)])),_:1}),c(K,{title:"路由路径","data-index":"path"}),c(K,{title:"路由名称"},{cell:r((({record:e})=>[m(_(p(y)(e.path)),1)])),_:1}),c(K,{title:"组件路径","data-index":"component"}),c(K,{title:"权限标识","data-index":"permission"}),c(K,{title:"菜单图标","data-index":"icon",width:100,align:"center"},{cell:r((({record:e})=>[e.svgIcon?(o(),d(P,{key:0,size:24,name:e.svgIcon},null,8,["name"])):(o(),k(g,{key:1},[e.icon?(o(),d(h(e.icon),{key:0,size:24})):f("",!0)],64))])),_:1}),c(K,{title:"状态",width:80,align:"center"},{cell:r((({record:e})=>[c(Q,{type:"round",size:"small","model-value":e.status,"checked-value":1,"unchecked-value":0},null,8,["model-value"])])),_:1}),c(K,{title:"是否缓存",width:100,align:"center"},{cell:r((({record:e})=>[e.keepAlive?(o(),d(L,{key:0,size:"small",color:"green"},{default:r((()=>t[8]||(t[8]=[m("是")]))),_:1})):(o(),d(L,{key:1,size:"small",color:"red"},{default:r((()=>t[9]||(t[9]=[m("否")]))),_:1}))])),_:1}),c(K,{title:"是否隐藏",width:100,align:"center"},{cell:r((({record:e})=>[e.hidden?(o(),d(L,{key:0,size:"small",color:"green"},{default:r((()=>t[10]||(t[10]=[m("是")]))),_:1})):(o(),d(L,{key:1,size:"small",color:"red"},{default:r((()=>t[11]||(t[11]=[m("否")]))),_:1}))])),_:1}),c(K,{title:"是否外链",width:100,align:"center"},{cell:r((({record:e})=>[p(v)(e.path)?(o(),d(L,{key:0,size:"small",color:"green"},{default:r((()=>t[12]||(t[12]=[m("是")]))),_:1})):(o(),d(L,{key:1,size:"small",color:"red"},{default:r((()=>t[13]||(t[13]=[m("否")]))),_:1}))])),_:1}),c(K,{title:"操作",width:200,align:"left",fixed:p(B)},{cell:r((({record:e})=>[c(b,null,{default:r((()=>[c(n,{type:"primary",size:"mini",onClick:a=>{return l=e,void(null==(t=V.value)||t.edit(l.id));var l,t}},{icon:r((()=>[c(X)])),default:r((()=>[t[14]||(t[14]=u("span",null,"编辑",-1))])),_:2},1032,["onClick"]),[1,2].includes(e.type)?(o(),d(n,{key:0,type:"primary",status:"success",size:"mini"},{icon:r((()=>[c(i)])),_:1})):f("",!0),c(Z,{type:"warning",content:"您确定要删除该项吗?"},{default:r((()=>[c(n,{type:"primary",status:"danger",size:"mini"},{icon:r((()=>[c(Y)])),default:r((()=>[t[15]||(t[15]=u("span",null,"删除",-1))])),_:1})])),_:1})])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading"]),c(a,{ref_key:"AddMenuModalRef",ref:V,menus:p(J),onSaveSuccess:p(U)},null,8,["menus","onSaveSuccess"])])),_:1})}}});export{R as default};
