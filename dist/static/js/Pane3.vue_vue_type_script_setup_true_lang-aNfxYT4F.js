import{_ as e}from"./index-DEcomuRO.js";import{_ as a}from"./GiEditTable-gvmUNQJe.js";import{a as t}from"./regexp-CZKnpGWl.js";import{d as s,e as n,c as d,I as l,V as i,f as o,g as r,o as u,j as c,w as p,G as m,i as f,h as _,J as x}from"./index-TfpzvVHF.js";import"./dept-KN3t3dXU.js";import"./role-OoDcevB-.js";import{u as I}from"./useDict-CoYV7zdy.js";const w={class:"gi_padding"},y=s({name:"FormTable",__name:"Pane3",setup(s){const{data:y}=I({code:"status"}),v=n([{name:"张三",phone:"",address:"广州市",rate:3,status:0,num:0}]),g=d((()=>JSON.stringify(v.value,null,"\t"))),h=l("GiEditTableRef"),b=d((()=>[{type:"input",title:"姓名",dataIndex:"name",required:!0},{type:"input",title:"手机号",dataIndex:"phone",required:!0,rules:[{match:t,message:"手机号格式不正确"}]},{type:"select",title:"状态",dataIndex:"status",props:{options:y.value}},{type:"rate",title:"评分",dataIndex:"rate",columnProps:{width:200}},{type:"input-number",title:"小数",dataIndex:"num",columnProps:{width:120}},{type:"textarea",title:"地址",dataIndex:"address",props:{autoSize:!0,maxLength:200,showWordLimit:!0},columnProps:{width:250}},{type:"",title:"操作",dataIndex:"action",slotName:"action",columnProps:{width:140,align:"center",fixed:"right"},formItemProps:{contentClass:"arco-table-cell-align-center"}}])),j=()=>{v.value.push({name:"",phone:"",address:"",rate:0,status:0,num:0})},k=i({rowIndex:-1,dataIndex:""}),C=e=>{k.rowIndex=e.rowIndex,k.dataIndex=e.column.dataIndex},P=()=>{var e,a,t,s;null==(a=null==(e=h.value)?void 0:e.formRef)||a.resetFields(),null==(s=null==(t=h.value)?void 0:t.formRef)||s.clearValidate()},T=async()=>{var e,a;const t=await(null==(a=null==(e=h.value)?void 0:e.formRef)?void 0:a.validate());if(t){const e=Object.values(t);x.warning(e[0].message)}else x.success("验证通过~")},G=({rowIndex:e,col:a})=>k.rowIndex!==e||k.dataIndex!==a.dataIndex;return(t,s)=>{const n=o("a-alert"),d=o("icon-plus"),l=o("a-button"),i=o("a-space"),x=o("a-row"),I=a,y=e;return u(),r("div",w,[c(n,null,{default:p((()=>s[1]||(s[1]=[m("此示例基于GiEditTable实现了双击单元格编辑")]))),_:1,__:[1]}),c(x,{class:"gi_mt",justify:"end"},{default:p((()=>[c(i,{wrap:""},{default:p((()=>[c(l,{type:"primary",onClick:j},{icon:p((()=>[c(d)])),default:p((()=>[s[2]||(s[2]=f("span",null,"新增",-1))])),_:1,__:[2]})])),_:1})])),_:1}),c(I,{ref_key:"GiEditTableRef",ref:h,scroll:{minWidth:1200},columns:_(b),data:_(v),"cell-disabled":G,onTdDblclick:C},{action:p((({rowIndex:e})=>[c(i,null,{default:p((()=>[c(l,{type:"primary",status:"success",size:"mini",disabled:!(_(k).rowIndex>=0&&_(k).rowIndex===e),onClick:s[0]||(s[0]=e=>(k.rowIndex=-1,void(k.dataIndex="")))},{default:p((()=>s[3]||(s[3]=[m(" 保存 ")]))),_:2,__:[3]},1032,["disabled"]),c(l,{type:"primary",status:"danger",size:"mini",onClick:a=>{return t=e,void v.value.splice(t,1);var t}},{default:p((()=>s[4]||(s[4]=[m(" 删除 ")]))),_:2,__:[4]},1032,["onClick"])])),_:2},1024)])),_:1},8,["columns","data"]),c(x,{justify:"end",class:"gi_mt"},{default:p((()=>[c(i,{wrap:""},{default:p((()=>[c(l,{onClick:P},{default:p((()=>s[5]||(s[5]=[m("重置")]))),_:1,__:[5]}),c(l,{type:"primary",onClick:T},{default:p((()=>s[6]||(s[6]=[m("验证并提交")]))),_:1,__:[6]})])),_:1})])),_:1}),c(y,{"code-json":_(g)},null,8,["code-json"])])}}});export{y as _};
