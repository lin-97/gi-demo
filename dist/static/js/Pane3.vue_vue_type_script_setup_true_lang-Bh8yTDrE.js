import{_ as e}from"./index-DKPnCvLQ.js";import{_ as a}from"./GiEditTable-CYH_z5az.js";import{a as t}from"./regexp-CZKnpGWl.js";import{d as s,e as n,c as d,I as l,V as i,f as o,o as r,g as u,i as c,w as m,D as p,j as f,h as x,M as I}from"./index-CTftGuoI.js";import{u as _}from"./useDict-CqZsxzDW.js";const w={class:"gi_padding"},y=s({name:"FormTable",__name:"Pane3",setup(s){const{data:y}=_({code:"status"}),v=n([{name:"张三",phone:"",address:"广州市",rate:3,status:0,num:0}]),g=d((()=>JSON.stringify(v.value,null,"\t"))),b=l("GiEditTableRef"),h=d((()=>[{type:"input",title:"姓名",dataIndex:"name",required:!0},{type:"input",title:"手机号",dataIndex:"phone",required:!0,rules:[{match:t,message:"手机号格式不正确"}]},{type:"select",title:"状态",dataIndex:"status",props:{options:y.value}},{type:"rate",title:"评分",dataIndex:"rate",columnProps:{width:200}},{type:"input-number",title:"小数",dataIndex:"num",columnProps:{width:120}},{type:"textarea",title:"地址",dataIndex:"address",props:{autoSize:!0,maxLength:200,showWordLimit:!0},columnProps:{width:250}},{type:"",title:"操作",dataIndex:"action",slotName:"action",columnProps:{width:140,align:"center",fixed:"right"},formItemProps:{contentClass:"arco-table-cell-align-center"}}])),j=()=>{v.value.push({name:"",phone:"",address:"",rate:0,status:0,num:0})},k=i({rowIndex:-1,dataIndex:""}),C=e=>{k.rowIndex=e.rowIndex,k.dataIndex=e.column.dataIndex},P=()=>{var e,a,t,s;null==(a=null==(e=b.value)?void 0:e.formRef)||a.resetFields(),null==(s=null==(t=b.value)?void 0:t.formRef)||s.clearValidate()},T=async()=>{var e,a;const t=await(null==(a=null==(e=b.value)?void 0:e.formRef)?void 0:a.validate());if(t){const e=Object.values(t);I.warning(e[0].message)}else I.success("验证通过~")},R=({rowIndex:e,col:a})=>k.rowIndex!==e||k.dataIndex!==a.dataIndex;return(t,s)=>{const n=o("a-alert"),d=o("icon-plus"),l=o("a-button"),i=o("a-space"),I=o("a-row"),_=a,y=e;return r(),u("div",w,[c(n,null,{default:m((()=>s[1]||(s[1]=[p("此示例基于GiEditTable实现了双击单元格编辑")]))),_:1}),c(I,{class:"gi_mt",justify:"end"},{default:m((()=>[c(i,{wrap:""},{default:m((()=>[c(l,{type:"primary",onClick:j},{icon:m((()=>[c(d)])),default:m((()=>[s[2]||(s[2]=f("span",null,"新增",-1))])),_:1})])),_:1})])),_:1}),c(_,{ref_key:"GiEditTableRef",ref:b,scroll:{minWidth:1200},columns:x(h),data:x(v),"cell-disabled":R,onTdDblclick:C},{action:m((({rowIndex:e})=>[c(i,null,{default:m((()=>[c(l,{type:"primary",status:"success",size:"mini",disabled:!(x(k).rowIndex>=0&&x(k).rowIndex===e),onClick:s[0]||(s[0]=e=>(k.rowIndex=-1,void(k.dataIndex="")))},{default:m((()=>s[3]||(s[3]=[p(" 保存 ")]))),_:2},1032,["disabled"]),c(l,{type:"primary",status:"danger",size:"mini",onClick:a=>{return t=e,void v.value.splice(t,1);var t}},{default:m((()=>s[4]||(s[4]=[p(" 删除 ")]))),_:2},1032,["onClick"])])),_:2},1024)])),_:1},8,["columns","data"]),c(I,{justify:"end",class:"gi_mt"},{default:m((()=>[c(i,{wrap:""},{default:m((()=>[c(l,{onClick:P},{default:m((()=>s[5]||(s[5]=[p("重置")]))),_:1}),c(l,{type:"primary",onClick:T},{default:m((()=>s[6]||(s[6]=[p("验证并提交")]))),_:1})])),_:1})])),_:1}),c(y,{"code-json":x(g)},null,8,["code-json"])])}}});export{y as _};
