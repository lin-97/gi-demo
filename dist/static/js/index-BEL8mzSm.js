import{_ as e}from"./index-Dzl5urLf.js";import{_ as n}from"./index-Bag8psYT.js";import{_ as t}from"./GiTable-ByaObDlq.js";import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BCwoOWHD.js";import{_ as o}from"./GiCellGender.vue_vue_type_script_setup_true_lang-NKpnedhO.js";import{_ as s}from"./GiForm-UGVAUyi2.js";import{d as i,V as r,c as l,f as p,a as d,o as c,w as m,j as u,h as g,D as f,Z as h,G as b,i as y,fk as _,J as w,a8 as x}from"./index-CaTNYhxh.js";import{u as k}from"./useTable-DzfxcQ6X.js";import"./dept-BtlGnOEc.js";import"./role-BwDBVdZ2.js";import{u as C}from"./useDict-DE_97KF8.js";import{b as I}from"./index-7eUj0KQm.js";import{_ as v}from"./index-DYjg1Rxd.js";import"./omit-BGEBym14.js";import"./useBreakpoint-DP2pWxtU.js";import"./index-CWsJrtG_.js";const G=["src"],T=i({name:"TableCustom2",__name:"index",setup(i){const{data:T}=C({code:"status"}),j=r({}),D=l(()=>[{type:"input",label:"姓名",field:"name"},{type:"input",label:"手机",field:"phone",props:{maxLength:11}},{type:"select",label:"类型",field:"status",props:{options:T.value}},{type:"date-picker",label:"创建日期",field:"createTime"},{type:"input",label:"地址",field:"address"}]),L=[{title:"序号",width:66,align:"center",render:({rowIndex:e})=>h("span",{},e+1)},{title:"姓名",dataIndex:"name",width:120,render:({record:e})=>h(_,{onClick:()=>function(e){w.success(`点击了${e.name}`)}(e)},{default:()=>e.name})},{title:"头像",width:80,align:"center",slotName:"avatar"},{title:"手机号",dataIndex:"phone",width:150},{title:"性别",dataIndex:"gender",width:100,align:"center",slotName:"gender"},{title:"账户",dataIndex:"account",width:120},{title:"状态",width:100,slotName:"status",align:"center"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0,sortable:{sortDirections:["ascend","descend"]}},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"操作",width:200,slotName:"action",align:"center"}],{tableData:N,getTableData:V,pagination:z,search:P,loading:A}=k(e=>I.getList(e));const M=()=>{w.info("点击了新增")},F=()=>{w.error("点击了批量删除")},S=()=>{w.warning("点击了导入")},J=()=>new Promise(e=>setTimeout(()=>e(!0),300)),O=()=>{x.open({title:"数据结构",content:()=>h(v,{codeJson:"\n<template>\n  <GiPageLayout>\n    <GiForm v-model=\"form\" search :columns=\"searchColumns\"\n      :grid-item-props=\"{ span: { xs: 24, sm: 12, md: 8, lg: 8, xl: 6, xxl: 6 } }\" @search=\"search\" @reset=\"search\">\n    </GiForm>\n\n    <GiTable row-key=\"id\" :loading=\"loading\" :columns=\"columns\" :data=\"tableData\"\n      :scroll=\"{ x: '100%', y: '100%', minWidth: 1300 }\" :row-selection=\"{ type: 'checkbox', showCheckedAll: true }\"\n      :pagination=\"pagination\" :disabled-column-keys=\"['序号', 'name']\" @refresh=\"getTableData\">\n      <template #custom-title>\n        <a-button type=\"primary\" @click=\"onAdd\">\n          <template #icon><icon-plus /></template>\n          <span>新增</span>\n        </a-button>\n        <a-button type=\"primary\" status=\"danger\" @click=\"onMulDelete\">\n          <template #icon><icon-delete /></template>\n          <span>删除</span>\n        </a-button>\n        <a-button @click=\"onImport\">\n          <template #icon><icon-export /></template>\n          <span>导入</span>\n        </a-button>\n        <a-button type=\"primary\" status=\"warning\" @click=\"onViewCode\">\n          <template #icon><icon-code /></template>\n        </a-button>\n      </template>\n      <template #avatar=\"{ record }\">\n        <a-avatar :size=\"28\" shape=\"circle\">\n          <img :src=\"record.avatar\" />\n        </a-avatar>\n      </template>\n      <template #gender=\"{ record }\">\n        <GiCellGender :gender=\"record.gender\"></GiCellGender>\n      </template>\n      <template #status=\"{ record }\">\n        <GiCellStatus :status=\"record.status\"></GiCellStatus>\n      </template>\n      <template #action>\n        <a-space>\n          <a-button type=\"primary\" size=\"mini\">修改</a-button>\n          <a-button size=\"mini\">详情</a-button>\n          <a-popconfirm type=\"warning\" content=\"您确定要删除该项吗?\" @before-ok=\"onDelete\">\n            <a-button type=\"primary\" status=\"danger\" size=\"mini\">删除</a-button>\n          </a-popconfirm>\n        </a-space>\n      </template>\n    </GiTable>\n\n    <GiFooter></GiFooter>\n  </GiPageLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport { Drawer, Link, Message, type PopconfirmInstance, type TableInstance } from '@arco-design/web-vue'\nimport CodeJson from './code-json'\nimport { useTable } from '@/hooks'\nimport { useDict } from '@/hooks/app'\nimport { baseAPI } from '@/apis/person'\nimport type * as T from '@/apis/person'\nimport type { ColumnItem } from '@/components/GiForm'\nimport GiCodeView from '@/components/GiCodeView/index.vue'\n\ndefineOptions({ name: 'TableCustom2' })\nconst { data: statusOptions } = useDict({ code: 'status' })\nconst form = reactive({})\n\nconst searchColumns = computed(() => [\n  {\n    type: 'input',\n    label: '姓名',\n    field: 'name'\n  },\n  {\n    type: 'input',\n    label: '手机',\n    field: 'phone',\n    props: {\n      maxLength: 11\n    }\n  },\n  {\n    type: 'select',\n    label: '类型',\n    field: 'status',\n    props: {\n      options: statusOptions.value\n    }\n  },\n  {\n    type: 'date-picker',\n    label: '创建日期',\n    field: 'createTime'\n  },\n  {\n    type: 'input',\n    label: '地址',\n    field: 'address'\n  }\n] as ColumnItem[])\n\nconst columns: TableInstance['columns'] = [\n  { title: '序号', width: 66, align: 'center', render: ({ rowIndex }) => h('span', {}, rowIndex + 1) },\n  {\n    title: '姓名',\n    dataIndex: 'name',\n    width: 120,\n    render: ({ record }) =>\n      h(Link, { onClick: () => onClickName(record as T.ListItem) }, { default: () => record.name })\n  },\n  { title: '头像', width: 80, align: 'center', slotName: 'avatar' },\n  { title: '手机号', dataIndex: 'phone', width: 150 },\n  { title: '性别', dataIndex: 'gender', width: 100, align: 'center', slotName: 'gender' },\n  { title: '账户', dataIndex: 'account', width: 120 },\n  { title: '状态', width: 100, slotName: 'status', align: 'center' },\n  {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    ellipsis: true,\n    tooltip: true,\n    sortable: {\n      sortDirections: ['ascend', 'descend']\n    }\n  },\n  { title: '地址', dataIndex: 'address', ellipsis: true, tooltip: true },\n  { title: '操作', width: 200, slotName: 'action', align: 'center' }\n]\n\nconst { tableData, getTableData, pagination, search, loading } = useTable((p) => baseAPI.getList(p))\n\nfunction onClickName(record: T.ListItem) {\n  Message.success(`点击了${ record.name } `)\n}\n\nconst onAdd = () => {\n  Message.info('点击了新增')\n}\n\nconst onMulDelete = () => {\n  Message.error('点击了批量删除')\n}\n\nconst onImport = () => {\n  Message.warning('点击了导入')\n}\n\nconst onDelete: PopconfirmInstance['onBeforeOk'] = () => {\n  return new Promise((resolve) => setTimeout(() => resolve(true), 300))\n}\n\n// 查看代码\nconst onViewCode = () => {\n  Drawer.open({\n    title: '数据结构',\n    content: () => h(GiCodeView, { codeJson: CodeJson, type: 'vue' }),\n    width: '100%'\n  })\n}\n<\/script>\n\n<style lang=\"scss\" scoped></style>\n\n",type:"vue"}),width:"100%"})};return(i,r)=>{const l=s,h=p("icon-plus"),_=p("a-button"),w=p("icon-delete"),x=p("icon-export"),k=p("icon-code"),C=p("a-avatar"),I=o,v=a,T=p("a-popconfirm"),B=p("a-space"),R=t,W=n,Z=e;return c(),d(Z,null,{default:m(()=>[u(l,{modelValue:g(j),"onUpdate:modelValue":r[0]||(r[0]=e=>f(j)?j.value=e:null),search:"",columns:g(D),"grid-item-props":{span:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},onSearch:g(P),onReset:g(P)},null,8,["modelValue","columns","onSearch","onReset"]),u(R,{"row-key":"id",loading:g(A),columns:L,data:g(N),scroll:{x:"100%",y:"100%",minWidth:1300},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:g(z),"disabled-column-keys":["序号","name"],onRefresh:g(V)},{"custom-title":m(()=>[u(_,{type:"primary",onClick:M},{icon:m(()=>[u(h)]),default:m(()=>[r[1]||(r[1]=y("span",null,"新增",-1))]),_:1,__:[1]}),u(_,{type:"primary",status:"danger",onClick:F},{icon:m(()=>[u(w)]),default:m(()=>[r[2]||(r[2]=y("span",null,"删除",-1))]),_:1,__:[2]}),u(_,{onClick:S},{icon:m(()=>[u(x)]),default:m(()=>[r[3]||(r[3]=y("span",null,"导入",-1))]),_:1,__:[3]}),u(_,{type:"primary",status:"warning",onClick:O},{icon:m(()=>[u(k)]),_:1})]),avatar:m(({record:e})=>[u(C,{size:28,shape:"circle"},{default:m(()=>[y("img",{src:e.avatar},null,8,G)]),_:2},1024)]),gender:m(({record:e})=>[u(I,{gender:e.gender},null,8,["gender"])]),status:m(({record:e})=>[u(v,{status:e.status},null,8,["status"])]),action:m(()=>[u(B,null,{default:m(()=>[u(_,{type:"primary",size:"mini"},{default:m(()=>r[4]||(r[4]=[b("修改",-1)])),_:1,__:[4]}),u(_,{size:"mini"},{default:m(()=>r[5]||(r[5]=[b("详情",-1)])),_:1,__:[5]}),u(T,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:J},{default:m(()=>[u(_,{type:"primary",status:"danger",size:"mini"},{default:m(()=>r[6]||(r[6]=[b("删除",-1)])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["loading","data","pagination","onRefresh"]),u(W)]),_:1})}}});export{T as default};
