import{b as e}from"./regexp-CZKnpGWl.js";import{d as a,I as l,e as t,c as s,f as d,a as o,o as i,h as u,D as m,w as r,j as n,fl as c,J as f}from"./index-TfpzvVHF.js";import{u as p}from"./useResetReactive-6TTKur6Y.js";const v=a({__name:"AddDictModal",emits:["save-success"],setup(a,{expose:v,emit:h}){const w=h,x=l("formRef"),V=t(""),b=s((()=>!!V.value)),_=s((()=>b.value?"编辑字典":"新增字典")),g=t(!1),[k,y]=p({name:"",code:"",status:1,description:""}),R={name:[{required:!0,message:"请输入字典名称"}],code:[{required:!0,message:"请输入字典编码"},{match:e,message:"格式不对！只能是英文"}],status:[{required:!0}]},j=()=>{var e;null==(e=x.value)||e.resetFields(),y()},U=async()=>{var e;try{if(await(null==(e=x.value)?void 0:e.validate()))return!1;return!!(await new Promise((e=>setTimeout((()=>e(!0)),300))))&&(f.success("模拟保存成功"),w("save-success"),!0)}catch(a){return!1}};return v({add:()=>{V.value="",g.value=!0},edit:async e=>{V.value=e,g.value=!0;const a=await c.getDetail({id:e});Object.assign(k,a.data)}}),(e,a)=>{const l=d("a-input"),t=d("a-form-item"),s=d("a-textarea"),c=d("a-switch"),f=d("a-form"),p=d("a-modal");return i(),o(p,{visible:u(g),"onUpdate:visible":a[4]||(a[4]=e=>m(g)?g.value=e:null),title:u(_),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:U,onClose:j},{default:r((()=>[n(f,{ref_key:"formRef",ref:x,model:u(k),rules:R,size:"medium","auto-label-width":""},{default:r((()=>[n(t,{label:"字典名称",field:"name"},{default:r((()=>[n(l,{modelValue:u(k).name,"onUpdate:modelValue":a[0]||(a[0]=e=>u(k).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名称","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),n(t,{label:"字典编码",field:"code"},{default:r((()=>[n(l,{modelValue:u(k).code,"onUpdate:modelValue":a[1]||(a[1]=e=>u(k).code=e),modelModifiers:{trim:!0},placeholder:"请输入字典编码","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),n(t,{label:"描述",field:"description"},{default:r((()=>[n(s,{modelValue:u(k).description,"onUpdate:modelValue":a[2]||(a[2]=e=>u(k).description=e),modelModifiers:{trim:!0},placeholder:"请填写描述","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])])),_:1}),n(t,{label:"状态",field:"status"},{default:r((()=>[n(c,{modelValue:u(k).status,"onUpdate:modelValue":a[3]||(a[3]=e=>u(k).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{v as _};
