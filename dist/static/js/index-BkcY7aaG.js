import{d as e,c as l,f as a,g as t,o as i,x as s,a as n,_ as d,e as o,a3 as r,q as u,C as c,j as p,i as _,w as m,I as f,V as v,h as g,G as y,t as h,b,D as k,J as x,a6 as w}from"./index-CaTNYhxh.js";import{u as S}from"./useBreakpoint-DP2pWxtU.js";import{_ as j}from"./GiCellGender.vue_vue_type_script_setup_true_lang-NKpnedhO.js";import{_ as C}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BCwoOWHD.js";import{_ as D}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-rfjs-raR.js";import{_ as z}from"./AddUserModal.vue_vue_type_script_setup_true_lang-DLjlVGKT.js";import{_ as U}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-B5ZtkUkw.js";import{u as V}from"./useTable-DzfxcQ6X.js";import{u as A}from"./useDept-C0psf_Jk.js";import"./role-BwDBVdZ2.js";import{u as B}from"./useDict-DE_97KF8.js";import{b as R}from"./user-CImIZ6nx.js";import"./index-CWsJrtG_.js";import"./regexp-CZKnpGWl.js";import"./useResetReactive-CVrmH7v1.js";import"./dept-BtlGnOEc.js";const G=d(e({__name:"index",props:{collapsed:{type:Boolean,default:!1},type:{default:"circle"},iconSize:{default:14},disabled:{type:Boolean,default:!1}},emits:["click","update:collapsed"],setup(e,{emit:d}){const o=e,r=d,u=l(()=>[`gi-split-button--${o.type}`,{"is-collapsed":o.collapsed,"is-disabled":o.disabled}]),c=()=>{o.disabled||(r("click"),r("update:collapsed",!o.collapsed))};return(e,l)=>{const d=a("icon-right"),o=a("icon-left");return i(),t("div",{class:s(["gi-split-button",u.value]),onClick:c},[e.collapsed?(i(),n(d,{key:0,size:e.iconSize},null,8,["size"])):(i(),n(o,{key:1,size:e.iconSize},null,8,["size"]))],2)}}}),[["__scopeId","data-v-7a296517"]]),$=d(e({__name:"GiSplitPaneFlexibleBox",props:{visible:{type:Boolean,default:!1},direction:{default:"left"}},emits:["update:visible"],setup(e,{emit:a}){const s=e,n=a,d=o(),{breakpoint:p}=S();r(()=>p.value,e=>{["xs"].includes(e)?n("update:visible",!1):n("update:visible",!0)},{immediate:!0});const _=l(()=>{const e={};return e[`margin-${s.direction}`]=!s.visible&&d.value&&d.value.clientWidth?`-${d.value.clientWidth}px`:0,e});return(e,l)=>(i(),t("div",{ref_key:"boxRef",ref:d,class:"gi-flexible-box",style:u(_.value)},[c(e.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-852c0e13"]]),I={class:"gi-split-pane"},M={class:"gi-split-pane__left"},W={class:"gi-split-pane__line"},L={class:"gi-split-pane__right"},O=d(e({name:"GiSplitPane",__name:"index",setup(e){const l=o(!0),a=()=>{l.value=!l.value};return(e,s)=>{const n=$,d=G;return i(),t("div",I,[p(n,{visible:l.value,"onUpdate:visible":s[0]||(s[0]=e=>l.value=e)},{default:m(()=>[_("div",M,[c(e.$slots,"left",{},void 0,!0)])]),_:3},8,["visible"]),_("div",W,[p(d,{collapsed:!l.value,onClick:a},null,8,["collapsed"])]),_("div",L,[c(e.$slots,"default",{},void 0,!0)])])}}}),[["__scopeId","data-v-d5ed51cf"]]),P={class:"gi_full_column"},N=e({name:"SystemUser",__name:"index",setup(e){const{data:l}=B({code:"status"}),t=f("treeRef"),s=f("AddUserModalRef"),d=f("UserDetailDrawerRef"),r=o(""),{deptList:u,getDeptList:c}=A({onSuccess:()=>{w(()=>{var e;null==(e=t.value)||e.expandAll(!0)})}});c();const S=v({status:"",username:""}),{loading:G,tableData:$,pagination:I,selectedKeys:M,search:W,select:L,selectAll:N,fixed:T,handleDelete:q}=V(e=>R.getList({...e,...S}),{immediate:!0}),E=()=>{S.status="",S.username="",W()},F=()=>{var e;null==(e=s.value)||e.add()},J=()=>M.value.length?q(()=>R.delete({ids:M.value})):x.warning("请选择用户！");return(e,o)=>{const c=a("icon-search"),f=a("a-input"),v=a("a-tree"),x=a("a-scrollbar"),w=a("icon-plus"),V=a("a-button"),A=a("icon-delete"),B=a("a-space"),K=a("a-select"),H=a("a-input-group"),Q=a("icon-refresh"),X=a("a-row"),Y=a("a-table-column"),Z=a("a-link"),ee=D,le=C,ae=j,te=a("a-tag"),ie=a("icon-edit"),se=a("a-popconfirm"),ne=a("a-table"),de=O,oe=a("a-card");return i(),n(oe,{title:"用户管理",class:"gi_page_card"},{default:m(()=>[p(de,null,{left:m(()=>[p(f,{modelValue:g(r),"onUpdate:modelValue":o[0]||(o[0]=e=>k(r)?r.value=e:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{marginBottom:"8px"}},{prefix:m(()=>[p(c)]),_:1},8,["modelValue"]),_("div",P,[p(x,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:m(()=>[p(v,{ref_key:"treeRef",ref:t,"block-node":"","show-line":"","default-expand-all":"",data:g(u),"field-names":{key:"id",title:"name",children:"children"},onSelect:g(W)},null,8,["data","onSelect"])]),_:1})])]),default:m(()=>[p(X,{justify:"space-between"},{default:m(()=>[p(B,{wrap:""},{default:m(()=>[p(V,{type:"primary",onClick:F},{icon:m(()=>[p(w)]),default:m(()=>[o[3]||(o[3]=_("span",null,"新增",-1))]),_:1,__:[3]}),p(V,{type:"primary",status:"danger",onClick:J},{icon:m(()=>[p(A)]),default:m(()=>[o[4]||(o[4]=_("span",null,"删除",-1))]),_:1,__:[4]})]),_:1}),p(B,{wrap:""},{default:m(()=>[p(H,null,{default:m(()=>[p(K,{modelValue:g(S).status,"onUpdate:modelValue":o[1]||(o[1]=e=>g(S).status=e),options:g(l),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),p(f,{modelValue:g(S).username,"onUpdate:modelValue":o[2]||(o[2]=e=>g(S).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),p(V,{type:"primary",onClick:g(W)},{icon:m(()=>[p(c)]),default:m(()=>[o[5]||(o[5]=_("span",null,"查询",-1))]),_:1,__:[5]},8,["onClick"]),p(V,{onClick:E},{icon:m(()=>[p(Q)]),default:m(()=>[o[6]||(o[6]=_("span",null,"重置",-1))]),_:1,__:[6]})]),_:1})]),_:1}),p(ne,{class:"gi_table","row-key":"id",loading:g(G),data:g($),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:g(I),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":g(M),onSelect:g(L),onSelectAll:g(N)},{columns:m(()=>[p(Y,{title:"序号",width:64},{cell:m(e=>[y(h(e.rowIndex+1),1)]),_:1}),p(Y,{title:"用户名","data-index":"username",width:120},{cell:m(({record:e})=>[p(Z,{onClick:l=>{return a=e,void(null==(t=d.value)||t.open(a.id));var a,t}},{default:m(()=>[y(h(e.username),1)]),_:2},1032,["onClick"])]),_:1}),p(Y,{title:"昵称","data-index":"nickname",width:150},{cell:m(({record:e})=>[p(ee,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])]),_:1}),p(Y,{title:"状态",width:100,align:"center"},{cell:m(({record:e})=>[p(le,{status:e.status},null,8,["status"])]),_:1}),p(Y,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:m(({record:e})=>[p(ae,{gender:e.gender},null,8,["gender"])]),_:1}),p(Y,{title:"联系方式","data-index":"phone",width:180}),p(Y,{title:"部门","data-index":"deptName",width:180}),p(Y,{title:"类型",width:100,align:"center"},{cell:m(({record:e})=>[1===e.type?(i(),n(te,{key:0,color:"red",size:"small"},{default:m(()=>o[7]||(o[7]=[y("系统内置",-1)])),_:1,__:[7]})):b("",!0),2===e.type?(i(),n(te,{key:1,color:"orange",size:"small"},{default:m(()=>o[8]||(o[8]=[y("自定义",-1)])),_:1,__:[8]})):b("",!0)]),_:1}),p(Y,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),p(Y,{title:"创建时间","data-index":"createTime",width:200}),p(Y,{title:"操作",width:180,align:"center",fixed:g(T)},{cell:m(({record:e})=>[p(B,null,{default:m(()=>[p(V,{type:"primary",size:"mini",onClick:l=>{return a=e,void(null==(t=s.value)||t.edit(a.id));var a,t}},{icon:m(()=>[p(ie)]),default:m(()=>[o[9]||(o[9]=_("span",null,"编辑",-1))]),_:2,__:[9]},1032,["onClick"]),p(se,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:l=>{return a=e,q(()=>R.delete({ids:[a.id]}),{showModal:!1});var a}},{default:m(()=>[p(V,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:m(()=>[p(A)]),default:m(()=>[o[10]||(o[10]=_("span",null,"删除",-1))]),_:2,__:[10]},1032,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])]),_:1}),p(z,{ref_key:"AddUserModalRef",ref:s,onSaveSuccess:g(W)},null,8,["onSaveSuccess"]),p(U,{ref_key:"UserDetailDrawerRef",ref:d},null,512)]),_:1})}}});export{N as default};
