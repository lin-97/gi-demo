import{_ as e}from"./index-CZj-yl1j.js";import{_ as n}from"./index-OyQMB9gC.js";import{_ as t}from"./GiTable-BwKRwr9T.js";import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-S9Fsgnp4.js";import{_ as o}from"./GiCellGender.vue_vue_type_script_setup_true_lang-CiKlMmCH.js";import{_ as s}from"./GiForm-C2SFNo8b.js";import{d as i,V as r,c as l,f as d,o as p,a as c,w as m,i as u,h as g,E as f,j as h,D as y,a5 as b,fj as w,M as x,a8 as _}from"./index-CTftGuoI.js";import{u as k}from"./useTable-CCQoiUXk.js";import{u as C}from"./useDict-CqZsxzDW.js";import{g as I}from"./index-O24vEvXf.js";import{_ as v}from"./index-DKPnCvLQ.js";import"./omit-CF_GuFPb.js";import"./useBreakpoint-CyCPt8ZW.js";import"./index-CrcSV7hi.js";const G=["src"],D=i({name:"TableCustom2",__name:"index",setup(i){const{data:D}=C({code:"status"}),T=r({}),j=l((()=>[{type:"input",label:"姓名",field:"name"},{type:"input",label:"手机",field:"phone",props:{maxLength:11}},{type:"select",label:"类型",field:"status",props:{options:D.value}},{type:"date-picker",label:"创建日期",field:"createTime"},{type:"input",label:"地址",field:"address"}])),P=[{title:"序号",width:66,align:"center",render:({rowIndex:e})=>b("span",{},e+1)},{title:"姓名",dataIndex:"name",width:120,render:({record:e})=>b(w,{onClick:()=>function(e){x.success(`点击了${e.name}`)}(e)},{default:()=>e.name})},{title:"头像",width:80,align:"center",slotName:"avatar"},{title:"手机号",dataIndex:"phone",width:150},{title:"性别",dataIndex:"gender",width:100,align:"center",slotName:"gender"},{title:"账户",dataIndex:"account",width:120},{title:"状态",width:100,slotName:"status",align:"center"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0,sortable:{sortDirections:["ascend","descend"]}},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"操作",width:200,slotName:"action",align:"center"}],{tableData:N,getTableData:V,pagination:z,search:L,loading:M}=k((e=>I(e)));const F=()=>{x.info("点击了新增")},O=()=>{x.error("点击了批量删除")},S=()=>{x.warning("点击了导入")},A=()=>new Promise((e=>setTimeout((()=>e(!0)),300))),J=()=>{_.open({title:"数据结构",content:()=>b(v,{codeJson:"\n<template>\n  <GiPageLayout>\n    <GiForm v-model=\"form\" search :columns=\"searchColumns\"\n      :grid-item-props=\"{ span: { xs: 24, sm: 12, md: 8, lg: 8, xl: 6, xxl: 6 } }\" @search=\"search\" @reset=\"search\">\n    </GiForm>\n\n    <GiTable row-key=\"id\" :loading=\"loading\" :columns=\"columns\" :data=\"tableData\"\n      :scroll=\"{ x: '100%', y: '100%', minWidth: 1300 }\" :row-selection=\"{ type: 'checkbox', showCheckedAll: true }\"\n      :pagination=\"pagination\" :disabled-column-keys=\"['序号', 'name']\" @refresh=\"getTableData\">\n      <template #custom-title>\n        <a-button type=\"primary\" @click=\"onAdd\">\n          <template #icon><icon-plus /></template>\n          <span>新增</span>\n        </a-button>\n        <a-button type=\"primary\" status=\"danger\" @click=\"onMulDelete\">\n          <template #icon><icon-delete /></template>\n          <span>删除</span>\n        </a-button>\n        <a-button @click=\"onImport\">\n          <template #icon><icon-export /></template>\n          <span>导入</span>\n        </a-button>\n        <a-button type=\"primary\" status=\"warning\" @click=\"onViewCode\">\n          <template #icon><icon-code /></template>\n        </a-button>\n      </template>\n      <template #avatar=\"{ record }\">\n        <a-avatar :size=\"28\" shape=\"circle\">\n          <img :src=\"record.avatar\" />\n        </a-avatar>\n      </template>\n      <template #gender=\"{ record }\">\n        <GiCellGender :gender=\"record.gender\"></GiCellGender>\n      </template>\n      <template #status=\"{ record }\">\n        <GiCellStatus :status=\"record.status\"></GiCellStatus>\n      </template>\n      <template #action>\n        <a-space>\n          <a-button type=\"primary\" size=\"mini\">修改</a-button>\n          <a-button size=\"mini\">详情</a-button>\n          <a-popconfirm type=\"warning\" content=\"您确定要删除该项吗?\" @before-ok=\"onDelete\">\n            <a-button type=\"primary\" status=\"danger\" size=\"mini\">删除</a-button>\n          </a-popconfirm>\n        </a-space>\n      </template>\n    </GiTable>\n\n    <GiFooter></GiFooter>\n  </GiPageLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport { Drawer, Link, Message, type PopconfirmInstance, type TableInstance } from '@arco-design/web-vue'\nimport CodeJson from './code-json'\nimport { useTable } from '@/hooks'\nimport { useDict } from '@/hooks/app'\nimport { type PersonItem, getPersonList } from '@/apis/person'\nimport type { ColumnItem } from '@/components/GiForm'\nimport GiCodeView from '@/components/GiCodeView/index.vue'\n\ndefineOptions({ name: 'TableCustom2' })\nconst { data: statusOptions } = useDict({ code: 'status' })\nconst form = reactive({})\n\nconst searchColumns = computed(() => [\n  {\n    type: 'input',\n    label: '姓名',\n    field: 'name'\n  },\n  {\n    type: 'input',\n    label: '手机',\n    field: 'phone',\n    props: {\n      maxLength: 11\n    }\n  },\n  {\n    type: 'select',\n    label: '类型',\n    field: 'status',\n    props: {\n      options: statusOptions.value\n    }\n  },\n  {\n    type: 'date-picker',\n    label: '创建日期',\n    field: 'createTime'\n  },\n  {\n    type: 'input',\n    label: '地址',\n    field: 'address'\n  }\n] as ColumnItem[])\n\nconst columns: TableInstance['columns'] = [\n  { title: '序号', width: 66, align: 'center', render: ({ rowIndex }) => h('span', {}, rowIndex + 1) },\n  {\n    title: '姓名',\n    dataIndex: 'name',\n    width: 120,\n    render: ({ record }) =>\n      h(Link, { onClick: () => onClickName(record as PersonItem) }, { default: () => record.name })\n  },\n  { title: '头像', width: 80, align: 'center', slotName: 'avatar' },\n  { title: '手机号', dataIndex: 'phone', width: 150 },\n  { title: '性别', dataIndex: 'gender', width: 100, align: 'center', slotName: 'gender' },\n  { title: '账户', dataIndex: 'account', width: 120 },\n  { title: '状态', width: 100, slotName: 'status', align: 'center' },\n  {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    ellipsis: true,\n    tooltip: true,\n    sortable: {\n      sortDirections: ['ascend', 'descend']\n    }\n  },\n  { title: '地址', dataIndex: 'address', ellipsis: true, tooltip: true },\n  { title: '操作', width: 200, slotName: 'action', align: 'center' }\n]\n\nconst { tableData, getTableData, pagination, search, loading } = useTable((p) => getPersonList(p))\n\nfunction onClickName(record: PersonItem) {\n  Message.success(`点击了${record.name}`)\n}\n\nconst onAdd = () => {\n  Message.info('点击了新增')\n}\n\nconst onMulDelete = () => {\n  Message.error('点击了批量删除')\n}\n\nconst onImport = () => {\n  Message.warning('点击了导入')\n}\n\nconst onDelete: PopconfirmInstance['onBeforeOk'] = () => {\n  return new Promise((resolve) => setTimeout(() => resolve(true), 300))\n}\n\n// 查看代码\nconst onViewCode = () => {\n  Drawer.open({\n    title: '数据结构',\n    content: () => h(GiCodeView, { codeJson: CodeJson, type: 'vue' }),\n    width: '100%'\n  })\n}\n<\/script>\n\n<style lang=\"scss\" scoped></style>\n",type:"vue"}),width:"100%"})};return(i,r)=>{const l=s,b=d("icon-plus"),w=d("a-button"),x=d("icon-delete"),_=d("icon-export"),k=d("icon-code"),C=d("a-avatar"),I=o,v=a,D=d("a-popconfirm"),R=d("a-space"),B=t,E=n,W=e;return p(),c(W,null,{default:m((()=>[u(l,{modelValue:g(T),"onUpdate:modelValue":r[0]||(r[0]=e=>f(T)?T.value=e:null),search:"",columns:g(j),"grid-item-props":{span:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},onSearch:g(L),onReset:g(L)},null,8,["modelValue","columns","onSearch","onReset"]),u(B,{"row-key":"id",loading:g(M),columns:P,data:g(N),scroll:{x:"100%",y:"100%",minWidth:1300},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:g(z),"disabled-column-keys":["序号","name"],onRefresh:g(V)},{"custom-title":m((()=>[u(w,{type:"primary",onClick:F},{icon:m((()=>[u(b)])),default:m((()=>[r[1]||(r[1]=h("span",null,"新增",-1))])),_:1}),u(w,{type:"primary",status:"danger",onClick:O},{icon:m((()=>[u(x)])),default:m((()=>[r[2]||(r[2]=h("span",null,"删除",-1))])),_:1}),u(w,{onClick:S},{icon:m((()=>[u(_)])),default:m((()=>[r[3]||(r[3]=h("span",null,"导入",-1))])),_:1}),u(w,{type:"primary",status:"warning",onClick:J},{icon:m((()=>[u(k)])),_:1})])),avatar:m((({record:e})=>[u(C,{size:28,shape:"circle"},{default:m((()=>[h("img",{src:e.avatar},null,8,G)])),_:2},1024)])),gender:m((({record:e})=>[u(I,{gender:e.gender},null,8,["gender"])])),status:m((({record:e})=>[u(v,{status:e.status},null,8,["status"])])),action:m((()=>[u(R,null,{default:m((()=>[u(w,{type:"primary",size:"mini"},{default:m((()=>r[4]||(r[4]=[y("修改")]))),_:1}),u(w,{size:"mini"},{default:m((()=>r[5]||(r[5]=[y("详情")]))),_:1}),u(D,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:A},{default:m((()=>[u(w,{type:"primary",status:"danger",size:"mini"},{default:m((()=>r[6]||(r[6]=[y("删除")]))),_:1})])),_:1})])),_:1})])),_:1},8,["loading","data","pagination","onRefresh"]),u(E)])),_:1})}}});export{D as default};
