import{d as e,c as l,f as a,o as t,g as i,a as s,x as n,_ as d,e as o,a0 as r,C as u,s as c,i as p,w as _,j as m,H as f,S as v,h as g,E as y,D as x,t as h,b as k,M as b,a5 as w}from"./index-BSX7bYGM.js";import{u as S}from"./useBreakpoint-CcjjJlap.js";import{_ as j}from"./GiCellGender.vue_vue_type_script_setup_true_lang-CNJkT4d9.js";import{_ as C}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-CvKQxN1l.js";import{_ as z}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-C8kpyxzU.js";import{_ as D}from"./AddUserModal.vue_vue_type_script_setup_true_lang-CatzWEji.js";import{_ as U}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-YAGeV1_A.js";import{u as A}from"./useTable-BxLsCQaB.js";import{u as R}from"./useDept-CMQWIVL9.js";import{a as V}from"./user-BkYzp73G.js";import{u as B}from"./useDict-BX-MLngn.js";import"./index-C0BHoBNC.js";import"./regexp-CZKnpGWl.js";import"./role-9AGI6mtD.js";import"./useResetReactive-DK_iffuF.js";const G=d(e({__name:"index",props:{collapsed:{type:Boolean,default:!1},type:{default:"circle"},iconSize:{default:14},disabled:{type:Boolean,default:!1}},emits:["click","update:collapsed"],setup(e,{emit:d}){const o=e,r=d,u=l((()=>[`gi-split-button--${o.type}`,{"is-collapsed":o.collapsed,"is-disabled":o.disabled}])),c=()=>{o.disabled||(r("click"),r("update:collapsed",!o.collapsed))};return(e,l)=>{const d=a("icon-right"),o=a("icon-left");return t(),i("div",{class:n(["gi-split-button",u.value]),onClick:c},[e.collapsed?(t(),s(d,{key:0,size:e.iconSize},null,8,["size"])):(t(),s(o,{key:1,size:e.iconSize},null,8,["size"]))],2)}}}),[["__scopeId","data-v-7a296517"]]),$=d(e({__name:"GiSplitPaneFlexibleBox",props:{visible:{type:Boolean,default:!1},direction:{default:"left"}},emits:["update:visible"],setup(e,{emit:a}){const s=e,n=a,d=o(),{breakpoint:p}=S();r((()=>p.value),(e=>{["xs"].includes(e)?n("update:visible",!1):n("update:visible",!0)}),{immediate:!0});const _=l((()=>{const e={};return e[`margin-${s.direction}`]=!s.visible&&d.value&&d.value.clientWidth?`-${d.value.clientWidth}px`:0,e}));return(e,l)=>(t(),i("div",{ref_key:"boxRef",ref:d,class:"gi-flexible-box",style:c(_.value)},[u(e.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-852c0e13"]]),I={class:"gi-split-pane"},M={class:"gi-split-pane__left"},W={class:"gi-split-pane__line"},L={class:"gi-split-pane__right"},K=d(e({name:"GiSplitPane",__name:"index",setup(e){const l=o(!0),a=()=>{l.value=!l.value};return(e,s)=>{const n=$,d=G;return t(),i("div",I,[p(n,{visible:l.value,"onUpdate:visible":s[0]||(s[0]=e=>l.value=e)},{default:_((()=>[m("div",M,[u(e.$slots,"left",{},void 0,!0)])])),_:3},8,["visible"]),m("div",W,[p(d,{collapsed:!l.value,onClick:a},null,8,["collapsed"])]),m("div",L,[u(e.$slots,"default",{},void 0,!0)])])}}}),[["__scopeId","data-v-d5ed51cf"]]),N={class:"gi_page user-manage"},P=e({name:"SystemUser",__name:"index",setup(e){const{data:l}=B({code:"status"}),n=f("treeRef"),d=f("AddUserModalRef"),r=f("UserDetailDrawerRef"),u=o(""),{deptList:c,getDeptList:S}=R({onSuccess:()=>{w((()=>{var e;null==(e=n.value)||e.expandAll(!0)}))}});S();const G=v({status:"",username:""}),{loading:$,tableData:I,pagination:M,selectedKeys:W,search:L,select:P,selectAll:T,fixed:E}=A((e=>V(e)),{immediate:!0}),F=()=>{G.status="",G.username="",L()},H=()=>{if(!W.value.length)return b.warning("请选择用户！")},Z=()=>{var e;null==(e=d.value)||e.add()};return(e,o)=>{const f=a("icon-search"),v=a("a-input"),b=a("a-tree"),w=a("icon-plus"),S=a("a-button"),A=a("icon-delete"),R=a("a-space"),V=a("a-select"),B=a("a-input-group"),q=a("icon-refresh"),J=a("a-row"),O=a("a-table-column"),Q=a("a-link"),X=z,Y=C,ee=j,le=a("a-tag"),ae=a("icon-edit"),te=a("a-popconfirm"),ie=a("a-table"),se=K,ne=a("a-card");return t(),i("div",N,[p(ne,{title:"用户管理"},{default:_((()=>[p(se,null,{left:_((()=>[p(v,{modelValue:g(u),"onUpdate:modelValue":o[0]||(o[0]=e=>y(u)?u.value=e:null),placeholder:"输入部门名称搜索","allow-clear":""},{prefix:_((()=>[p(f)])),_:1},8,["modelValue"]),p(b,{ref_key:"treeRef",ref:n,"block-node":"","show-line":"","default-expand-all":"",data:g(c),"field-names":{key:"id",title:"name",children:"children"},onSelect:g(L)},null,8,["data","onSelect"])])),default:_((()=>[p(J,{justify:"space-between"},{default:_((()=>[p(R,{wrap:""},{default:_((()=>[p(S,{type:"primary",onClick:Z},{icon:_((()=>[p(w)])),default:_((()=>[o[3]||(o[3]=m("span",null,"新增",-1))])),_:1}),p(S,{type:"primary",status:"danger",onClick:H},{icon:_((()=>[p(A)])),default:_((()=>[o[4]||(o[4]=m("span",null,"删除",-1))])),_:1})])),_:1}),p(R,{wrap:""},{default:_((()=>[p(B,null,{default:_((()=>[p(V,{modelValue:g(G).status,"onUpdate:modelValue":o[1]||(o[1]=e=>g(G).status=e),options:g(l),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),p(v,{modelValue:g(G).username,"onUpdate:modelValue":o[2]||(o[2]=e=>g(G).username=e),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])])),_:1}),p(S,{type:"primary",onClick:g(L)},{icon:_((()=>[p(f)])),default:_((()=>[o[5]||(o[5]=m("span",null,"查询",-1))])),_:1},8,["onClick"]),p(S,{onClick:F},{icon:_((()=>[p(q)])),default:_((()=>[o[6]||(o[6]=m("span",null,"重置",-1))])),_:1})])),_:1})])),_:1}),p(ie,{"row-key":"id",loading:g($),data:g(I),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:g(M),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":g(W),onSelect:g(P),onSelectAll:g(T)},{columns:_((()=>[p(O,{title:"序号",width:64},{cell:_((e=>[x(h(e.rowIndex+1),1)])),_:1}),p(O,{title:"用户名","data-index":"username",width:120},{cell:_((({record:e})=>[p(Q,{onClick:l=>{return a=e,void(null==(t=r.value)||t.open(a.id));var a,t}},{default:_((()=>[x(h(e.username),1)])),_:2},1032,["onClick"])])),_:1}),p(O,{title:"昵称","data-index":"nickname",width:150},{cell:_((({record:e})=>[p(X,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),p(O,{title:"状态",width:100,align:"center"},{cell:_((({record:e})=>[p(Y,{status:e.status},null,8,["status"])])),_:1}),p(O,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:_((({record:e})=>[p(ee,{gender:e.gender},null,8,["gender"])])),_:1}),p(O,{title:"联系方式","data-index":"phone",width:180}),p(O,{title:"部门","data-index":"deptName",width:180}),p(O,{title:"类型",width:100,align:"center"},{cell:_((({record:e})=>[1===e.type?(t(),s(le,{key:0,color:"red",size:"small"},{default:_((()=>o[7]||(o[7]=[x("系统内置")]))),_:1})):k("",!0),2===e.type?(t(),s(le,{key:1,color:"orange",size:"small"},{default:_((()=>o[8]||(o[8]=[x("自定义")]))),_:1})):k("",!0)])),_:1}),p(O,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),p(O,{title:"创建时间","data-index":"createTime",width:200}),p(O,{title:"操作",width:180,align:"center",fixed:g(E)},{cell:_((({record:e})=>[p(R,null,{default:_((()=>[p(S,{type:"primary",size:"mini",onClick:l=>{return a=e,void(null==(t=d.value)||t.edit(a.id));var a,t}},{icon:_((()=>[p(ae)])),default:_((()=>[o[9]||(o[9]=m("span",null,"编辑",-1))])),_:2},1032,["onClick"]),p(te,{type:"warning",content:"确定删除该用户吗?"},{default:_((()=>[p(S,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:_((()=>[p(A)])),default:_((()=>[o[10]||(o[10]=m("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1024)])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])])),_:1})])),_:1}),p(D,{ref_key:"AddUserModalRef",ref:d,onSaveSuccess:g(L)},null,8,["onSaveSuccess"]),p(U,{ref_key:"UserDetailDrawerRef",ref:r},null,512)])}}});export{P as default};
