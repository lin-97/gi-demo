import{_ as Z}from"./GiSvgIcon.9d08d65a.js";import{G as ee}from"./GiTitle.1ba9f8ce.js";import"./index.463d26de.js";import{u as te}from"./usePagination.4724fe46.js";import"./viewer.c9822194.js";import{d as N,h as ae,r as _,i as a,o as l,m as d,w as t,b as e,j as x,z as oe,a as m,k as b,eA as ne,c as k,Q as L,v as ue,I as S,p as le,e as se,_ as ie}from"./index.cffeb3a8.js";import{g as re,a as ce}from"./index.63f937d9.js";import{_ as de}from"./avatar.b315abf9.js";import{u as _e}from"./useArea.a1c854e7.js";import{b as me}from"./index.f12ca541.js";const pe=m("img",{src:de},null,-1),fe=b("\u7537"),ge=b("\u5973"),ve=N({__name:"AddUserModal",props:{modelValue:{type:Boolean,default:!1},treeData:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(p,{emit:f}){const D=p,{getAreaTreeData:V}=_e(),g=me(D,"modelValue",f),s=ae({userName:"",sex:0,address:""}),v=_([]);return v.value=V(),(F,i)=>{const E=a("a-input"),y=a("a-form-item"),z=a("IconCamera"),A=a("a-avatar"),C=a("a-radio"),I=a("a-radio-group"),h=a("a-cascader"),n=a("a-form"),u=a("a-modal");return l(),d(u,{visible:x(g),"onUpdate:visible":i[3]||(i[3]=r=>oe(g)?g.value=r:null),title:"\u65B0\u589E\u7528\u6237"},{default:t(()=>[e(n,{ref:"formRef",model:s,labelCol:{span:4},"auto-label-width":""},{default:t(()=>[e(y,{label:"\u59D3\u540D",field:"userName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:2,max:4,message:"\u957F\u5EA6\u5728 2 - 4\u4E2A\u5B57\u7B26",trigger:"blur"}],"validate-trigger":["change","input"]},{default:t(()=>[e(E,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u59D3\u540D",modelValue:s.userName,"onUpdate:modelValue":i[0]||(i[0]=r=>s.userName=r)},null,8,["modelValue"])]),_:1}),e(y,{label:"\u5934\u50CF",field:"avatar"},{default:t(()=>[e(A,{size:60,"trigger-icon-style":{color:"#3491FA"}},{"trigger-icon":t(()=>[e(z)]),default:t(()=>[pe]),_:1})]),_:1}),e(y,{label:"\u6027\u522B",field:"sex"},{default:t(()=>[e(I,{modelValue:s.sex,"onUpdate:modelValue":i[1]||(i[1]=r=>s.sex=r)},{default:t(()=>[e(C,{value:1},{default:t(()=>[fe]),_:1}),e(C,{value:0},{default:t(()=>[ge]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"\u5730\u5740",field:"address"},{default:t(()=>[e(h,{modelValue:s.address,"onUpdate:modelValue":i[2]||(i[2]=r=>s.address=r),options:v.value,"field-names":{value:"code",label:"label"},placeholder:"\u8BF7\u9009\u62E9\u7701\u5E02\u533A"},null,8,["modelValue","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}}),j=p=>(le("data-v-7fce9ee4"),p=p(),se(),p),ye={class:"user-manage"},he={class:"left"},xe={class:"content"},be={class:"tree-box"},we={class:"right"},Be=j(()=>m("span",null,"\u65B0\u589E\u7528\u6237",-1)),De=b("\u6B63\u5E38"),Ve=b("\u7981\u7528"),Ce=j(()=>m("span",null,"\u641C\u7D22",-1)),ke={class:"table-box"},Fe={key:0},Ee={key:1},ze=b("\u6B63\u5E38"),Ae=b("\u7981\u7528"),Se=N({name:"UserManage"}),Ne=N({...Se,setup(p){const f=_(!1),D=_([]),V=_(""),g=_(null),s=_(!1),v=_(!1),F=_([]),{current:i,pageSize:E,total:y,changeCurrent:z,changePageSize:A,setTotal:C}=te(()=>{h()});(async()=>{try{f.value=!0;const n=await re();n.success&&(D.value=n.data.list,setTimeout(()=>{f.value=!1},200),ue(()=>{var u;(u=g.value)==null||u.expandNode(n.data.list[0].id)}))}catch(n){return f.value=!1,n}})();const h=async()=>{try{v.value=!0;const n=await ce();n.success&&(F.value=n.data.list,C(n.data.total))}catch(n){return n}finally{v.value=!1}};return h(),(n,u)=>{const r=ee,T=a("icon-search"),U=a("a-input"),q=a("IconDown"),w=Z,Q=a("a-tree"),W=a("icon-plus"),B=a("a-button"),P=a("a-option"),H=a("a-select"),J=a("a-input-group"),$=a("a-space"),M=a("icon-delete"),K=a("a-row"),c=a("a-table-column"),G=a("a-tag"),O=a("icon-edit"),X=a("a-popconfirm"),Y=a("a-table"),R=ne("loading");return l(),k("div",ye,[m("section",he,[e(r,{title:"\u90E8\u95E8\u5217\u8868"}),m("div",xe,[e(U,{modelValue:V.value,"onUpdate:modelValue":u[0]||(u[0]=o=>V.value=o),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD","allow-clear":"",style:{"margin-bottom":"10px"}},{prefix:t(()=>[e(T)]),_:1},8,["modelValue"]),L((l(),k("div",be,[e(Q,{ref_key:"treeRef",ref:g,"block-node":"","default-expand-all":"",data:D.value,"field-names":{key:"id",title:"name",children:"children"},onSelect:h},{"switcher-icon":t(()=>[e(q)]),icon:t(({node:o})=>[o.level==1?(l(),d(w,{key:0,name:"com-dept",size:14})):S("",!0),o.level==2?(l(),d(w,{key:1,name:"com-sub-dept",size:12})):S("",!0),o.level==3?(l(),d(w,{key:2,name:"com-group",size:12})):S("",!0)]),_:1},8,["data"])])),[[R,f.value]])])]),m("section",we,[e(r,{title:"\u7528\u6237\u5217\u8868"}),e(K,{justify:"space-between",class:"head"},{default:t(()=>[e($,null,{default:t(()=>[e(B,{type:"primary",onClick:u[1]||(u[1]=o=>s.value=!0)},{icon:t(()=>[e(W)]),default:t(()=>[Be]),_:1}),e(J,null,{default:t(()=>[e(H,{placeholder:"\u90E8\u95E8\u72B6\u6001","allow-clear":"",style:{width:"120px"}},{default:t(()=>[e(P,{value:1},{default:t(()=>[De]),_:1}),e(P,{value:0},{default:t(()=>[Ve]),_:1})]),_:1}),e(U,{placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD...","allow-clear":"",style:{width:"250px"}}),e(B,{type:"primary",onClick:h},{icon:t(()=>[e(T)]),default:t(()=>[Ce]),_:1})]),_:1})]),_:1}),e(B,{type:"primary",status:"danger"},{icon:t(()=>[e(M)]),_:1})]),_:1}),m("section",ke,[L((l(),d(Y,{"row-key":"id",data:F.value,scroll:{x:"100%",y:"100%",minWidth:900},pagination:{showPageSize:!0,total:x(y),current:x(i),pageSize:x(E)},onPageChange:x(z),onPageSizeChange:x(A)},{columns:t(()=>[e(c,{title:"\u7528\u6237\u7F16\u53F7","data-index":"userNo"}),e(c,{title:"\u7528\u6237\u540D","data-index":"userName"}),e(c,{title:"\u7528\u6237\u6635\u79F0","data-index":"nickName"}),e(c,{title:"\u6027\u522B","data-index":"sex"},{cell:t(({record:o})=>[o.sex===1?(l(),k("span",Fe,"\u7537")):(l(),k("span",Ee,"\u5973"))]),_:1}),e(c,{title:"\u5934\u50CF","data-index":"avatar"},{cell:t(({record:o})=>[o.sex===1?(l(),d(w,{key:0,name:"avatar-man",size:40})):(l(),d(w,{key:1,name:"avatar-woman",size:40}))]),_:1}),e(c,{title:"\u5730\u5740","data-index":"address"}),e(c,{title:"\u72B6\u6001",width:100},{cell:t(({record:o})=>[o.status==1?(l(),d(G,{key:0,color:"green"},{default:t(()=>[ze]),_:1})):(l(),d(G,{key:1,color:"red"},{default:t(()=>[Ae]),_:1}))]),_:1}),e(c,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"}),e(c,{title:"\u64CD\u4F5C",width:100,align:"center"},{cell:t(({record:o})=>[e($,null,{default:t(()=>[e(B,{type:"primary",size:"mini",onClick:u[2]||(u[2]=Ie=>s.value=!0)},{icon:t(()=>[e(O)]),_:1}),e(X,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(B,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(M)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["data","pagination","onPageChange","onPageSizeChange"])),[[R,v.value]])])]),e(ve,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=o=>s.value=o)},null,8,["modelValue"])])}}});const Qe=ie(Ne,[["__scopeId","data-v-7fce9ee4"]]);export{Qe as default};
