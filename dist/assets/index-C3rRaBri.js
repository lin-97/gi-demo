import{_ as F}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-Dsi2Injn.js";import{b as k}from"./dept-Dmun1cmX.js";import"./index-COakebNL.js";import{u as H}from"./useTable-B8Y9iGJZ.js";import{u as J}from"./useDict-COD8ChSZ.js";import"./role-C-C9HNfF.js";import{_ as Q}from"./AddDeptModal.vue_vue_type_script_setup_true_lang-D-yA6c3i.js";import{a9 as X}from"./arco-BuJQNAYO.js";import{e as Y,ac as S,r as Z,h as o,j as p,k as u,l as t,t as e,a1 as a,m as c,p as ee,C as te}from"./vue-_iYK9Zi6.js";import"./useBreakpoint-DAFsyWcD.js";import"./index-BPv1vC5v.js";import"./useResetReactive-Bbo38ME6.js";import"./useDept-CImWn8Ci.js";const ye=Y({name:"SystemDept",__name:"index",setup(ne){const{data:A}=J({code:"status"}),m=S("AddDeptModalRef"),w=S("tableRef"),s=Z({name:"",status:""}),{loading:R,tableData:V,selectedKeys:_,search:f,select:h,selectAll:I,fixed:M,handleDelete:g}=H(()=>k.getList({...s}),{immediate:!0,onSuccess:()=>{te(()=>{w.value?.expandAll(!0)})}}),B=()=>{s.name="",s.status="",f()},x=()=>{m.value?.add()},$=r=>{m.value?.edit(r.id)},T=r=>g(()=>k.delete({ids:[r.id]}),{showModal:!1}),z=()=>_.value.length?g(()=>k.delete({ids:_.value})):X.warning("请选择部门");return(r,n)=>{const b=o("icon-search"),N=o("a-input"),L=o("a-select"),i=o("a-button"),O=o("icon-refresh"),y=o("a-space"),C=o("icon-plus"),v=o("icon-delete"),P=o("a-row"),U=o("IconDown"),j=o("IconRight"),d=o("a-table-column"),q=F,E=o("icon-edit"),G=o("a-popconfirm"),K=o("a-table"),W=o("a-card");return u(),p(W,{title:"部门管理",class:"gi_page_card"},{default:t(()=>[e(y,{wrap:""},{default:t(()=>[e(N,{modelValue:a(s).name,"onUpdate:modelValue":n[0]||(n[0]=l=>a(s).name=l),placeholder:"输入部门名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:t(()=>[e(b)]),_:1},8,["modelValue"]),e(L,{modelValue:a(s).status,"onUpdate:modelValue":n[1]||(n[1]=l=>a(s).status=l),options:a(A),placeholder:"部门状态",style:{width:"120px"}},null,8,["modelValue","options"]),e(i,{type:"primary",onClick:a(f)},{icon:t(()=>[e(b)]),default:t(()=>[n[3]||(n[3]=c("span",null,"搜索",-1))]),_:1,__:[3]},8,["onClick"]),e(i,{onClick:B},{icon:t(()=>[e(O)]),default:t(()=>[n[4]||(n[4]=c("span",null,"重置",-1))]),_:1,__:[4]})]),_:1}),e(P,null,{default:t(()=>[e(y,{wrap:""},{default:t(()=>[e(i,{type:"primary",onClick:x},{icon:t(()=>[e(C)]),default:t(()=>[n[5]||(n[5]=c("span",null,"新增",-1))]),_:1,__:[5]}),e(i,{type:"primary",status:"danger",onClick:z},{icon:t(()=>[e(v)]),default:t(()=>[n[6]||(n[6]=c("span",null,"删除",-1))]),_:1,__:[6]})]),_:1})]),_:1}),e(K,{ref_key:"tableRef",ref:w,class:"gi_table","row-key":"id",bordered:{cell:!0},data:a(V),loading:a(R),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:!1,"row-selection":{type:"checkbox",showCheckedAll:!1},"selected-keys":a(_),onSelect:a(h),onSelectAll:a(I)},{"expand-icon":t(({expanded:l})=>[l?(u(),p(U,{key:0})):(u(),p(j,{key:1}))]),columns:t(()=>[e(d,{title:"部门名称","data-index":"name",width:160}),e(d,{title:"排序","data-index":"sort",width:100,align:"center"}),e(d,{title:"状态",width:100,align:"center"},{cell:t(({record:l})=>[e(q,{status:l.status},null,8,["status"])]),_:1}),e(d,{title:"描述","data-index":"description",width:250,ellipsis:!0,tooltip:!0}),e(d,{title:"创建时间","data-index":"createTime",width:200}),e(d,{title:"操作",width:200,align:"center",fixed:a(M)},{cell:t(({record:l})=>[e(y,null,{default:t(()=>[e(i,{type:"primary",size:"mini",onClick:D=>$(l)},{icon:t(()=>[e(E)]),default:t(()=>[n[7]||(n[7]=c("span",null,"编辑",-1))]),_:2,__:[7]},1032,["onClick"]),l.parentId?(u(),p(i,{key:0,type:"primary",status:"success",size:"mini",onClick:n[2]||(n[2]=D=>x())},{icon:t(()=>[e(C)]),default:t(()=>[n[8]||(n[8]=c("span",null,"新增",-1))]),_:1,__:[8]})):ee("",!0),e(G,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:D=>T(l)},{default:t(()=>[e(i,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(v)]),default:t(()=>[n[9]||(n[9]=c("span",null,"删除",-1))]),_:1,__:[9]})]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","selected-keys","onSelect","onSelectAll"]),e(Q,{ref_key:"AddDeptModalRef",ref:m,onSaveSuccess:a(f)},null,8,["onSaveSuccess"])]),_:1})}}});export{ye as default};
