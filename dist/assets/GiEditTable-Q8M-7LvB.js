import{e as N,a9 as S,c as A,ac as L,h as i,n as d,k as s,t as u,a1 as c,l,E as o,m as y,F as k,P as F,j as p,u as G,O as g,y as M,z as O}from"./vue-_iYK9Zi6.js";import{_ as U}from"./index-KLtyvs0j.js";const j={class:"gi-edit-table"},z=["onDblclick"],H=["onDblclick"],J=N({name:"GiEditTable",inheritAttrs:!1,__name:"GiEditTable",props:{columns:{},data:{},cellDisabled:{default:!1}},emits:["tr-dblclick","td-dblclick"],setup(C,{expose:x,emit:D}){const r=C,f=D,h=S(),m=A(()=>({tableData:r.data})),_=L("formRef"),$=e=>e.required?"gi_column_require":"",w=new Map([["input",{allowClear:!0,maxLength:20}],["textarea",{allowClear:!1,maxLength:200}],["input-tag",{allowClear:!0}],["mention",{allowClear:!0}],["select",{allowClear:!0}],["tree-select",{allowClear:!0}],["cascader",{allowClear:!0}],["date-picker",{allowClear:!0}],["time-picker",{allowClear:!0}]]),P=e=>{if(e.type){if(["input","input-tag","mention"].includes(e.type))return`请输入${e.title}`;if(["textarea"].includes(e.type))return`请填写${e.title}`;if(["select","tree-select","cascader"].includes(e.type))return`请选择${e.title}`;if(["date-picker"].includes(e.type))return"请选择日期";if(["time-picker"].includes(e.type))return"请选择时间"}},v=e=>({...w.get(e.type)||{},placeholder:P(e),...e.props}),I=e=>["input","input-number","input-tag","mention"].includes(e.type??"")?`请输入${e.title}`:["textarea"].includes(e.type??"")?`请填写${e.title}`:`请选择${e.title}`,V=e=>typeof r?.cellDisabled=="boolean"?r.cellDisabled:typeof r?.cellDisabled=="function"?r.cellDisabled(e):!1;return x({formRef:_}),(e,K)=>{const R=i("a-form-item"),T=i("a-table-column"),B=i("a-table"),q=i("a-form");return s(),d("div",j,[u(q,{ref_key:"formRef",ref:_,"scroll-to-first-error":"",model:c(m)},{default:l(()=>[u(B,o({data:c(m).tableData,bordered:{cell:!0},pagination:!1},c(h)),{columns:l(()=>[(s(!0),d(k,null,F(r.columns,t=>(s(),p(T,o({key:t.dataIndex,"data-index":t.dataIndex,"header-cell-class":$(t)},{ref_for:!0},t.columnProps,{title:t.title}),{title:l(()=>[typeof t?.columnProps?.title=="function"?(s(),p(g(t?.columnProps?.title),{key:0})):(s(),d(k,{key:1},[M(O(t?.columnProps?.title||t.title),1)],64))]),cell:l(({record:a,rowIndex:n,column:b})=>[u(R,o({field:`tableData[${n}].${t.dataIndex}`,"label-col-style":{display:"none"},"wrapper-col-props":{span:24}},{ref_for:!0},t.formItemProps,{rules:[{required:t.required||!1,message:I(t)},...t.rules||[]]}),{default:l(()=>[t.slotName?G(e.$slots,t.dataIndex,o({key:0,ref_for:!0},{record:a,rowIndex:n,column:b}),void 0,!0):(s(),p(g(`a-${t.type}`),o({key:1,ref_for:!0},v(t),{modelValue:a[t.dataIndex],"onUpdate:modelValue":E=>a[t.dataIndex]=E,disabled:V({row:a,rowIndex:n,col:t})}),null,16,["modelValue","onUpdate:modelValue","disabled"]))]),_:2},1040,["field","rules"])]),_:2},1040,["data-index","header-cell-class","title"]))),128))]),tr:l(({record:t,rowIndex:a})=>[y("tr",{class:"gi-edit-table-tr",onDblclick:n=>f("tr-dblclick",{record:t,rowIndex:a})},null,40,z)]),td:l(({record:t,column:a,rowIndex:n})=>[y("td",{class:"gi-edit-table-td",onDblclick:b=>f("td-dblclick",{record:t,column:a,rowIndex:n})},null,40,H)]),_:3},16,["data"])]),_:3},8,["model"])])}}}),X=U(J,[["__scopeId","data-v-b75b1269"]]);export{X as _};
