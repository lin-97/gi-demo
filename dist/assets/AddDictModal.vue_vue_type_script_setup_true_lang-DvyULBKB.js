import{dj as q}from"./index-KLtyvs0j.js";import{u as B}from"./useResetReactive-CbSy7QK0.js";import{b as O}from"./regexp-BWv6Tqg2.js";import{a9 as z}from"./arco-CDZlpuCh.js";import{e as A,ac as D,a as f,c as p,h as s,j as E,k as F,a1 as t,Y as I,l as n,t as l}from"./vue-_iYK9Zi6.js";const H=A({__name:"AddDictModal",emits:["save-success"],setup(P,{expose:_,emit:v}){const w=v,u=D("formRef"),c=f(""),x=p(()=>!!c.value),b=p(()=>x.value?"编辑字典":"新增字典"),r=f(!1),[a,V]=B({name:"",code:"",status:1,description:""}),h={name:[{required:!0,message:"请输入字典名称"}],code:[{required:!0,message:"请输入字典编码"},{match:O,message:"格式不对！只能是英文"}],status:[{required:!0}]},k=()=>{c.value="",r.value=!0},g=async m=>{c.value=m,r.value=!0;const e=await q.getDetail({id:m});Object.assign(a,e.data)},R=()=>{u.value?.resetFields(),V()},y=async()=>{try{return await u.value?.validate()?!1:await new Promise(d=>setTimeout(()=>d(!0),300))?(z.success("模拟保存成功"),w("save-success"),!0):!1}catch{return!1}};return _({add:k,edit:g}),(m,e)=>{const d=s("a-input"),i=s("a-form-item"),M=s("a-textarea"),U=s("a-switch"),C=s("a-form"),j=s("a-modal");return F(),E(j,{visible:t(r),"onUpdate:visible":e[4]||(e[4]=o=>I(r)?r.value=o:null),title:t(b),width:"calc(100% - 20px)","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:y,onClose:R},{default:n(()=>[l(C,{ref_key:"formRef",ref:u,model:t(a),rules:h,size:"medium","auto-label-width":""},{default:n(()=>[l(i,{label:"字典名称",field:"name"},{default:n(()=>[l(d,{modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(a).name=o),modelModifiers:{trim:!0},placeholder:"请输入字典名称","allow-clear":"","max-length":10},null,8,["modelValue"])]),_:1}),l(i,{label:"字典编码",field:"code"},{default:n(()=>[l(d,{modelValue:t(a).code,"onUpdate:modelValue":e[1]||(e[1]=o=>t(a).code=o),modelModifiers:{trim:!0},placeholder:"请输入字典编码","allow-clear":"","max-length":10},null,8,["modelValue"])]),_:1}),l(i,{label:"描述",field:"description"},{default:n(()=>[l(M,{modelValue:t(a).description,"onUpdate:modelValue":e[2]||(e[2]=o=>t(a).description=o),modelModifiers:{trim:!0},placeholder:"请填写描述","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])]),_:1}),l(i,{label:"状态",field:"status"},{default:n(()=>[l(U,{modelValue:t(a).status,"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).status=o),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}});export{H as _};
