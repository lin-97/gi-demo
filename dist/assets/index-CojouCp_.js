import{_ as F}from"./index-3av5scz5.js";import{_ as H}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BZwOLfRP.js";import{b as k}from"./dept-GYyz1j5K.js";import"./index-nN1PoSln.js";import{u as J}from"./useTable-DZeM0WUV.js";import{u as Q}from"./useDict-CBcDm_sa.js";import"./role-ikVY_VFV.js";import{_ as X}from"./AddDeptModal.vue_vue_type_script_setup_true_lang-Bq6Q60es.js";import{a9 as Y}from"./arco-Buj77_8l.js";import{e as Z,ac as S,r as ee,h as o,j as c,k as u,l as t,t as e,m as d,a1 as a,y as te,p as ne,C as oe}from"./vue-sr_Z8kjA.js";import"./useBreakpoint-D2cRTq41.js";import"./index-Dru6jS8c.js";import"./useResetReactive-CIFZZO4u.js";import"./useDept-qu7QYd29.js";const ge=Z({name:"SystemDept",__name:"index",setup(ae){const{data:A}=Q({code:"status"}),m=S("AddDeptModalRef"),w=S("tableRef"),s=ee({name:"",status:""}),{loading:V,tableData:R,selectedKeys:_,search:f,select:I,selectAll:M,fixed:h,handleDelete:g}=J(()=>k.getList({...s}),{immediate:!0,onSuccess:()=>{oe(()=>{w.value?.expandAll(!0)})}}),B=()=>{s.name="",s.status="",f()},x=()=>{m.value?.add()},T=r=>{m.value?.edit(r.id)},$=r=>g(()=>k.delete({ids:[r.id]}),{showModal:!1}),N=()=>_.value.length?g(()=>k.delete({ids:_.value})):Y.warning("请选择部门");return(r,n)=>{const b=o("icon-plus"),i=o("a-button"),C=o("icon-delete"),y=o("a-space"),z=o("a-select"),v=o("icon-search"),L=o("a-input"),P=o("a-input-group"),j=o("a-row"),G=o("IconDown"),O=o("IconRight"),p=o("a-table-column"),U=H,q=o("icon-edit"),E=o("a-popconfirm"),K=o("a-table"),W=F;return u(),c(W,{margin:""},{default:t(()=>[e(j,{justify:"space-between"},{default:t(()=>[e(y,{wrap:""},{default:t(()=>[e(i,{type:"primary",onClick:x},{icon:t(()=>[e(b)]),default:t(()=>[n[3]||(n[3]=d("span",null,"新增",-1))]),_:1,__:[3]}),e(i,{type:"primary",status:"danger",onClick:N},{icon:t(()=>[e(C)]),default:t(()=>[n[4]||(n[4]=d("span",null,"删除",-1))]),_:1,__:[4]})]),_:1}),e(y,{wrap:""},{default:t(()=>[e(P,null,{default:t(()=>[e(z,{modelValue:a(s).status,"onUpdate:modelValue":n[0]||(n[0]=l=>a(s).status=l),options:a(A),placeholder:"部门状态",style:{width:"120px"}},null,8,["modelValue","options"]),e(L,{modelValue:a(s).name,"onUpdate:modelValue":n[1]||(n[1]=l=>a(s).name=l),placeholder:"输入部门名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:t(()=>[e(v)]),_:1},8,["modelValue"])]),_:1}),e(i,{type:"primary",onClick:a(f)},{icon:t(()=>[e(v)]),default:t(()=>[n[5]||(n[5]=d("span",null,"搜索",-1))]),_:1,__:[5]},8,["onClick"]),e(i,{onClick:B},{default:t(()=>n[6]||(n[6]=[te("重置",-1)])),_:1,__:[6]})]),_:1})]),_:1}),e(K,{ref_key:"tableRef",ref:w,class:"gi_table","row-key":"id",bordered:{cell:!0},data:a(R),loading:a(V),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:!1,"row-selection":{type:"checkbox",showCheckedAll:!1},"selected-keys":a(_),onSelect:a(I),onSelectAll:a(M)},{"expand-icon":t(({expanded:l})=>[l?(u(),c(G,{key:0})):(u(),c(O,{key:1}))]),columns:t(()=>[e(p,{title:"部门名称","data-index":"name",width:160}),e(p,{title:"排序","data-index":"sort",width:100,align:"center"}),e(p,{title:"状态",width:100,align:"center"},{cell:t(({record:l})=>[e(U,{status:l.status},null,8,["status"])]),_:1}),e(p,{title:"描述","data-index":"description",width:250,ellipsis:!0,tooltip:!0}),e(p,{title:"创建时间","data-index":"createTime",width:200}),e(p,{title:"操作",width:200,align:"center",fixed:a(h)},{cell:t(({record:l})=>[e(y,null,{default:t(()=>[e(i,{type:"primary",size:"mini",onClick:D=>T(l)},{icon:t(()=>[e(q)]),default:t(()=>[n[7]||(n[7]=d("span",null,"编辑",-1))]),_:2,__:[7]},1032,["onClick"]),l.parentId?(u(),c(i,{key:0,type:"primary",status:"success",size:"mini",onClick:n[2]||(n[2]=D=>x())},{icon:t(()=>[e(b)]),default:t(()=>[n[8]||(n[8]=d("span",null,"新增",-1))]),_:1,__:[8]})):ne("",!0),e(E,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:D=>$(l)},{default:t(()=>[e(i,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(C)]),default:t(()=>[n[9]||(n[9]=d("span",null,"删除",-1))]),_:1,__:[9]})]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","selected-keys","onSelect","onSelectAll"]),e(X,{ref_key:"AddDeptModalRef",ref:m,onSaveSuccess:a(f)},null,8,["onSaveSuccess"])]),_:1})}}});export{ge as default};
