import{e as h,c as j,h as o,n as V,k as g,s as fe,j as k,a as R,w as ve,q as ge,u as B,t as e,m as u,l as t,ac as D,r as ye,a1 as a,y as x,z as T,p as L,Y as be,C as ke}from"./vue-_iYK9Zi6.js";import{_ as A}from"./index-COakebNL.js";import{u as we}from"./useBreakpoint-DAFsyWcD.js";import{_ as xe}from"./GiCellGender.vue_vue_type_script_setup_true_lang-CrlnTWU_.js";import{_ as he}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-Dsi2Injn.js";import{_ as Se}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-Cs_Q6ikx.js";import{b as z}from"./user-CC29uvu3.js";import{u as Ce}from"./useTable-B8Y9iGJZ.js";import{u as $e}from"./useDept-CImWn8Ci.js";import{u as De}from"./useDict-COD8ChSZ.js";import"./role-C-C9HNfF.js";import{_ as ze}from"./AddUserModal.vue_vue_type_script_setup_true_lang-5FodFV7L.js";import{_ as Be}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-DaQPsF_Q.js";import{a9 as Ve}from"./arco-BuJQNAYO.js";import"./index-BPv1vC5v.js";import"./dept-Dmun1cmX.js";import"./useResetReactive-Bbo38ME6.js";import"./regexp-BWv6Tqg2.js";const Re=h({__name:"index",props:{collapsed:{type:Boolean,default:!1},type:{default:"circle"},iconSize:{default:14},disabled:{type:Boolean,default:!1}},emits:["click","update:collapsed"],setup(b,{emit:d}){const s=b,i=d,c=j(()=>[`gi-split-button--${s.type}`,{"is-collapsed":s.collapsed,"is-disabled":s.disabled}]),m=()=>{s.disabled||(i("click"),i("update:collapsed",!s.collapsed))};return(f,r)=>{const _=o("icon-right"),S=o("icon-left");return g(),V("div",{class:fe(["gi-split-button",c.value]),onClick:m},[f.collapsed?(g(),k(_,{key:0,size:f.iconSize},null,8,["size"])):(g(),k(S,{key:1,size:f.iconSize},null,8,["size"]))],2)}}}),Ae=A(Re,[["__scopeId","data-v-75e79831"]]),Ue=h({__name:"GiSplitPaneFlexibleBox",props:{visible:{type:Boolean,default:!1},direction:{default:"left"}},emits:["update:visible"],setup(b,{emit:d}){const s=b,i=d,c=R(),{breakpoint:m}=we();ve(()=>m.value,r=>{["xs"].includes(r)?i("update:visible",!1):i("update:visible",!0)},{immediate:!0});const f=j(()=>{const r={};return r[`margin-${s.direction}`]=!s.visible&&c.value&&c.value.clientWidth?`-${c.value.clientWidth}px`:0,r});return(r,_)=>(g(),V("div",{ref_key:"boxRef",ref:c,class:"gi-flexible-box",style:ge(f.value)},[B(r.$slots,"default",{},void 0,!0)],4))}}),Ge=A(Ue,[["__scopeId","data-v-ae59c018"]]),Ie={class:"gi-split-pane"},Me={class:"gi-split-pane__left"},Pe={class:"gi-split-pane__line"},Ne={class:"gi-split-pane__right"},Te=h({name:"GiSplitPane",__name:"index",setup(b){const d=R(!0),s=()=>{d.value=!d.value};return(i,c)=>{const m=Ge,f=Ae;return g(),V("div",Ie,[e(m,{visible:d.value,"onUpdate:visible":c[0]||(c[0]=r=>d.value=r)},{default:t(()=>[u("div",Me,[B(i.$slots,"left",{},void 0,!0)])]),_:3},8,["visible"]),u("div",Pe,[e(f,{collapsed:!d.value,onClick:s},null,8,["collapsed"])]),u("div",Ne,[B(i.$slots,"default",{},void 0,!0)])])}}}),Le=A(Te,[["__scopeId","data-v-d5ed51cf"]]),je={class:"gi_full_column"},st=h({name:"SystemUser",__name:"index",setup(b){const{data:d}=De({code:"status"}),s=D("treeRef"),i=D("AddUserModalRef"),c=D("UserDetailDrawerRef"),m=R(""),{deptList:f,getDeptList:r}=$e({onSuccess:()=>{ke(()=>{s.value?.expandAll(!0)})}});r();const _=ye({status:"",username:""}),{loading:S,tableData:W,pagination:q,selectedKeys:C,search:w,select:E,selectAll:F,fixed:O,handleDelete:U}=Ce(v=>z.getList({...v,..._}),{immediate:!0}),K=()=>{_.status="",_.username="",w()},Y=()=>{i.value?.add()},H=v=>{i.value?.edit(v.id)},J=v=>U(()=>z.delete({ids:[v.id]}),{showModal:!1}),Q=()=>C.value.length?U(()=>z.delete({ids:C.value})):Ve.warning("请选择用户！"),X=v=>{c.value?.open(v.id)};return(v,l)=>{const G=o("icon-search"),I=o("a-input"),Z=o("a-tree"),ee=o("a-scrollbar"),te=o("icon-plus"),y=o("a-button"),M=o("icon-delete"),$=o("a-space"),ne=o("a-select"),le=o("a-input-group"),oe=o("icon-refresh"),ae=o("a-row"),p=o("a-table-column"),se=o("a-link"),ie=Se,ce=he,de=xe,P=o("a-tag"),re=o("icon-edit"),pe=o("a-popconfirm"),_e=o("a-table"),ue=Le,me=o("a-card");return g(),k(me,{title:"用户管理",class:"gi_page_card"},{default:t(()=>[e(ue,null,{left:t(()=>[e(I,{modelValue:a(m),"onUpdate:modelValue":l[0]||(l[0]=n=>be(m)?m.value=n:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{marginBottom:"8px"}},{prefix:t(()=>[e(G)]),_:1},8,["modelValue"]),u("div",je,[e(ee,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(Z,{ref_key:"treeRef",ref:s,"block-node":"","show-line":"","default-expand-all":"",data:a(f),"field-names":{key:"id",title:"name",children:"children"},onSelect:a(w)},null,8,["data","onSelect"])]),_:1})])]),default:t(()=>[e(ae,{justify:"space-between"},{default:t(()=>[e($,{wrap:""},{default:t(()=>[e(y,{type:"primary",onClick:Y},{icon:t(()=>[e(te)]),default:t(()=>[l[3]||(l[3]=u("span",null,"新增",-1))]),_:1,__:[3]}),e(y,{type:"primary",status:"danger",onClick:Q},{icon:t(()=>[e(M)]),default:t(()=>[l[4]||(l[4]=u("span",null,"删除",-1))]),_:1,__:[4]})]),_:1}),e($,{wrap:""},{default:t(()=>[e(le,null,{default:t(()=>[e(ne,{modelValue:a(_).status,"onUpdate:modelValue":l[1]||(l[1]=n=>a(_).status=n),options:a(d),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),e(I,{modelValue:a(_).username,"onUpdate:modelValue":l[2]||(l[2]=n=>a(_).username=n),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),e(y,{type:"primary",onClick:a(w)},{icon:t(()=>[e(G)]),default:t(()=>[l[5]||(l[5]=u("span",null,"查询",-1))]),_:1,__:[5]},8,["onClick"]),e(y,{onClick:K},{icon:t(()=>[e(oe)]),default:t(()=>[l[6]||(l[6]=u("span",null,"重置",-1))]),_:1,__:[6]})]),_:1})]),_:1}),e(_e,{class:"gi_table","row-key":"id",loading:a(S),data:a(W),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:a(q),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":a(C),onSelect:a(E),onSelectAll:a(F)},{columns:t(()=>[e(p,{title:"序号",width:64},{cell:t(n=>[x(T(n.rowIndex+1),1)]),_:1}),e(p,{title:"用户名","data-index":"username",width:120},{cell:t(({record:n})=>[e(se,{onClick:N=>X(n)},{default:t(()=>[x(T(n.username),1)]),_:2},1032,["onClick"])]),_:1}),e(p,{title:"昵称","data-index":"nickname",width:150},{cell:t(({record:n})=>[e(ie,{avatar:n.avatar,name:n.nickname},null,8,["avatar","name"])]),_:1}),e(p,{title:"状态",width:100,align:"center"},{cell:t(({record:n})=>[e(ce,{status:n.status},null,8,["status"])]),_:1}),e(p,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:t(({record:n})=>[e(de,{gender:n.gender},null,8,["gender"])]),_:1}),e(p,{title:"联系方式","data-index":"phone",width:180}),e(p,{title:"部门","data-index":"deptName",width:180}),e(p,{title:"类型",width:100,align:"center"},{cell:t(({record:n})=>[n.type===1?(g(),k(P,{key:0,color:"red",size:"small"},{default:t(()=>l[7]||(l[7]=[x("系统内置",-1)])),_:1,__:[7]})):L("",!0),n.type===2?(g(),k(P,{key:1,color:"orange",size:"small"},{default:t(()=>l[8]||(l[8]=[x("自定义",-1)])),_:1,__:[8]})):L("",!0)]),_:1}),e(p,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),e(p,{title:"创建时间","data-index":"createTime",width:200}),e(p,{title:"操作",width:180,align:"center",fixed:a(O)},{cell:t(({record:n})=>[e($,null,{default:t(()=>[e(y,{type:"primary",size:"mini",onClick:N=>H(n)},{icon:t(()=>[e(re)]),default:t(()=>[l[9]||(l[9]=u("span",null,"编辑",-1))]),_:2,__:[9]},1032,["onClick"]),e(pe,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:N=>J(n)},{default:t(()=>[e(y,{type:"primary",status:"danger",size:"mini",disabled:n.disabled},{icon:t(()=>[e(M)]),default:t(()=>[l[10]||(l[10]=u("span",null,"删除",-1))]),_:2,__:[10]},1032,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])]),_:1}),e(ze,{ref_key:"AddUserModalRef",ref:i,onSaveSuccess:a(w)},null,8,["onSaveSuccess"]),e(Be,{ref_key:"UserDetailDrawerRef",ref:c},null,512)]),_:1})}}});export{st as default};
