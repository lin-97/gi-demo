import{_ as te}from"./index-DMfj6M8F.js";import{b as D}from"./menu-DpJ1OZ-j.js";import{_ as ne}from"./index-Bs0L_RZk.js";import{dm as oe,i as le}from"./index-COakebNL.js";import{u as ae}from"./useTable-B8Y9iGJZ.js";import"./dept-Dmun1cmX.js";import{u as ie}from"./useDict-COD8ChSZ.js";import"./role-C-C9HNfF.js";import{_ as se}from"./AddMenuModal.vue_vue_type_script_setup_true_lang-BkNbQ4w-.js";import{ad as _e}from"./arco-BuJQNAYO.js";import{e as ce,ac as R,a as re,r as de,h as l,j as i,k as a,l as e,t,m as p,a1 as s,y as c,z as x,p as u,n as me,F as pe,O as ue,X as fe}from"./vue-_iYK9Zi6.js";import"./useBreakpoint-DAFsyWcD.js";import"./index-BPv1vC5v.js";import"./index-B3nxu8MQ.js";import"./useResetReactive-Bbo38ME6.js";const Be=ce({name:"SystemMenu",__name:"index",setup(ye){const{data:I}=ie({code:"status"}),g=R("AddMenuModalRef"),z=R("tableRef"),f=re(!1),M=()=>{f.value=!f.value,z.value?.expandAll(f.value)},m=de({name:"",status:""}),{loading:S,tableData:k,search:w,fixed:A,handleDelete:B}=ae(()=>D.getList({...m}),{immediate:!0}),N=()=>{m.name="",m.status="",w()},E=()=>{g.value?.add()},h=y=>{g.value?.edit(y.id)},O=y=>B(()=>D.delete({ids:[y.id]}),{showModal:!1}),T=()=>{_e.open({title:"数据结构",content:()=>fe(ne,{codeJson:JSON.stringify(k.value,null,"	")}),width:560})};return(y,n)=>{const b=l("icon-plus"),d=l("a-button"),$=l("icon-list"),P=l("icon-mind-mapping"),C=l("a-tooltip"),j=l("icon-code"),v=l("a-space"),V=l("icon-search"),F=l("a-input"),J=l("a-select"),L=l("icon-refresh"),U=l("a-row"),q=l("IconDown"),G=l("IconRight"),_=l("a-table-column"),r=l("a-tag"),W=te,X=l("a-switch"),H=l("icon-edit"),K=l("icon-delete"),Q=l("a-popconfirm"),Y=l("a-table"),Z=l("a-card");return a(),i(Z,{title:"菜单管理",class:"gi_page_card"},{default:e(()=>[t(U,{justify:"space-between"},{default:e(()=>[t(v,{wrap:""},{default:e(()=>[t(d,{type:"primary",onClick:E},{icon:e(()=>[t(b)]),default:e(()=>[n[2]||(n[2]=p("span",null,"新增",-1))]),_:1,__:[2]}),t(C,{content:"展开/折叠"},{default:e(()=>[t(d,{type:"primary",status:"success",onClick:M},{icon:e(()=>[s(f)?(a(),i(P,{key:1})):(a(),i($,{key:0}))]),_:1})]),_:1}),t(C,{content:"查看数据结构"},{default:e(()=>[t(d,{type:"primary",status:"warning",onClick:T},{icon:e(()=>[t(j)]),_:1})]),_:1})]),_:1}),t(v,{wrap:""},{default:e(()=>[t(F,{modelValue:s(m).name,"onUpdate:modelValue":n[0]||(n[0]=o=>s(m).name=o),placeholder:"输入菜单名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:e(()=>[t(V)]),_:1},8,["modelValue"]),t(J,{modelValue:s(m).status,"onUpdate:modelValue":n[1]||(n[1]=o=>s(m).status=o),options:s(I),placeholder:"菜单状态",style:{width:"120px"}},null,8,["modelValue","options"]),t(d,{type:"primary",onClick:s(w)},{icon:e(()=>[t(V)]),default:e(()=>[n[3]||(n[3]=p("span",null,"搜索",-1))]),_:1,__:[3]},8,["onClick"]),t(d,{onClick:N},{icon:e(()=>[t(L)]),default:e(()=>[n[4]||(n[4]=p("span",null,"重置",-1))]),_:1,__:[4]})]),_:1})]),_:1}),t(Y,{ref_key:"tableRef",ref:z,class:"gi_table","row-key":"id",data:s(k),loading:s(S),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:!1,size:"mini"},{"expand-icon":e(({expanded:o})=>[o?(a(),i(q,{key:0})):(a(),i(G,{key:1}))]),columns:e(()=>[t(_,{title:"菜单名称"},{cell:e(({record:o})=>[c(x(o.title||""),1)]),_:1}),t(_,{title:"类型",width:80,align:"center"},{cell:e(({record:o})=>[o.type===1?(a(),i(r,{key:0,size:"small",color:"orangered"},{default:e(()=>n[5]||(n[5]=[c("目录",-1)])),_:1,__:[5]})):u("",!0),o.type===2?(a(),i(r,{key:1,size:"small",color:"green"},{default:e(()=>n[6]||(n[6]=[c("菜单",-1)])),_:1,__:[6]})):u("",!0),o.type===3?(a(),i(r,{key:2,size:"small"},{default:e(()=>n[7]||(n[7]=[c("按钮",-1)])),_:1,__:[7]})):u("",!0)]),_:1}),t(_,{title:"排序",width:80,align:"center"},{cell:e(({record:o})=>[c(x(o.sort||0),1)]),_:1}),t(_,{title:"路由路径","data-index":"path"}),t(_,{title:"路由名称"},{cell:e(({record:o})=>[c(x(s(oe)(o.path)),1)]),_:1}),t(_,{title:"组件路径","data-index":"component"}),t(_,{title:"权限标识","data-index":"permission"}),t(_,{title:"菜单图标","data-index":"icon",width:100,align:"center"},{cell:e(({record:o})=>[o.svgIcon?(a(),i(W,{key:0,size:24,name:o.svgIcon},null,8,["name"])):(a(),me(pe,{key:1},[o.icon?(a(),i(ue(o.icon),{key:0,size:24})):u("",!0)],64))]),_:1}),t(_,{title:"状态",width:80,align:"center"},{cell:e(({record:o})=>[t(X,{type:"round",size:"small","model-value":o.status,"checked-value":1,"unchecked-value":0},null,8,["model-value"])]),_:1}),t(_,{title:"是否缓存",width:100,align:"center"},{cell:e(({record:o})=>[o.keepAlive?(a(),i(r,{key:0,size:"small",color:"green"},{default:e(()=>n[8]||(n[8]=[c("是",-1)])),_:1,__:[8]})):(a(),i(r,{key:1,size:"small",color:"red"},{default:e(()=>n[9]||(n[9]=[c("否",-1)])),_:1,__:[9]}))]),_:1}),t(_,{title:"是否隐藏",width:100,align:"center"},{cell:e(({record:o})=>[o.hidden?(a(),i(r,{key:0,size:"small",color:"green"},{default:e(()=>n[10]||(n[10]=[c("是",-1)])),_:1,__:[10]})):(a(),i(r,{key:1,size:"small",color:"red"},{default:e(()=>n[11]||(n[11]=[c("否",-1)])),_:1,__:[11]}))]),_:1}),t(_,{title:"是否外链",width:100,align:"center"},{cell:e(({record:o})=>[s(le)(o.path)?(a(),i(r,{key:0,size:"small",color:"green"},{default:e(()=>n[12]||(n[12]=[c("是",-1)])),_:1,__:[12]})):(a(),i(r,{key:1,size:"small",color:"red"},{default:e(()=>n[13]||(n[13]=[c("否",-1)])),_:1,__:[13]}))]),_:1}),t(_,{title:"操作",width:200,align:"left",fixed:s(A)},{cell:e(({record:o})=>[t(v,null,{default:e(()=>[t(d,{type:"primary",size:"mini",onClick:ee=>h(o)},{icon:e(()=>[t(H)]),default:e(()=>[n[14]||(n[14]=p("span",null,"编辑",-1))]),_:2,__:[14]},1032,["onClick"]),[1,2].includes(o.type)?(a(),i(d,{key:0,type:"primary",status:"success",size:"mini"},{icon:e(()=>[t(b)]),_:1})):u("",!0),t(Q,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:ee=>O(o)},{default:e(()=>[t(d,{type:"primary",status:"danger",size:"mini"},{icon:e(()=>[t(K)]),default:e(()=>[n[15]||(n[15]=p("span",null,"删除",-1))]),_:1,__:[15]})]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading"]),t(se,{ref_key:"AddMenuModalRef",ref:g,menus:s(k),onSaveSuccess:s(w)},null,8,["menus","onSaveSuccess"])]),_:1})}}});export{Be as default};
