import{_ as F}from"./index-3av5scz5.js";import{_ as H}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BZwOLfRP.js";import{b as f}from"./role-ikVY_VFV.js";import"./index-nN1PoSln.js";import{u as J}from"./useTable-DZeM0WUV.js";import"./dept-GYyz1j5K.js";import{u as Q}from"./useDict-CBcDm_sa.js";import{_ as X}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-BLhWqBgC.js";import{_ as Y}from"./PermModal.vue_vue_type_script_setup_true_lang-BLrN4K4I.js";import{a9 as Z}from"./arco-Buj77_8l.js";import{e as ee,ac as x,r as te,h as a,j as oe,k as ne,l as t,t as e,m as p,a1 as l,y,z as ae}from"./vue-sr_Z8kjA.js";import"./useBreakpoint-D2cRTq41.js";import"./index-Dru6jS8c.js";import"./useResetReactive-CIFZZO4u.js";import"./menu-Dw_7DqY0.js";const xe=ee({name:"SystemRole",__name:"index",setup(le){const{data:C}=Q({code:"status"}),r=x("AddRoleModalRef"),b=x("PermModalRef"),i=te({name:"",status:""}),{loading:v,tableData:R,pagination:S,selectedKeys:u,search:m,select:A,selectAll:M,fixed:V,handleDelete:g}=J(s=>f.getList({...s,...i}),{immediate:!0}),P=()=>{i.name="",i.status="",m()},D=()=>{r.value?.add()},$=s=>{r.value?.edit(s.id)},B=s=>g(()=>f.delete({ids:[s.id]}),{showModal:!1}),h=()=>{if(!u.value.length)return Z.warning("请选择角色！");g(()=>f.delete({ids:u.value}))},z=s=>{b.value?.open({code:s.code,title:s.name})};return(s,o)=>{const T=a("icon-plus"),d=a("a-button"),w=a("icon-delete"),_=a("a-space"),L=a("a-select"),N=a("a-input"),j=a("a-input-group"),G=a("icon-search"),I=a("a-row"),c=a("a-table-column"),O=H,U=a("icon-edit"),q=a("icon-safe"),E=a("a-popconfirm"),K=a("a-table"),W=F;return ne(),oe(W,{margin:""},{default:t(()=>[e(I,{justify:"space-between"},{default:t(()=>[e(_,{wrap:""},{default:t(()=>[e(d,{type:"primary",onClick:D},{icon:t(()=>[e(T)]),default:t(()=>[o[2]||(o[2]=p("span",null,"新增",-1))]),_:1,__:[2]}),e(d,{type:"primary",status:"danger",onClick:h},{icon:t(()=>[e(w)]),default:t(()=>[o[3]||(o[3]=p("span",null,"删除",-1))]),_:1,__:[3]})]),_:1}),e(_,{wrap:""},{default:t(()=>[e(j,null,{default:t(()=>[e(L,{modelValue:l(i).status,"onUpdate:modelValue":o[0]||(o[0]=n=>l(i).status=n),options:l(C),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),e(N,{modelValue:l(i).name,"onUpdate:modelValue":o[1]||(o[1]=n=>l(i).name=n),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(d,{type:"primary",onClick:l(m)},{icon:t(()=>[e(G)]),default:t(()=>[o[4]||(o[4]=p("span",null,"查询",-1))]),_:1,__:[4]},8,["onClick"]),e(d,{onClick:P},{default:t(()=>o[5]||(o[5]=[y("重置",-1)])),_:1,__:[5]})]),_:1})]),_:1}),e(K,{class:"gi_table","row-key":"id",data:l(R),bordered:{cell:!0},loading:l(v),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:l(S),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":l(u),onSelect:l(A),onSelectAll:l(M)},{columns:t(()=>[e(c,{title:"序号",width:64},{cell:t(n=>[y(ae(n.rowIndex+1),1)]),_:1}),e(c,{title:"角色名称","data-index":"name"}),e(c,{title:"角色编码","data-index":"code",width:150}),e(c,{title:"状态",width:100,align:"center"},{cell:t(({record:n})=>[e(O,{status:n.status},null,8,["status"])]),_:1}),e(c,{title:"描述","data-index":"description",ellipsis:!0,tooltip:!0}),e(c,{title:"创建时间","data-index":"createTime",width:180}),e(c,{title:"操作",width:280,align:"center",fixed:l(V)},{cell:t(({record:n})=>[e(_,null,{default:t(()=>[e(d,{type:"primary",size:"mini",disabled:n.disabled,onClick:k=>$(n)},{icon:t(()=>[e(U)]),default:t(()=>[o[6]||(o[6]=p("span",null,"编辑",-1))]),_:2,__:[6]},1032,["disabled","onClick"]),e(d,{type:"primary",status:"success",size:"mini",disabled:n.disabled,onClick:k=>z(n)},{icon:t(()=>[e(q)]),default:t(()=>o[7]||(o[7]=[y("分配权限",-1)])),_:2},1032,["disabled","onClick"]),e(E,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:k=>B(n)},{default:t(()=>[e(d,{type:"primary",status:"danger",size:"mini",disabled:n.disabled},{icon:t(()=>[e(w)]),default:t(()=>[o[8]||(o[8]=p("span",null,"删除",-1))]),_:2,__:[8]},1032,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),e(X,{ref_key:"AddRoleModalRef",ref:r,onSaveSuccess:l(m)},null,8,["onSaveSuccess"]),e(Y,{ref_key:"PermModalRef",ref:b},null,512)]),_:1})}}});export{xe as default};
