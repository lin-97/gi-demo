import{d1 as I}from"./index-COakebNL.js";import{e as _,a as v,h,j as g,k as W,l as q,t as w,a1 as N}from"./vue-_iYK9Zi6.js";const k=[{id:"7e05bd5a227a5c5c05054b41d5e4c82c",parentId:"0",parentName:null,name:"一级指标（实施考核）",level:1,quotaWeight:60,selfScore:120,deptScore:null,children:[{id:"784f95270c4c6139194dd40a29fb15dc",parentId:"7e05bd5a227a5c5c05054b41d5e4c82c",parentName:"一级指标（实施考核）",name:"二级指标（实施考核）",level:2,quotaWeight:40,selfScore:30,deptScore:null,children:[{id:"7d8c544d388823c6c1c588ee3ac0f10d",parentId:"784f95270c4c6139194dd40a29fb15dc",parentName:"二级指标（实施考核）",name:"三级指标（实施考核）",level:3,quotaWeight:30,selfScore:20,deptScore:null,children:[{id:"5e91a2eac4b7f340d90a6d7bc294d83d",children:[],parentId:"7d8c544d388823c6c1c588ee3ac0f10d",parentName:"三级指标（实施考核）",name:"四级指标（实施考核）1",level:4,quotaWeight:80,selfScore:8,deptScore:68},{id:"5e91a2eac4b7f340d90a6d7bc294d84d",children:[],parentId:"7d8c544d388823c6c1c588ee3ac0f10d",parentName:"三级指标（实施考核）",name:"四级指标（实施考核）2",level:4,quotaWeight:21,selfScore:3,deptScore:70}]},{id:"7d8c544d388823c6c1c588ee3ac5560d",parentId:"784f95270c4c6139194dd40a29fb15dc",parentName:"二级指标（实施考核）",name:"三级指标（实施考核）1",level:3,quotaWeight:30,selfScore:20,deptScore:75,children:[{id:"5e91a2eac4b7f340d90a6d7bc294d56d",children:[],parentId:"7d8c544d388823c6c1c588ee3ac5560d",parentName:"三级指标（实施考核）",name:"四级指标（实施考核）3",level:4,quotaWeight:25,selfScore:5,deptScore:90}]}]}]}],R=_({__name:"index",setup(y){const n=v([]),u=[{title:"一级指标",dataIndex:"name1"},{title:"二级指标",dataIndex:"name2"},{title:"三级指标",dataIndex:"name3"},{title:"四级指标",dataIndex:"name4"},{title:"权重分",dataIndex:"quotaWeight",width:100},{title:"自评分",dataIndex:"selfScore",width:100},{title:"处室评分（百分制）",dataIndex:"deptScore",fixed:"right"}],m=o=>{const t={children:"children"},a=[],d={};return I.eachTree(o,(e,i,r,s,f)=>{if(d[e.id]=e,e.keys=f?f.keys.concat([e.id]):[e.id],!e.children||!e.children.length){const c={};e.keys.forEach((S,x)=>{const p=x+1,l=d[S];c[`id${p}`]=l.id,c[`name${p}`]=l.name,p===4&&(c.quotaWeight=l.quotaWeight,c.selfScore=l.selfScore,c.deptScore=l.deptScore)}),a.push(c)}},t),a},b=({record:o,rowIndex:t,column:a})=>{const d=["name1","name2","name3"],e=o[a.dataIndex];if(e&&d.includes(a.dataIndex)){const i=n.value[t-1];let r=n.value[t+1];if(i&&i[a.dataIndex]===e)return{rowspan:0,colspan:0};{let s=1;for(;r&&r[a.dataIndex]===e;)r=n.value[++s+t];if(s>1)return{rowspan:s,colspan:1}}}};return n.value=m(k),(o,t)=>{const a=h("a-table"),d=h("a-card");return W(),g(d,{title:"横向树列表",bordered:!1},{default:q(()=>[w(a,{hoverable:!1,scroll:{x:"100%",y:"100%",minWidth:1e3},bordered:{cell:!0},columns:u,data:N(n),pagination:!1,"span-method":b},null,8,["data"])]),_:1})}}});export{R as _};
