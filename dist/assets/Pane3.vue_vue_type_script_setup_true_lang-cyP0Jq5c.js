import{_ as G}from"./index-Bs0L_RZk.js";import{_ as N}from"./GiEditTable--hu4GZoU.js";import"./index-COakebNL.js";import"./dept-Dmun1cmX.js";import{u as V}from"./useDict-COD8ChSZ.js";import"./role-C-C9HNfF.js";import{a as h}from"./regexp-BWv6Tqg2.js";import{a9 as _}from"./arco-BuJQNAYO.js";import{e as z,a as B,c as f,ac as S,r as $,h as r,n as q,k as F,t,l as a,y as l,m as J,a1 as i}from"./vue-_iYK9Zi6.js";const L={class:"gi_padding"},Z=z({name:"FormTable",__name:"Pane3",setup(O){const{data:x}=V({code:"status"}),d=B([{name:"张三",phone:"",address:"广州市",rate:3,status:0,num:0}]),y=f(()=>JSON.stringify(d.value,null,"	")),u=S("GiEditTableRef"),b=f(()=>[{type:"input",title:"姓名",dataIndex:"name",required:!0},{type:"input",title:"手机号",dataIndex:"phone",required:!0,rules:[{match:h,message:"手机号格式不正确"}]},{type:"select",title:"状态",dataIndex:"status",props:{options:x.value}},{type:"rate",title:"评分",dataIndex:"rate",columnProps:{width:200}},{type:"input-number",title:"小数",dataIndex:"num",columnProps:{width:120}},{type:"textarea",title:"地址",dataIndex:"address",props:{autoSize:!0,maxLength:200,showWordLimit:!0},columnProps:{width:250}},{type:"",title:"操作",dataIndex:"action",slotName:"action",columnProps:{width:140,align:"center",fixed:"right"},formItemProps:{contentClass:"arco-table-cell-align-center"}}]),w=()=>{d.value.push({name:"",phone:"",address:"",rate:0,status:0,num:0})},o=$({rowIndex:-1,dataIndex:""}),I=n=>{o.rowIndex=n.rowIndex,o.dataIndex=n.column.dataIndex},g=()=>{o.rowIndex=-1,o.dataIndex=""},v=n=>{d.value.splice(n,1)},k=()=>{u.value?.formRef?.resetFields(),u.value?.formRef?.clearValidate()},C=async()=>{const n=await u.value?.formRef?.validate();if(n){const e=Object.values(n);_.warning(e[0].message);return}_.success("验证通过~")},T=({rowIndex:n,col:e})=>!(o.rowIndex===n&&o.dataIndex===e.dataIndex);return(n,e)=>{const R=r("a-alert"),P=r("icon-plus"),s=r("a-button"),c=r("a-space"),p=r("a-row"),D=N,j=G;return F(),q("div",L,[t(R,null,{default:a(()=>e[1]||(e[1]=[l("此示例基于GiEditTable实现了双击单元格编辑",-1)])),_:1,__:[1]}),t(p,{class:"gi_mt",justify:"end"},{default:a(()=>[t(c,{wrap:""},{default:a(()=>[t(s,{type:"primary",onClick:w},{icon:a(()=>[t(P)]),default:a(()=>[e[2]||(e[2]=J("span",null,"新增",-1))]),_:1,__:[2]})]),_:1})]),_:1}),t(D,{ref_key:"GiEditTableRef",ref:u,scroll:{minWidth:1200},columns:i(b),data:i(d),"cell-disabled":T,onTdDblclick:I},{action:a(({rowIndex:m})=>[t(c,null,{default:a(()=>[t(s,{type:"primary",status:"success",size:"mini",disabled:!(i(o).rowIndex>=0&&i(o).rowIndex===m),onClick:e[0]||(e[0]=E=>g())},{default:a(()=>e[3]||(e[3]=[l(" 保存 ",-1)])),_:2,__:[3]},1032,["disabled"]),t(s,{type:"primary",status:"danger",size:"mini",onClick:E=>v(m)},{default:a(()=>e[4]||(e[4]=[l(" 删除 ",-1)])),_:2,__:[4]},1032,["onClick"])]),_:2},1024)]),_:1},8,["columns","data"]),t(p,{justify:"end",class:"gi_mt"},{default:a(()=>[t(c,{wrap:""},{default:a(()=>[t(s,{onClick:k},{default:a(()=>e[5]||(e[5]=[l("重置",-1)])),_:1,__:[5]}),t(s,{type:"primary",onClick:C},{default:a(()=>e[6]||(e[6]=[l("验证并提交",-1)])),_:1,__:[6]})]),_:1})]),_:1}),t(j,{"code-json":i(y)},null,8,["code-json"])])}}});export{Z as _};
