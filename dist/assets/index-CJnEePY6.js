import{_ as F}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-Dsi2Injn.js";import{b as f}from"./role-C-C9HNfF.js";import"./index-COakebNL.js";import{u as H}from"./useTable-B8Y9iGJZ.js";import"./dept-Dmun1cmX.js";import{u as J}from"./useDict-COD8ChSZ.js";import{_ as Q}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-C2I1SAem.js";import{_ as X}from"./PermModal.vue_vue_type_script_setup_true_lang-Dyo7ijpM.js";import{a9 as Y}from"./arco-BuJQNAYO.js";import{e as Z,ac as x,r as ee,h as n,j as te,k as oe,l as t,t as e,a1 as l,m as r,y as C,z as ne}from"./vue-_iYK9Zi6.js";import"./useBreakpoint-DAFsyWcD.js";import"./index-BPv1vC5v.js";import"./useResetReactive-Bbo38ME6.js";import"./menu-DpJ1OZ-j.js";const we=Z({name:"SystemRole",__name:"index",setup(ae){const{data:v}=J({code:"status"}),p=x("AddRoleModalRef"),y=x("PermModalRef"),i=ee({name:"",status:""}),{loading:R,tableData:S,pagination:A,selectedKeys:m,search:_,select:M,selectAll:V,fixed:h,handleDelete:b}=H(s=>f.getList({...s,...i}),{immediate:!0}),D=()=>{i.name="",i.status="",_()},P=()=>{p.value?.add()},$=s=>{p.value?.edit(s.id)},B=s=>b(()=>f.delete({ids:[s.id]}),{showModal:!1}),z=()=>{if(!m.value.length)return Y.warning("请选择角色！");b(()=>f.delete({ids:m.value}))},T=s=>{y.value?.open({code:s.code,title:s.name})};return(s,o)=>{const k=n("icon-search"),N=n("a-input"),I=n("a-select"),d=n("a-button"),L=n("icon-refresh"),u=n("a-space"),O=n("icon-plus"),w=n("icon-delete"),U=n("a-row"),c=n("a-table-column"),j=F,q=n("icon-edit"),E=n("icon-safe"),G=n("a-popconfirm"),K=n("a-table"),W=n("a-card");return oe(),te(W,{title:"角色管理",class:"gi_page_card"},{default:t(()=>[e(u,{wrap:""},{default:t(()=>[e(N,{modelValue:l(i).name,"onUpdate:modelValue":o[0]||(o[0]=a=>l(i).name=a),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:t(()=>[e(k)]),_:1},8,["modelValue"]),e(I,{modelValue:l(i).status,"onUpdate:modelValue":o[1]||(o[1]=a=>l(i).status=a),options:l(v),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),e(d,{type:"primary",onClick:l(_)},{icon:t(()=>[e(k)]),default:t(()=>[o[2]||(o[2]=r("span",null,"查询",-1))]),_:1,__:[2]},8,["onClick"]),e(d,{onClick:D},{icon:t(()=>[e(L)]),default:t(()=>[o[3]||(o[3]=r("span",null,"重置",-1))]),_:1,__:[3]})]),_:1}),e(U,null,{default:t(()=>[e(u,{wrap:""},{default:t(()=>[e(d,{type:"primary",onClick:P},{icon:t(()=>[e(O)]),default:t(()=>[o[4]||(o[4]=r("span",null,"新增",-1))]),_:1,__:[4]}),e(d,{type:"primary",status:"danger",onClick:z},{icon:t(()=>[e(w)]),default:t(()=>[o[5]||(o[5]=r("span",null,"删除",-1))]),_:1,__:[5]})]),_:1})]),_:1}),e(K,{class:"gi_table","row-key":"id",data:l(S),bordered:{cell:!0},loading:l(R),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:l(A),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":l(m),onSelect:l(M),onSelectAll:l(V)},{columns:t(()=>[e(c,{title:"序号",width:64},{cell:t(a=>[C(ne(a.rowIndex+1),1)]),_:1}),e(c,{title:"角色名称","data-index":"name"}),e(c,{title:"角色编码","data-index":"code",width:150}),e(c,{title:"状态",width:100,align:"center"},{cell:t(({record:a})=>[e(j,{status:a.status},null,8,["status"])]),_:1}),e(c,{title:"描述","data-index":"description",ellipsis:!0,tooltip:!0}),e(c,{title:"创建时间","data-index":"createTime",width:180}),e(c,{title:"操作",width:280,align:"center",fixed:l(h)},{cell:t(({record:a})=>[e(u,null,{default:t(()=>[e(d,{type:"primary",size:"mini",disabled:a.disabled,onClick:g=>$(a)},{icon:t(()=>[e(q)]),default:t(()=>[o[6]||(o[6]=r("span",null,"编辑",-1))]),_:2,__:[6]},1032,["disabled","onClick"]),e(d,{type:"primary",status:"success",size:"mini",disabled:a.disabled,onClick:g=>T(a)},{icon:t(()=>[e(E)]),default:t(()=>o[7]||(o[7]=[C("分配权限",-1)])),_:2},1032,["disabled","onClick"]),e(G,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:g=>B(a)},{default:t(()=>[e(d,{type:"primary",status:"danger",size:"mini",disabled:a.disabled},{icon:t(()=>[e(w)]),default:t(()=>[o[8]||(o[8]=r("span",null,"删除",-1))]),_:2,__:[8]},1032,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),e(Q,{ref_key:"AddRoleModalRef",ref:p,onSaveSuccess:l(_)},null,8,["onSaveSuccess"]),e(X,{ref_key:"PermModalRef",ref:y},null,512)]),_:1})}}});export{we as default};
