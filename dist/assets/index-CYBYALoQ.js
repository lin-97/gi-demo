import{_ as ae}from"./index-CdINuvFd.js";import{_ as le}from"./GiCellGender.vue_vue_type_script_setup_true_lang-CrlnTWU_.js";import{_ as ne}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-Dsi2Injn.js";import{_ as oe}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-Cs_Q6ikx.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-BjQXGsBK.js";import{b as g}from"./user-CWQmGIlX.js";import"./index-KLtyvs0j.js";import{u as ie}from"./useTable-BNajLZvY.js";import{u as re}from"./useDept-B0b2RRjp.js";import{u as de}from"./useDict-DGWEZGTt.js";import"./role-BfJ0SwWm.js";import{_ as ce}from"./AddUserModal.vue_vue_type_script_setup_true_lang-DJe5F0lA.js";import{_ as me}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-Ch0a6_Ym.js";import{a9 as ue}from"./arco-CDZlpuCh.js";import{e as pe,ac as w,a as _e,r as fe,h as n,j as y,k,l as a,t as e,a1 as l,y as m,z as S,p as V,m as ge,Y as we,C as ye}from"./vue-_iYK9Zi6.js";import"./useBreakpoint-DAFsyWcD.js";import"./index-BPv1vC5v.js";import"./dept-CLQo6noT.js";import"./useResetReactive-CbSy7QK0.js";import"./regexp-BWv6Tqg2.js";const ke={class:"gi_full_column"},je=pe({name:"SystemUser",__name:"index",setup(he){const{data:A}=de({code:"status"}),h=w("treeRef"),u=w("AddUserModalRef"),x=w("UserDetailDrawerRef"),p=_e(""),{deptList:R,getDeptList:U}=re({onSuccess:()=>{ye(()=>{h.value?.expandAll(!0)})}});U();const r=fe({status:"",username:""}),{loading:$,tableData:B,pagination:G,selectedKeys:_,search:c,select:M,selectAll:z,fixed:L,handleDelete:b}=ie(i=>g.getList({...i,...r}),{immediate:!0}),N=()=>{r.status="",r.username="",c()},T=()=>{u.value?.add()},I=i=>{u.value?.edit(i.id)},P=i=>b(()=>g.delete({ids:[i.id]}),{showModal:!1}),j=()=>_.value.length?b(()=>g.delete({ids:_.value})):ue.warning("请选择用户！"),O=i=>{x.value?.open(i.id)};return(i,s)=>{const q=n("icon-search"),v=n("a-input"),E=n("a-tree"),K=n("a-scrollbar"),d=se,f=n("a-space"),W=n("a-select"),Y=n("a-input-group"),F=n("a-row"),o=n("a-table-column"),H=n("a-link"),J=oe,Q=ne,X=le,C=n("a-tag"),Z=n("a-popconfirm"),ee=n("a-table"),te=ae;return k(),y(te,{margin:"",collapsed:""},{left:a(()=>[e(v,{modelValue:l(p),"onUpdate:modelValue":s[0]||(s[0]=t=>we(p)?p.value=t:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{marginBottom:"8px"}},{prefix:a(()=>[e(q)]),_:1},8,["modelValue"]),ge("div",ke,[e(K,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:a(()=>[e(E,{ref_key:"treeRef",ref:h,"block-node":"","show-line":"","default-expand-all":"",data:l(R),"field-names":{key:"id",title:"name",children:"children"},onSelect:l(c)},null,8,["data","onSelect"])]),_:1})])]),default:a(()=>[e(F,{justify:"space-between"},{default:a(()=>[e(f,{wrap:""},{default:a(()=>[e(d,{type:"add",onClick:T}),e(d,{type:"delete",onClick:j})]),_:1}),e(f,{wrap:""},{default:a(()=>[e(Y,null,{default:a(()=>[e(W,{modelValue:l(r).status,"onUpdate:modelValue":s[1]||(s[1]=t=>l(r).status=t),options:l(A),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),e(v,{modelValue:l(r).username,"onUpdate:modelValue":s[2]||(s[2]=t=>l(r).username=t),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),e(d,{type:"search",onClick:l(c)},null,8,["onClick"]),e(d,{type:"reset",onClick:N})]),_:1})]),_:1}),e(ee,{class:"gi_table","row-key":"id",loading:l($),data:l(B),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:l(G),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":l(_),onSelect:l(M),onSelectAll:l(z)},{columns:a(()=>[e(o,{title:"序号",width:68,align:"center"},{cell:a(t=>[m(S(t.rowIndex+1),1)]),_:1}),e(o,{title:"用户名","data-index":"username",width:120},{cell:a(({record:t})=>[e(H,{onClick:D=>O(t)},{default:a(()=>[m(S(t.username),1)]),_:2},1032,["onClick"])]),_:1}),e(o,{title:"昵称","data-index":"nickname",width:150},{cell:a(({record:t})=>[e(J,{avatar:t.avatar,name:t.nickname},null,8,["avatar","name"])]),_:1}),e(o,{title:"状态",width:100,align:"center"},{cell:a(({record:t})=>[e(Q,{status:t.status},null,8,["status"])]),_:1}),e(o,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:a(({record:t})=>[e(X,{gender:t.gender},null,8,["gender"])]),_:1}),e(o,{title:"联系方式","data-index":"phone",width:180}),e(o,{title:"部门","data-index":"deptName",width:180}),e(o,{title:"类型",width:100,align:"center"},{cell:a(({record:t})=>[t.type===1?(k(),y(C,{key:0,color:"red",size:"small"},{default:a(()=>s[3]||(s[3]=[m("系统内置",-1)])),_:1,__:[3]})):V("",!0),t.type===2?(k(),y(C,{key:1,color:"orange",size:"small"},{default:a(()=>s[4]||(s[4]=[m("自定义",-1)])),_:1,__:[4]})):V("",!0)]),_:1}),e(o,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),e(o,{title:"创建时间","data-index":"createTime",width:200}),e(o,{title:"操作",width:180,align:"center",fixed:l(L)},{cell:a(({record:t})=>[e(f,null,{default:a(()=>[e(d,{type:"edit",size:"mini",disabled:t.disabled,onClick:D=>I(t)},null,8,["disabled","onClick"]),e(Z,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:D=>P(t)},{default:a(()=>[e(d,{type:"delete",size:"mini",disabled:t.disabled},null,8,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"]),e(ce,{ref_key:"AddUserModalRef",ref:u,onSaveSuccess:l(c)},null,8,["onSaveSuccess"]),e(me,{ref_key:"UserDetailDrawerRef",ref:x},null,512)]),_:1})}}});export{je as default};
