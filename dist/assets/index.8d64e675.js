import{f as H}from"./index.1e899b54.js";import{d as C,h as R,G as J,q as K,i as a,o as _,m,w as t,b as e,j as z,z as Q,k as g,r as E,eq as X,c as Y,a as y,er as Z,es as ee,v as te,p as ae,e as oe,_ as ne}from"./index.bf63d02c.js";import{g as ue}from"./index.5ebfe12d.js";const le=g("\u6B63\u5E38"),se=g("\u7981\u7528"),de=C({__name:"AddDeptModal",props:{modelValue:{type:Boolean,default:!1},treeData:{type:Array,default:()=>[]},currentData:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(p,{emit:h}){const b=p,c=H(b,"modelValue",h),o=R({id:"",parentId:"",name:"",sort:0,status:1}),i=J(()=>b.currentData.id?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8");return K(()=>b.currentData,d=>{o.id=d.id,o.parentId=d.parentId,o.name=d.name,o.sort=d.sort,o.status=d.status}),(d,u)=>{const V=a("a-tree-select"),f=a("a-form-item"),x=a("a-input"),B=a("a-input-number"),w=a("a-radio"),l=a("a-radio-group"),r=a("a-form"),k=a("a-modal");return _(),m(k,{visible:z(c),"onUpdate:visible":u[4]||(u[4]=n=>Q(c)?c.value=n:null),title:z(i)},{default:t(()=>[e(r,{ref:"formRef",model:o,labelCol:{span:4}},{default:t(()=>[e(f,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:t(()=>[e(V,{modelValue:o.parentId,"onUpdate:modelValue":u[0]||(u[0]=n=>o.parentId=n),"allow-clear":"",data:p.treeData,placeholder:"\u8BF7\u9009\u62E9",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["modelValue","data"])]),_:1}),e(f,{label:"\u90E8\u95E8\u540D\u79F0",field:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:"blur"},{min:3,max:10,message:"\u957F\u5EA6\u5728 3 - 10\u4E2A\u5B57\u7B26",trigger:"blur"}],"validate-trigger":["change","input"]},{default:t(()=>[e(x,{modelValue:o.name,"onUpdate:modelValue":u[1]||(u[1]=n=>o.name=n),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0","allow-clear":""},null,8,["modelValue"])]),_:1}),e(f,{label:"\u6392\u5E8F",name:"sort",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F\u5E8F\u53F7",trigger:"blur"}]},{default:t(()=>[e(B,{modelValue:o.sort,"onUpdate:modelValue":u[2]||(u[2]=n=>o.sort=n),style:{width:"120px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"\u72B6\u6001",name:"status"},{default:t(()=>[e(l,{modelValue:o.status,"onUpdate:modelValue":u[3]||(u[3]=n=>o.status=n)},{default:t(()=>[e(w,{value:1},{default:t(()=>[le]),_:1}),e(w,{value:0},{default:t(()=>[se]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),F=p=>(ae("data-v-82e37201"),p=p(),oe(),p),ce={class:"dept-manage"},ie=F(()=>y("span",null,"\u90E8\u95E8\u540D\u79F0",-1)),re=F(()=>y("span",null,"\u72B6\u6001",-1)),_e=g("\u6B63\u5E38"),pe=g("\u7981\u7528"),me=F(()=>y("span",null,"\u641C\u7D22",-1)),fe=F(()=>y("span",null,"\u91CD\u7F6E",-1)),ve=F(()=>y("span",null,"\u65B0\u589E\u90E8\u95E8",-1)),Ee={class:"table-box"},ge=g("\u6B63\u5E38"),ye=g("\u7981\u7528"),he=C({name:"DeptManage"}),be=C({...he,setup(p){const h=E([]),b=E(0),c=E(!1),o=E(!1),i=R({name:"",status:""}),d=E({}),u=E(),V=async()=>{try{c.value=!0;const l=await ue();l.success&&(h.value=l.data.list,b.value=l.data.total,te(()=>{u.value.expandAll()}),c.value=!1)}catch(l){return c.value=!1,l}};V();const f=()=>{V()},x=()=>{i.name="",i.status=""},B=l=>{d.value={},l?(d.value.parentId=l.id,o.value=!0):(d.value={},o.value=!0)},w=l=>{d.value=l,o.value=!0};return(l,r)=>{const k=a("a-input"),n=a("a-space"),I=a("a-option"),M=a("a-select"),N=a("icon-search"),v=a("a-button"),S=a("icon-sync"),A=a("icon-plus"),$=a("a-row"),q=a("IconDown"),T=a("IconRight"),D=a("a-table-column"),U=a("a-tag"),j=a("icon-edit"),G=a("icon-delete"),L=a("a-popconfirm"),O=a("a-table"),P=X("loading");return _(),Y("div",ce,[e(n,{size:20,class:"head"},{default:t(()=>[e(n,null,{default:t(()=>[ie,e(k,{modelValue:i.name,"onUpdate:modelValue":r[0]||(r[0]=s=>i.name=s),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(n,null,{default:t(()=>[re,e(M,{modelValue:i.status,"onUpdate:modelValue":r[1]||(r[1]=s=>i.status=s),placeholder:"\u90E8\u95E8\u72B6\u6001",style:{width:"120px"}},{default:t(()=>[e(I,{value:1},{default:t(()=>[_e]),_:1}),e(I,{value:0},{default:t(()=>[pe]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:t(()=>[e(v,{type:"primary",onClick:f},{icon:t(()=>[e(N)]),default:t(()=>[me]),_:1}),e(v,{onClick:x},{icon:t(()=>[e(S)]),default:t(()=>[fe]),_:1})]),_:1})]),_:1}),e($,{class:"head"},{default:t(()=>[e(v,{type:"primary",onClick:B},{icon:t(()=>[e(A)]),default:t(()=>[ve]),_:1})]),_:1}),y("section",Ee,[Z((_(),m(O,{ref_key:"tableRef",ref:u,"row-key":"id",data:h.value,scroll:{x:"100%",y:"100%",minWidth:900},pagination:{showPageSize:!0},expandable:{width:80}},{"expand-icon":t(({expanded:s})=>[s?(_(),m(q,{key:0})):(_(),m(T,{key:1}))]),columns:t(()=>[e(D,{title:"\u90E8\u95E8\u540D\u79F0","data-index":"name"}),e(D,{title:"\u6392\u5E8F","data-index":"sort",width:100}),e(D,{title:"\u72B6\u6001",width:100},{cell:t(({record:s})=>[s.status==1?(_(),m(U,{key:0,color:"green"},{default:t(()=>[ge]),_:1})):(_(),m(U,{key:1,color:"red"},{default:t(()=>[ye]),_:1}))]),_:1}),e(D,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime",width:200}),e(D,{title:"\u64CD\u4F5C",width:150,align:"left"},{cell:t(({record:s})=>[e(n,null,{default:t(()=>[e(v,{type:"primary",size:"mini",onClick:W=>w(s)},{icon:t(()=>[e(j)]),_:2},1032,["onClick"]),s.parentId?(_(),m(v,{key:0,type:"primary",status:"success",size:"mini",onClick:W=>B(s)},{icon:t(()=>[e(A)]),_:2},1032,["onClick"])):ee("",!0),e(L,{type:"warning",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u9879\u5417?"},{default:t(()=>[e(v,{type:"primary",status:"danger",size:"mini"},{icon:t(()=>[e(G)]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[P,c.value]])]),e(de,{"tree-data":h.value,modelValue:o.value,"onUpdate:modelValue":r[2]||(r[2]=s=>o.value=s),currentData:d.value},null,8,["tree-data","modelValue","currentData"])])}}});const Be=ne(be,[["__scopeId","data-v-82e37201"]]);export{Be as default};
