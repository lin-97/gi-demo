import{_ as q}from"./index-BSd_cXen.js";import{_ as E}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-CblanbWY.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-DJhiOHUY.js";import{b as _}from"./role-Cg_-WBBn.js";import"./index-ClEKbW6k.js";import{u as W}from"./useTable-Ddq4CYHh.js";import"./dept-DEF04NIx.js";import{u as F}from"./useDict-B4mBI_5g.js";import{_ as H}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-BIsq5mMg.js";import{_ as J}from"./PermModal.vue_vue_type_script_setup_true_lang-Bhu2pWll.js";import{a9 as Q}from"./arco-BfMEPP4p.js";import{e as X,ac as w,r as Y,h as a,j as Z,k as ee,l as n,t as e,$ as o,y as g,z as te}from"./vue-N_SRJc_9.js";import"./useBreakpoint-B4ZW6O9T.js";import"./index-BxvfgDl6.js";import"./useResetReactive-YcB0T7DE.js";import"./menu-j9QEExR9.js";const ge=X({name:"SystemRole",__name:"index",setup(oe){const{data:k}=F({code:"status"}),r=w("AddRoleModalRef"),f=w("PermModalRef"),s=Y({name:"",status:""}),{loading:x,tableData:h,pagination:C,selectedKeys:m,search:p,select:v,selectAll:R,fixed:S,handleDelete:y}=W(l=>_.getList({...l,...s}),{immediate:!0}),A=()=>{s.name="",s.status="",p()},M=()=>{r.value?.add()},V=l=>{r.value?.edit(l.id)},$=l=>y(()=>_.delete({ids:[l.id]}),{showModal:!1}),P=()=>{if(!m.value.length)return Q.warning("请选择角色！");y(()=>_.delete({ids:m.value}))},D=l=>{f.value?.open({code:l.code,title:l.name})};return(l,d)=>{const c=K,u=a("a-space"),B=a("a-select"),z=a("a-input"),T=a("a-input-group"),G=a("a-row"),i=a("a-table-column"),L=E,j=a("icon-safe"),I=a("a-button"),N=a("a-popconfirm"),O=a("a-table"),U=q;return ee(),Z(U,{margin:""},{default:n(()=>[e(G,{justify:"space-between"},{default:n(()=>[e(u,{wrap:""},{default:n(()=>[e(c,{type:"add",onClick:M}),e(c,{type:"delete",onClick:P})]),_:1}),e(u,{wrap:""},{default:n(()=>[e(T,null,{default:n(()=>[e(B,{modelValue:o(s).status,"onUpdate:modelValue":d[0]||(d[0]=t=>o(s).status=t),options:o(k),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),e(z,{modelValue:o(s).name,"onUpdate:modelValue":d[1]||(d[1]=t=>o(s).name=t),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(c,{type:"search",onClick:o(p)},null,8,["onClick"]),e(c,{type:"reset",onClick:A})]),_:1})]),_:1}),e(O,{class:"gi_table","row-key":"id",data:o(h),bordered:{cell:!0},loading:o(x),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:o(C),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":o(m),onSelect:o(v),onSelectAll:o(R)},{columns:n(()=>[e(i,{title:"序号",width:68,align:"center"},{cell:n(t=>[g(te(t.rowIndex+1),1)]),_:1}),e(i,{title:"角色名称","data-index":"name"}),e(i,{title:"角色编码","data-index":"code",width:150}),e(i,{title:"状态",width:100,align:"center"},{cell:n(({record:t})=>[e(L,{status:t.status},null,8,["status"])]),_:1}),e(i,{title:"描述","data-index":"description",ellipsis:!0,tooltip:!0}),e(i,{title:"创建时间","data-index":"createTime",width:180}),e(i,{title:"操作",width:280,align:"center",fixed:o(S)},{cell:n(({record:t})=>[e(u,null,{default:n(()=>[e(c,{type:"edit",size:"mini",disabled:t.disabled,onClick:b=>V(t)},null,8,["disabled","onClick"]),e(I,{type:"primary",status:"success",size:"mini",disabled:t.disabled,onClick:b=>D(t)},{icon:n(()=>[e(j)]),default:n(()=>d[2]||(d[2]=[g("分配权限",-1)])),_:2},1032,["disabled","onClick"]),e(N,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:b=>$(t)},{default:n(()=>[e(c,{type:"delete",size:"mini",disabled:t.disabled},null,8,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),e(H,{ref_key:"AddRoleModalRef",ref:r,onSaveSuccess:o(p)},null,8,["onSaveSuccess"]),e(J,{ref_key:"PermModalRef",ref:f},null,512)]),_:1})}}});export{ge as default};
