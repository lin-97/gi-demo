import{_ as q}from"./index-DN5QMfZ-.js";import{_ as E}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-CUqvEtR9.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-S29WPnAY.js";import{b as y}from"./dept-C0ob9NJI.js";import"./index-DUGl7QlM.js";import{u as W}from"./useTable-Chk1l09Z.js";import{u as F}from"./useDict-DVnSFNnt.js";import"./role-CWkK3zbL.js";import{_ as H}from"./AddDeptModal.vue_vue_type_script_setup_true_lang-CgaKGNYn.js";import{a9 as J}from"./arco-B8E_0xxC.js";import{e as Q,ac as h,r as X,h as a,j as p,k as r,l as o,t as e,a1 as n,p as Y,C as Z}from"./vue-Bh0u9iwh.js";import"./useBreakpoint-BSfOxcO0.js";import"./index-B-iw88hz.js";import"./useResetReactive-B34vVAsp.js";import"./useDept-CiPqnMG2.js";const ye=Q({name:"SystemDept",__name:"index",setup(ee){const{data:x}=F({code:"status"}),m=h("AddDeptModalRef"),b=h("tableRef"),l=X({name:"",status:""}),{loading:C,tableData:v,selectedKeys:u,search:_,select:D,selectAll:S,fixed:A,handleDelete:k}=W(()=>y.getList({...l}),{immediate:!0,onSuccess:()=>{Z(()=>{b.value?.expandAll(!0)})}}),R=()=>{l.name="",l.status="",_()},w=()=>{m.value?.add()},V=c=>{m.value?.edit(c.id)},I=c=>k(()=>y.delete({ids:[c.id]}),{showModal:!1}),M=()=>u.value.length?k(()=>y.delete({ids:u.value})):J.warning("请选择部门");return(c,i)=>{const s=K,f=a("a-space"),$=a("a-select"),B=a("icon-search"),T=a("a-input"),z=a("a-input-group"),G=a("a-row"),L=a("IconDown"),P=a("IconRight"),d=a("a-table-column"),j=E,N=a("a-popconfirm"),O=a("a-table"),U=q;return r(),p(U,{margin:""},{default:o(()=>[e(G,{justify:"space-between"},{default:o(()=>[e(f,{wrap:""},{default:o(()=>[e(s,{type:"add",onClick:w}),e(s,{type:"delete",onClick:M})]),_:1}),e(f,{wrap:""},{default:o(()=>[e(z,null,{default:o(()=>[e($,{modelValue:n(l).status,"onUpdate:modelValue":i[0]||(i[0]=t=>n(l).status=t),options:n(x),placeholder:"部门状态",style:{width:"120px"}},null,8,["modelValue","options"]),e(T,{modelValue:n(l).name,"onUpdate:modelValue":i[1]||(i[1]=t=>n(l).name=t),placeholder:"输入部门名称搜索","allow-clear":"",style:{width:"250px"}},{prefix:o(()=>[e(B)]),_:1},8,["modelValue"])]),_:1}),e(s,{type:"search",onClick:n(_)},null,8,["onClick"]),e(s,{type:"reset",onClick:R})]),_:1})]),_:1}),e(O,{ref_key:"tableRef",ref:b,class:"gi_table","row-key":"id",bordered:{cell:!0},data:n(v),loading:n(C),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:!1,"row-selection":{type:"checkbox",showCheckedAll:!1},"selected-keys":n(u),onSelect:n(D),onSelectAll:n(S)},{"expand-icon":o(({expanded:t})=>[t?(r(),p(L,{key:0})):(r(),p(P,{key:1}))]),columns:o(()=>[e(d,{title:"部门名称","data-index":"name",width:160}),e(d,{title:"排序","data-index":"sort",width:100,align:"center"}),e(d,{title:"状态",width:100,align:"center"},{cell:o(({record:t})=>[e(j,{status:t.status},null,8,["status"])]),_:1}),e(d,{title:"描述","data-index":"description",width:250,ellipsis:!0,tooltip:!0}),e(d,{title:"创建时间","data-index":"createTime",width:200}),e(d,{title:"操作",width:200,align:"center",fixed:n(A)},{cell:o(({record:t})=>[e(f,null,{default:o(()=>[e(s,{type:"edit",size:"mini",disabled:t.disabled,onClick:g=>V(t)},null,8,["disabled","onClick"]),t.parentId?(r(),p(s,{key:0,type:"add",size:"mini",status:"success",disabled:t.disabled,onClick:i[2]||(i[2]=g=>w())},null,8,["disabled"])):Y("",!0),e(N,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:g=>I(t)},{default:o(()=>[e(s,{type:"delete",size:"mini",disabled:t.disabled},null,8,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["data","loading","selected-keys","onSelect","onSelectAll"]),e(H,{ref_key:"AddDeptModalRef",ref:m,onSaveSuccess:n(_)},null,8,["onSaveSuccess"])]),_:1})}}});export{ye as default};
