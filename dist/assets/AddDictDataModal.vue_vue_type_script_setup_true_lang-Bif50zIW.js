import{dk as B}from"./index-ClEKbW6k.js";import{u as j}from"./useResetReactive-YcB0T7DE.js";import{a9 as F}from"./arco-BfMEPP4p.js";import{e as O,ac as T,a as p,c as v,h as o,j as $,k as z,$ as a,Y as A,l as n,t as l}from"./vue-N_SRJc_9.js";const Y=O({__name:"AddDictDataModal",emits:["save-success"],setup(E,{expose:_,emit:w}){const g=w,m=T("formRef"),d=p(""),k=v(()=>!!d.value),x=v(()=>k.value?"编辑字典数据":"新增字典数据"),u=p(!1),c=p(!1),[t,b]=j({name:"",value:"",status:1}),h={name:[{required:!0,message:"请输入字典名"}],value:[{required:!0,message:"请输入字典值"},{match:/^\w*$/,message:"格式不对！只能包含英文数字下划线"}],status:[{required:!0}]},V=()=>{d.value="",u.value=!0},R=async r=>{u.value=!0,d.value=r.id,c.value=!0;const e=await B(r);Object.assign(t,e.data),c.value=!1},y=()=>{m.value?.resetFields(),b()},D=async()=>{try{return await m.value?.validate()?!1:await new Promise(i=>setTimeout(()=>i(!0),300))?(F.success("模拟保存成功"),g("save-success"),!0):!1}catch{return!1}};return _({add:V,edit:R}),(r,e)=>{const i=o("a-input"),f=o("a-form-item"),C=o("a-switch"),M=o("a-form"),U=o("a-spin"),q=o("a-modal");return z(),$(q,{visible:a(u),"onUpdate:visible":e[3]||(e[3]=s=>A(u)?u.value=s:null),title:a(x),width:"calc(100% - 20px)","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:D,onClose:y},{default:n(()=>[l(U,{loading:a(c),class:"w-full"},{default:n(()=>[l(M,{ref_key:"formRef",ref:m,model:a(t),rules:h,size:"medium","auto-label-width":""},{default:n(()=>[l(f,{label:"字典名",field:"name"},{default:n(()=>[l(i,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=s=>a(t).name=s),modelModifiers:{trim:!0},placeholder:"请输入字典名","allow-clear":"","max-length":10},null,8,["modelValue"])]),_:1}),l(f,{label:"字典值",field:"value"},{default:n(()=>[l(i,{modelValue:a(t).value,"onUpdate:modelValue":e[1]||(e[1]=s=>a(t).value=s),modelModifiers:{trim:!0},placeholder:"请输入字典值","allow-clear":"","max-length":10},null,8,["modelValue"])]),_:1}),l(f,{label:"状态",field:"status"},{default:n(()=>[l(C,{modelValue:a(t).status,"onUpdate:modelValue":e[2]||(e[2]=s=>a(t).status=s),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["loading"])]),_:1},8,["visible","title"])}}});export{Y as _};
