import{_ as j}from"./index-d6X1y8sD.js";import{_ as A}from"./GiForm-ILBznYo5.js";import{ac as T,a9 as x}from"./arco-CDZlpuCh.js";import{a as q,X as L,e as g,r as y,h as r,n as U,k,t as o,l as s,a1 as n,m as b,j as G,y as M,Y as R}from"./vue-_iYK9Zi6.js";import{b as Y}from"./index-DuO8ohHr.js";import{_ as $}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-Dsi2Injn.js";import"./index-BJpBVVpn.js";import{u as E}from"./useTable-CdwSk5l7.js";import"./omit-CIzRepJ4.js";import"./useBreakpoint-DAFsyWcD.js";import"./index-BPv1vC5v.js";const F=i=>e=>{const l=q();T.open({title:e.title||i.title,content:()=>L(i.component,{ref:t=>l.value=t,multiple:e.multiple,queryParams:e.queryParams,...i.componentProps}),width:"90%",modalStyle:{maxWidth:"1000px"},onBeforeOk:async()=>{if(!l.value?.getSelectedData)return x.warning("组件必须暴露getSelectedData方法"),!1;const t=l.value?.getSelectedData?.()||[];return t.length?e?.onBeforeOk?await e.onBeforeOk(t):(e.onOk?.(t),!0):(x.warning(i.tip||"请选择数据"),!1)}})},W=g({__name:"index",props:{multiple:{type:Boolean,default:!1},queryParams:{default:()=>({})}},setup(i,{expose:e}){const l=i,t=y({username:""}),a=[{title:"序号",width:68,render:({rowIndex:c})=>o("span",null,[c+1," "])},{title:"姓名",dataIndex:"name",width:180},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"状态",width:100,align:"center",render:({record:c})=>o($,{status:c.status},null)}],{loading:p,tableData:d,pagination:_,search:u,select:w,selectAll:N,getSelectedData:C}=E(c=>Y.getList({...c,...t,...l.queryParams}),{immediate:!0}),I=()=>{t.username="",u()};return e({getSelectedData:C}),(c,m)=>{const S=r("a-input"),B=r("icon-search"),h=r("a-button"),P=r("icon-refresh"),V=r("a-space"),v=r("a-row"),D=r("a-table");return k(),U("div",null,[o(v,{justify:"end"},{default:s(()=>[o(V,{wrap:""},{default:s(()=>[o(S,{modelValue:n(t).username,"onUpdate:modelValue":m[0]||(m[0]=O=>n(t).username=O),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"]),o(h,{type:"primary",onClick:n(u)},{icon:s(()=>[o(B)]),default:s(()=>[m[1]||(m[1]=b("span",null,"查询",-1))]),_:1,__:[1]},8,["onClick"]),o(h,{onClick:I},{icon:s(()=>[o(P)]),default:s(()=>[m[2]||(m[2]=b("span",null,"重置",-1))]),_:1,__:[2]})]),_:1})]),_:1}),o(D,{class:"gi_table","row-key":"id",loading:n(p),bordered:{cell:!0},columns:a,data:n(d),scroll:{x:"100%",y:"500px"},"row-selection":{type:l.multiple?"checkbox":"radio",showCheckedAll:!0},pagination:n(_),onSelect:n(w),onSelectAll:n(N)},null,8,["loading","data","row-selection","pagination","onSelect","onSelectAll"])])}}}),f=F({title:"选择用户",component:W}),ne=g({__name:"index",setup(i){const e=y({radioId:"",radioName:"",chekboxId:"",chekboxName:"",asyncId:"",asyncName:""}),l=y([{type:"input-search",label:"单选",field:"radioName",props:{allowClear:!0,onSearch:()=>{f({onOk:t=>{e.radioId=t[0].id,e.radioName=t[0].name}})},onClear:()=>{e.radioId="",e.radioName=""}}},{type:"input-search",label:"多选",field:"chekboxName",props:{allowClear:!0,onSearch:()=>{f({multiple:!0,onOk:t=>{e.chekboxId=t.map(a=>a.id).join(","),e.chekboxName=t.map(a=>a.name).join(",")}})},onClear:()=>{e.chekboxId="",e.chekboxName=""}}},{type:"input-search",label:"异步",field:"asyncName",props:{allowClear:!0,onSearch:()=>{f({multiple:!0,onBeforeOk:async t=>(await new Promise(a=>setTimeout(()=>a(!0),1e3)),e.asyncId=t.map(a=>a.id).join(","),e.asyncName=t.map(a=>a.name).join(","),!0)})},onClear:()=>{e.asyncId="",e.asyncName=""}}}]);return(t,a)=>{const p=r("a-alert"),d=A,_=j;return k(),G(_,{margin:"","body-style":{overflowY:"auto"}},{default:s(()=>[o(p,{style:{"margin-bottom":"20px"}},{default:s(()=>a[1]||(a[1]=[M("通过函数调用表格弹窗",-1)])),_:1,__:[1]}),o(d,{modelValue:n(e),"onUpdate:modelValue":a[0]||(a[0]=u=>R(e)?e.value=u:null),columns:n(l)},null,8,["modelValue","columns"])]),_:1})}}});export{ne as default};
