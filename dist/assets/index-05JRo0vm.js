import{_ as me}from"./index-3av5scz5.js";import{e as h,c as j,h as a,n as V,k as v,s as fe,j as w,a as R,w as ve,q as ge,u as z,t as e,m,l as t,ac as B,r as ye,a1 as o,y as k,z as N,p as T,Y as be,C as ke}from"./vue-sr_Z8kjA.js";import{_ as A}from"./index-nN1PoSln.js";import{u as we}from"./useBreakpoint-D2cRTq41.js";import{_ as xe}from"./GiCellGender.vue_vue_type_script_setup_true_lang-DedqglNC.js";import{_ as he}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-BZwOLfRP.js";import{_ as Se}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-B8XItQpj.js";import{b as D}from"./user-CSvC6THp.js";import{u as Ce}from"./useTable-DZeM0WUV.js";import{u as $e}from"./useDept-qu7QYd29.js";import{u as Be}from"./useDict-CBcDm_sa.js";import"./role-ikVY_VFV.js";import{_ as De}from"./AddUserModal.vue_vue_type_script_setup_true_lang-CPeukLDY.js";import{_ as ze}from"./UserDetailDrawer.vue_vue_type_script_setup_true_lang-C88mGUJP.js";import{a9 as Ve}from"./arco-Buj77_8l.js";import"./index-Dru6jS8c.js";import"./dept-GYyz1j5K.js";import"./useResetReactive-CIFZZO4u.js";import"./regexp-BWv6Tqg2.js";const Re=h({__name:"SplitButton",props:{collapsed:{type:Boolean,default:!1},type:{default:"circle"},iconSize:{default:14},disabled:{type:Boolean,default:!1}},emits:["click","update:collapsed"],setup(b,{emit:r}){const s=b,i=r,d=j(()=>[`gi-split-button--${s.type}`,{"is-collapsed":s.collapsed,"is-disabled":s.disabled}]),u=()=>{s.disabled||(i("click"),i("update:collapsed",!s.collapsed))};return(g,_)=>{const p=a("icon-right"),S=a("icon-left");return v(),V("div",{class:fe(["gi-split-button",d.value]),onClick:u},[g.collapsed?(v(),w(p,{key:0,size:g.iconSize},null,8,["size"])):(v(),w(S,{key:1,size:g.iconSize},null,8,["size"]))],2)}}}),Ae=A(Re,[["__scopeId","data-v-7ad879b4"]]),Ue=h({__name:"SplitPaneFlexibleBox",props:{visible:{type:Boolean,default:!1},direction:{default:"left"}},emits:["update:visible"],setup(b,{emit:r}){const s=b,i=r,d=R(),{breakpoint:u}=we();ve(()=>u.value,_=>{["xs"].includes(_)?i("update:visible",!1):i("update:visible",!0)},{immediate:!0});const g=j(()=>{const _={};return _[`margin-${s.direction}`]=!s.visible&&d.value&&d.value.clientWidth?`-${d.value.clientWidth}px`:0,_});return(_,p)=>(v(),V("div",{ref_key:"boxRef",ref:d,class:"gi-flexible-box",style:ge(g.value)},[z(_.$slots,"default",{},void 0,!0)],4))}}),Ge=A(Ue,[["__scopeId","data-v-f95766bd"]]),Pe={class:"gi-split-pane"},Ie={class:"gi-split-pane__left"},Me={class:"gi-split-pane__line"},Le={class:"gi-split-pane__right"},Ne=h({name:"GiSplitPane",__name:"index",setup(b){const r=R(!0),s=()=>{r.value=!r.value};return(i,d)=>(v(),V("div",Pe,[e(Ge,{visible:r.value,"onUpdate:visible":d[0]||(d[0]=u=>r.value=u)},{default:t(()=>[m("div",Ie,[z(i.$slots,"left",{},void 0,!0)])]),_:3},8,["visible"]),m("div",Me,[e(Ae,{collapsed:!r.value,onClick:s},null,8,["collapsed"])]),m("div",Le,[z(i.$slots,"default",{},void 0,!0)])]))}}),Te=A(Ne,[["__scopeId","data-v-97e77ec0"]]),je={class:"gi_full_column"},it=h({name:"SystemUser",__name:"index",setup(b){const{data:r}=Be({code:"status"}),s=B("treeRef"),i=B("AddUserModalRef"),d=B("UserDetailDrawerRef"),u=R(""),{deptList:g,getDeptList:_}=$e({onSuccess:()=>{ke(()=>{s.value?.expandAll(!0)})}});_();const p=ye({status:"",username:""}),{loading:S,tableData:W,pagination:q,selectedKeys:C,search:x,select:E,selectAll:F,fixed:O,handleDelete:U}=Ce(f=>D.getList({...f,...p}),{immediate:!0}),K=()=>{p.status="",p.username="",x()},Y=()=>{i.value?.add()},H=f=>{i.value?.edit(f.id)},J=f=>U(()=>D.delete({ids:[f.id]}),{showModal:!1}),Q=()=>C.value.length?U(()=>D.delete({ids:C.value})):Ve.warning("请选择用户！"),X=f=>{d.value?.open(f.id)};return(f,n)=>{const G=a("icon-search"),P=a("a-input"),Z=a("a-tree"),ee=a("a-scrollbar"),te=a("icon-plus"),y=a("a-button"),I=a("icon-delete"),$=a("a-space"),le=a("a-select"),ne=a("a-input-group"),ae=a("a-row"),c=a("a-table-column"),oe=a("a-link"),se=Se,ie=he,de=xe,M=a("a-tag"),re=a("icon-edit"),ce=a("a-popconfirm"),pe=a("a-table"),ue=Te,_e=me;return v(),w(_e,{margin:""},{default:t(()=>[e(ue,null,{left:t(()=>[e(P,{modelValue:o(u),"onUpdate:modelValue":n[0]||(n[0]=l=>be(u)?u.value=l:null),placeholder:"输入部门名称搜索","allow-clear":"",style:{marginBottom:"8px"}},{prefix:t(()=>[e(G)]),_:1},8,["modelValue"]),m("div",je,[e(ee,{style:{height:"100%",overflow:"auto"},"outer-style":"height: 100%"},{default:t(()=>[e(Z,{ref_key:"treeRef",ref:s,"block-node":"","show-line":"","default-expand-all":"",data:o(g),"field-names":{key:"id",title:"name",children:"children"},onSelect:o(x)},null,8,["data","onSelect"])]),_:1})])]),default:t(()=>[e(ae,{justify:"space-between"},{default:t(()=>[e($,{wrap:""},{default:t(()=>[e(y,{type:"primary",onClick:Y},{icon:t(()=>[e(te)]),default:t(()=>[n[3]||(n[3]=m("span",null,"新增",-1))]),_:1,__:[3]}),e(y,{type:"primary",status:"danger",onClick:Q},{icon:t(()=>[e(I)]),default:t(()=>[n[4]||(n[4]=m("span",null,"删除",-1))]),_:1,__:[4]})]),_:1}),e($,{wrap:""},{default:t(()=>[e(ne,null,{default:t(()=>[e(le,{modelValue:o(p).status,"onUpdate:modelValue":n[1]||(n[1]=l=>o(p).status=l),options:o(r),placeholder:"用户状态","allow-clear":"",style:{width:"150px"}},null,8,["modelValue","options"]),e(P,{modelValue:o(p).username,"onUpdate:modelValue":n[2]||(n[2]=l=>o(p).username=l),placeholder:"输入用户名搜索","allow-clear":"",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),e(y,{type:"primary",onClick:o(x)},{icon:t(()=>[e(G)]),default:t(()=>[n[5]||(n[5]=m("span",null,"查询",-1))]),_:1,__:[5]},8,["onClick"]),e(y,{onClick:K},{default:t(()=>n[6]||(n[6]=[k("重置",-1)])),_:1,__:[6]})]),_:1})]),_:1}),e(pe,{class:"gi_table","row-key":"id",loading:o(S),data:o(W),bordered:{cell:!0},scroll:{x:"100%",y:"100%",minWidth:1700},pagination:o(q),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":o(C),onSelect:o(E),onSelectAll:o(F)},{columns:t(()=>[e(c,{title:"序号",width:64},{cell:t(l=>[k(N(l.rowIndex+1),1)]),_:1}),e(c,{title:"用户名","data-index":"username",width:120},{cell:t(({record:l})=>[e(oe,{onClick:L=>X(l)},{default:t(()=>[k(N(l.username),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{title:"昵称","data-index":"nickname",width:150},{cell:t(({record:l})=>[e(se,{avatar:l.avatar,name:l.nickname},null,8,["avatar","name"])]),_:1}),e(c,{title:"状态",width:100,align:"center"},{cell:t(({record:l})=>[e(ie,{status:l.status},null,8,["status"])]),_:1}),e(c,{title:"性别","data-index":"gender",width:80,align:"center"},{cell:t(({record:l})=>[e(de,{gender:l.gender},null,8,["gender"])]),_:1}),e(c,{title:"联系方式","data-index":"phone",width:180}),e(c,{title:"部门","data-index":"deptName",width:180}),e(c,{title:"类型",width:100,align:"center"},{cell:t(({record:l})=>[l.type===1?(v(),w(M,{key:0,color:"red",size:"small"},{default:t(()=>n[7]||(n[7]=[k("系统内置",-1)])),_:1,__:[7]})):T("",!0),l.type===2?(v(),w(M,{key:1,color:"orange",size:"small"},{default:t(()=>n[8]||(n[8]=[k("自定义",-1)])),_:1,__:[8]})):T("",!0)]),_:1}),e(c,{title:"描述",width:200,"data-index":"description",ellipsis:!0,tooltip:!0}),e(c,{title:"创建时间","data-index":"createTime",width:200}),e(c,{title:"操作",width:180,align:"center",fixed:o(O)},{cell:t(({record:l})=>[e($,null,{default:t(()=>[e(y,{type:"primary",size:"mini",onClick:L=>H(l)},{icon:t(()=>[e(re)]),default:t(()=>[n[9]||(n[9]=m("span",null,"编辑",-1))]),_:2,__:[9]},1032,["onClick"]),e(ce,{type:"warning",content:"确定删除该用户吗?",onBeforeOk:L=>J(l)},{default:t(()=>[e(y,{type:"primary",status:"danger",size:"mini",disabled:l.disabled},{icon:t(()=>[e(I)]),default:t(()=>[n[10]||(n[10]=m("span",null,"删除",-1))]),_:2,__:[10]},1032,["disabled"])]),_:2},1032,["onBeforeOk"])]),_:2},1024)]),_:1},8,["fixed"])]),_:1},8,["loading","data","pagination","selected-keys","onSelect","onSelectAll"])]),_:1}),e(De,{ref_key:"AddUserModalRef",ref:i,onSaveSuccess:o(x)},null,8,["onSaveSuccess"]),e(ze,{ref_key:"UserDetailDrawerRef",ref:d},null,512)]),_:1})}}});export{it as default};
